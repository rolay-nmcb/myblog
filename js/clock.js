const DEBUG_MODE=!1;function debugLog(...e){false}function clockUpdateTime(e,c){debugLog("ğŸ” [è°ƒè¯•] clockUpdateTimeå‡½æ•°è¢«è°ƒç”¨"),debugLog("ğŸ” [è°ƒè¯•] ä¼ å…¥çš„åŸå¸‚å‚æ•°:",c),debugLog("ğŸ” [è°ƒè¯•] ä¼ å…¥çš„å¤©æ°”æ•°æ®:",e),debugLog("ğŸ” [è°ƒè¯•] æœ€ç»ˆæ˜¾ç¤ºçš„åŸå¸‚åç§°:",c),debugLog("ğŸ” [è°ƒè¯•] æ¸©åº¦:",e.now.temp,"Â°C"),debugLog("ğŸ” [è°ƒè¯•] å¤©æ°”çŠ¶å†µ:",e.now.text);let a="#000";switch(e.now.icon){case"100":a="#fdcc45";break;case"101":a="#fe6976";break;case"102":case"103":a="#fe7f5b";break;case"104":case"150":case"151":case"152":case"153":case"154":case"800":case"801":case"802":case"803":case"804":case"805":case"806":case"807":a="#2152d1";break;case"300":case"301":case"305":case"306":case"307":case"308":case"309":case"310":case"311":case"312":case"313":case"314":case"315":case"316":case"317":case"318":case"350":case"351":case"399":a="#49b1f5";break;case"302":case"303":case"304":a="#fdcc46";break;case"400":case"401":case"402":case"403":case"404":case"405":case"406":case"407":case"408":case"409":case"410":case"456":case"457":case"499":a="#a3c2dc";break;case"500":case"501":case"502":case"503":case"504":case"507":case"508":case"509":case"510":case"511":case"512":case"513":case"514":case"515":a="#97acba";break;case"900":case"999":a="red";break;case"901":a="#179fff;"}var t=document.getElementById("hexo_electric_clock");clock_box_html=`\n  <div class="clock-row">\n    <span id="card-clock-clockdate" class="card-clock-clockdate"></span>\n    <span class="card-clock-weather"><i class="qi-${e.now.icon}-fill" style="color: ${a}"></i> ${e.now.text} <span>${e.now.temp}</span> â„ƒ</span>\n    <span class="card-clock-humidity">ğŸ’§ ${e.now.humidity}%</span>\n  </div>\n  <div class="clock-row">\n    <span id="card-clock-time" class="card-clock-time"></span>\n  </div>\n  <div class="clock-row">\n    <span class="card-clock-windDir"> <i class="qi-gale"></i> ${e.now.windDir}</span>\n    <span class="card-clock-location">${c}</span>\n    <span id="card-clock-dackorlight" class="card-clock-dackorlight"></span>\n  </div>\n  `;var o=["SUN","MON","TUE","WED","THU","FRI","SAT"],n=document.getElementById("card-clock-loading");function r(){var e,c=new Date,a=g(c.getHours(),2)+":"+g(c.getMinutes(),2)+":"+g(c.getSeconds(),2),t=g(c.getFullYear(),4)+"-"+g(c.getMonth()+1,2)+"-"+g(c.getDate(),2)+" "+o[c.getDay()],n=c.getHours();if(n>12?(n-=12,e=" P M"):e=" A M",document.getElementById("card-clock-time")){var r=document.getElementById("card-clock-time"),s=document.getElementById("card-clock-clockdate"),l=document.getElementById("card-clock-dackorlight");r.innerHTML=a,s.innerHTML=t,l.innerHTML=e}}function g(e,c){for(var a="",t=0;t<c;t++)a+="0";return(a+e).slice(-c)}n&&(n.innerHTML=""),t.innerHTML=clock_box_html;setInterval(r,1e3);r()}function getIpInfo(){debugLog("ğŸ” [è°ƒè¯•] å¼€å§‹è·å–IPä¿¡æ¯"),debugLog("ğŸ” [è°ƒè¯•] clock_default_rectangle_enable:",clock_default_rectangle_enable),debugLog("ğŸ” [è°ƒè¯•] clock_rectangle:",clock_rectangle),debugLog("ğŸ” [è°ƒè¯•] qweather_key:",qweather_key?"å·²é…ç½®":"æœªé…ç½®"),debugLog("ğŸ” [è°ƒè¯•] gaud_map_key:",gaud_map_key?"å·²é…ç½®":"æœªé…ç½®");let e={city:"",qweather_url:""};function c(){return debugLog("ğŸ” [è°ƒè¯•] å¼€å§‹è·å–é»˜è®¤åŸå¸‚ï¼Œä½¿ç”¨åæ ‡:",clock_rectangle),fetch(`https://restapi.amap.com/v3/geocode/regeo?key=${gaud_map_key}&location=${clock_rectangle}`).then(e=>e.json()).then(c=>{if(debugLog("ğŸ” [è°ƒè¯•] é€†åœ°ç†ç¼–ç å“åº”:",c),"1"===c.status){const a=c.regeocode.addressComponent,t=Array.isArray(a.city)?a.province:a.city;return debugLog("ğŸ” [è°ƒè¯•] è·å–åˆ°çš„é»˜è®¤åŸå¸‚:",t),e.city=t,t}return debugLog("ğŸ” [è°ƒè¯•] é€†åœ°ç†ç¼–ç å¤±è´¥ï¼Œè¿”å›æœªçŸ¥åŸå¸‚"),"æœªçŸ¥åŸå¸‚"}).catch(e=>(debugLog("ğŸ” [è°ƒè¯•] è·å–é»˜è®¤åŸå¸‚å¤±è´¥:",e),"æœªçŸ¥åŸå¸‚"))}"true"===clock_default_rectangle_enable&&e?(debugLog("ğŸ” [è°ƒè¯•] ä½¿ç”¨å›ºå®šåæ ‡æ¨¡å¼"),fetch(`https://restapi.amap.com/v3/geocode/regeo?key=${gaud_map_key}&location=${clock_rectangle}`).then(e=>e.json()).then(e=>{if("1"===e.status){const c=e.regeocode.addressComponent;return Array.isArray(c.city)?c.province:c.city}}).then(c=>{fetch(`https://devapi.qweather.com/v7/weather/now?location=${clock_rectangle}&key=${qweather_key}`).then(e=>e.json()).then(a=>{if(document.getElementById("hexo_electric_clock")){clockUpdateTime(a,Array.isArray(c)?e.city:c)}})})):(debugLog("ğŸ” [è°ƒè¯•] å¼€å§‹åŠ¨æ€IPå®šä½æµç¨‹"),fetch("https://v.api.aa1.cn/api/myip/index.php?aa1=json").then(e=>e.json()).then(e=>{const c=e.myip;return debugLog("ğŸ” [è°ƒè¯•] è·å–åˆ°ç”¨æˆ·IP:",c),debugLog("ğŸ” [è°ƒè¯•] å¼€å§‹é«˜å¾·åœ°å›¾IPå®šä½ï¼ŒIP:",c),fetch(`https://restapi.amap.com/v3/ip?key=${gaud_map_key}&ip=${c}`)}).then(e=>e.json()).then(a=>{debugLog("ğŸ” [è°ƒè¯•] é«˜å¾·åœ°å›¾å®šä½å®Œæ•´ç»“æœ:",a),debugLog("ğŸ” [è°ƒè¯•] æ£€æµ‹åˆ°çš„åŸå¸‚:",a.city),debugLog("ğŸ” [è°ƒè¯•] æ£€æµ‹åˆ°çš„çœä»½:",a.province),debugLog("ğŸ” [è°ƒè¯•] rectangleå­—æ®µ:",a.rectangle),debugLog("ğŸ” [è°ƒè¯•] rectangleæ˜¯å¦ä¸ºæ•°ç»„:",Array.isArray(a.rectangle));let t=Array.isArray(a.rectangle)?clock_rectangle:a.rectangle.split(";")[0];if(e.qweather_url=`https://devapi.qweather.com/v7/weather/now?location=${t}&key=${qweather_key}`,Array.isArray(a.rectangle))debugLog("ğŸ” [è°ƒè¯•] IPå®šä½å¤±è´¥ï¼Œrectangleä¸ºæ•°ç»„ï¼Œä½¿ç”¨å¤‡ç”¨åæ ‡"),c().then(c=>{debugLog("ğŸ” [è°ƒè¯•] IPå®šä½å¤±è´¥åˆ†æ”¯ï¼Œè·å–åˆ°é»˜è®¤åŸå¸‚:",c),debugLog("ğŸ” [è°ƒè¯•] IPå®šä½å¤±è´¥åˆ†æ”¯ï¼Œå¤©æ°”API URL:",e.qweather_url),fetch(e.qweather_url).then(e=>e.json()).then(e=>{debugLog("ğŸ” [è°ƒè¯•] IPå®šä½å¤±è´¥åˆ†æ”¯ï¼Œå¤©æ°”æ•°æ®:",e),document.getElementById("hexo_electric_clock")&&(debugLog("ğŸ” [è°ƒè¯•] IPå®šä½å¤±è´¥åˆ†æ”¯ï¼Œæœ€ç»ˆæ˜¾ç¤ºåŸå¸‚:",c),clockUpdateTime(e,c))})});else{debugLog("ğŸ” [è°ƒè¯•] IPå®šä½æˆåŠŸï¼Œrectangleä¸æ˜¯æ•°ç»„");const t=a.city||a.province;debugLog("ğŸ” [è°ƒè¯•] ä»IPå®šä½è·å–çš„åŸå¸‚ä¿¡æ¯:",t),t?(debugLog("ğŸ” [è°ƒè¯•] IPå®šä½æˆåŠŸåˆ†æ”¯ï¼Œç›´æ¥ä½¿ç”¨IPåŸå¸‚:",t),debugLog("ğŸ” [è°ƒè¯•] IPå®šä½æˆåŠŸåˆ†æ”¯ï¼Œå¤©æ°”API URL:",e.qweather_url),fetch(e.qweather_url).then(e=>e.json()).then(e=>{debugLog("ğŸ” [è°ƒè¯•] IPå®šä½æˆåŠŸåˆ†æ”¯ï¼Œå¤©æ°”æ•°æ®:",e),document.getElementById("hexo_electric_clock")&&(debugLog("ğŸ” [è°ƒè¯•] IPå®šä½æˆåŠŸåˆ†æ”¯ï¼Œæœ€ç»ˆæ˜¾ç¤ºåŸå¸‚:",t),clockUpdateTime(e,t))})):(debugLog("ğŸ” [è°ƒè¯•] IPå®šä½æˆåŠŸä½†æ— åŸå¸‚ä¿¡æ¯ï¼Œä½¿ç”¨é»˜è®¤åŸå¸‚"),c().then(c=>{debugLog("ğŸ” [è°ƒè¯•] IPå®šä½æ— åŸå¸‚åˆ†æ”¯ï¼Œè·å–åˆ°é»˜è®¤åŸå¸‚:",c),debugLog("ğŸ” [è°ƒè¯•] IPå®šä½æ— åŸå¸‚åˆ†æ”¯ï¼Œå¤©æ°”API URL:",e.qweather_url),fetch(e.qweather_url).then(e=>e.json()).then(e=>{debugLog("ğŸ” [è°ƒè¯•] IPå®šä½æ— åŸå¸‚åˆ†æ”¯ï¼Œå¤©æ°”æ•°æ®:",e),document.getElementById("hexo_electric_clock")&&(debugLog("ğŸ” [è°ƒè¯•] IPå®šä½æ— åŸå¸‚åˆ†æ”¯ï¼Œæœ€ç»ˆæ˜¾ç¤ºåŸå¸‚:",c),clockUpdateTime(e,c))})}))}}).catch(a=>{debugLog("ğŸ” [è°ƒè¯•] ç¬¬ä¸‰æ–¹IP APIå¤±è´¥ï¼Œä½¿ç”¨å¤‡ç”¨æ–¹æ¡ˆ:",a),debugLog("ğŸ” [è°ƒè¯•] å¼€å§‹å¤‡ç”¨æ–¹æ¡ˆï¼šç›´æ¥ä½¿ç”¨é«˜å¾·åœ°å›¾IPå®šä½"),fetch(`https://restapi.amap.com/v3/ip?key=${gaud_map_key}`).then(e=>e.json()).then(a=>{debugLog("ğŸ” [è°ƒè¯•] å¤‡ç”¨æ–¹æ¡ˆé«˜å¾·åœ°å›¾å®šä½ç»“æœ:",a),debugLog("ğŸ” [è°ƒè¯•] å¤‡ç”¨æ–¹æ¡ˆæ£€æµ‹åˆ°çš„åŸå¸‚:",a.city),debugLog("ğŸ” [è°ƒè¯•] å¤‡ç”¨æ–¹æ¡ˆæ£€æµ‹åˆ°çš„çœä»½:",a.province),debugLog("ğŸ” [è°ƒè¯•] å¤‡ç”¨æ–¹æ¡ˆrectangleå­—æ®µ:",a.rectangle),debugLog("ğŸ” [è°ƒè¯•] å¤‡ç”¨æ–¹æ¡ˆrectangleæ˜¯å¦ä¸ºæ•°ç»„:",Array.isArray(a.rectangle));let t=Array.isArray(a.rectangle)?clock_rectangle:a.rectangle.split(";")[0];if(e.qweather_url=`https://devapi.qweather.com/v7/weather/now?location=${t}&key=${qweather_key}`,debugLog("ğŸ” [è°ƒè¯•] å¤‡ç”¨æ–¹æ¡ˆå¤©æ°”API URL:",e.qweather_url),Array.isArray(a.rectangle))debugLog("ğŸ” [è°ƒè¯•] å¤‡ç”¨æ–¹æ¡ˆIPå®šä½å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤åæ ‡"),c().then(c=>{debugLog("ğŸ” [è°ƒè¯•] å¤‡ç”¨æ–¹æ¡ˆè·å–åˆ°é»˜è®¤åŸå¸‚:",c),fetch(e.qweather_url).then(e=>e.json()).then(e=>{debugLog("ğŸ” [è°ƒè¯•] å¤‡ç”¨æ–¹æ¡ˆå¤©æ°”æ•°æ®:",e),document.getElementById("hexo_electric_clock")&&(debugLog("ğŸ” [è°ƒè¯•] å¤‡ç”¨æ–¹æ¡ˆæœ€ç»ˆæ˜¾ç¤ºåŸå¸‚:",c),clockUpdateTime(e,c))})});else{debugLog("ğŸ” [è°ƒè¯•] å¤‡ç”¨æ–¹æ¡ˆIPå®šä½æˆåŠŸ");const t=a.city||a.province;debugLog("ğŸ” [è°ƒè¯•] å¤‡ç”¨æ–¹æ¡ˆä»IPè·å–çš„åŸå¸‚:",t),t?(debugLog("ğŸ” [è°ƒè¯•] å¤‡ç”¨æ–¹æ¡ˆç›´æ¥ä½¿ç”¨IPåŸå¸‚:",t),fetch(e.qweather_url).then(e=>e.json()).then(e=>{debugLog("ğŸ” [è°ƒè¯•] å¤‡ç”¨æ–¹æ¡ˆå¤©æ°”æ•°æ®:",e),document.getElementById("hexo_electric_clock")&&(debugLog("ğŸ” [è°ƒè¯•] å¤‡ç”¨æ–¹æ¡ˆæœ€ç»ˆæ˜¾ç¤ºåŸå¸‚:",t),clockUpdateTime(e,t))})):c().then(c=>{fetch(e.qweather_url).then(e=>e.json()).then(e=>{document.getElementById("hexo_electric_clock")&&clockUpdateTime(e,c)})})}})}))}getIpInfo();