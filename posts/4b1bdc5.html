<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>Kafka为什么这么快 | 纳斯卡可`Blog</title><meta name="author" content="纳斯卡可,2843035026@qq.com"><meta name="copyright" content="纳斯卡可"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="深度解析：为什么 Kafka 能快到“突破天际”？—— 论 Kafka 的机械共鸣设计在分布式系统领域，Apache Kafka 几乎是高性能消息队列的代名词。令人惊叹的是，作为一个基于磁盘存储的系统，Kafka 的吞吐量竟然能超越许多基于内存的数据库。 很多人将其归结为“快”，但这种快并不是某种单一的黑科技，而是一场对硬件特性的极致压榨。这种设计思想在计算机科学中被称为 “机械共鸣” —— 即了"><meta property="og:type" content="article"><meta property="og:title" content="Kafka为什么这么快"><meta property="og:url" content="https://nmcb666.vip/posts/4b1bdc5.html"><meta property="og:site_name" content="纳斯卡可&#96;Blog"><meta property="og:description" content="深度解析：为什么 Kafka 能快到“突破天际”？—— 论 Kafka 的机械共鸣设计在分布式系统领域，Apache Kafka 几乎是高性能消息队列的代名词。令人惊叹的是，作为一个基于磁盘存储的系统，Kafka 的吞吐量竟然能超越许多基于内存的数据库。 很多人将其归结为“快”，但这种快并不是某种单一的黑科技，而是一场对硬件特性的极致压榨。这种设计思想在计算机科学中被称为 “机械共鸣” —— 即了"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://java-ai-nskk.oss-cn-beijing.aliyuncs.com/myblog/666.jpg"><meta property="article:published_time" content="2026-02-07T13:32:58.000Z"><meta property="article:modified_time" content="2026-02-16T09:30:39.401Z"><meta property="article:author" content="纳斯卡可"><meta property="article:tag" content="八股"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://java-ai-nskk.oss-cn-beijing.aliyuncs.com/myblog/666.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Kafka为什么这么快",
  "url": "https://nmcb666.vip/posts/4b1bdc5.html",
  "image": "https://java-ai-nskk.oss-cn-beijing.aliyuncs.com/myblog/666.jpg",
  "datePublished": "2026-02-07T13:32:58.000Z",
  "dateModified": "2026-02-16T09:30:39.401Z",
  "author": [
    {
      "@type": "Person",
      "name": "纳斯卡可",
      "url": "https://nmcb666.vip"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://nmcb666.vip/posts/4b1bdc5.html"><link rel="preconnect" href="//cdn.jsdmirror.com"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="manifest" href="/manifest.json"><meta name="msapplication-TileColor" content="#13227a"><link rel="apple-touch-icon" sizes="180x180" href="/img/siteicon/128.png"><link rel="icon" type="image/png" sizes="32x32" href="/img/siteicon/32.png"><link rel="icon" type="image/png" sizes="16x16" href="/img/siteicon/16.png"><link rel="mask-icon" href="/img/siteicon/128.png" color="#5bbad5"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdmirror.com/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>(() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"pagination":{"enable":false,"hitsPerPage":8},"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdmirror.com/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"Kafka为什么这么快",isHighlightShrink:!1,isToc:!0,pageType:"post"}</script><link rel="stylesheet" href="/css/custom.css" media="defer" onload='this.media="all"'><script defer src="/js/title.js"></script><link rel="stylesheet" href="/css/universe.css"><link rel="stylesheet" href="/bilibiliBanner/banner.css"><link rel="stylesheet" href="https://cdn.jsdmirror.com/gh/l-lin/font-awesome-animation/dist/font-awesome-animation.min.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.css"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-blog@2.0.4/css/runtime/runtime.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload='this.media="all"'><script src="https://cdn.cbd.int/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload='this.media="screen"'><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="纳斯卡可`Blog" type="application/atom+xml"></head><body><div id="web_bg" style="background-image:url(https://java-ai-nskk.oss-cn-beijing.aliyuncs.com/myblog/default_cover_14.webp)"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://java-ai-nskk.oss-cn-beijing.aliyuncs.com/myblog/666.jpg" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">47</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">12</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><i class="fa-fw icon-home"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-home"></use></svg> <span>Home</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/archives/"><i class="fa-fw icon-archive"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-archive"></use></svg> <span>归档</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/tags/"><i class="fa-fw icon-tags"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-tags"></use></svg> <span>标签</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/bangumis/index.html"><i class="fa-fw icon-bilibili"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-bilibili"></use></svg> <span>追番</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/comments/"><i class="fa-fw icon-xinfeng"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-xinfeng"></use></svg> <span>留言板</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/links/"><i class="fa-fw icon-lianjie"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-lianjie"></use></svg> <span>友链</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/about/"><i class="fa-fw icon-zhifeiji"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-zhifeiji"></use></svg> <span>关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">纳斯卡可`Blog</span></a><a class="nav-page-title" href="/"><span class="site-name">Kafka为什么这么快</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i> <span>返回首页</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i> <span>搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><i class="fa-fw icon-home"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-home"></use></svg> <span>Home</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/archives/"><i class="fa-fw icon-archive"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-archive"></use></svg> <span>归档</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/tags/"><i class="fa-fw icon-tags"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-tags"></use></svg> <span>标签</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/bangumis/index.html"><i class="fa-fw icon-bilibili"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-bilibili"></use></svg> <span>追番</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/comments/"><i class="fa-fw icon-xinfeng"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-xinfeng"></use></svg> <span>留言板</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/links/"><i class="fa-fw icon-lianjie"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-lianjie"></use></svg> <span>友链</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/about/"><i class="fa-fw icon-zhifeiji"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-zhifeiji"></use></svg> <span>关于</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Kafka为什么这么快</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2026-02-07T13:32:58.000Z" title="发表于 2026-02-07 13:32:58">2026-02-07</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2026-02-16T09:30:39.401Z" title="更新于 2026-02-16 09:30:39">2026-02-16</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="深度解析：为什么-Kafka-能快到“突破天际”？——-论-Kafka-的机械共鸣设计"><a href="#深度解析：为什么-Kafka-能快到“突破天际”？——-论-Kafka-的机械共鸣设计" class="headerlink" title="深度解析：为什么 Kafka 能快到“突破天际”？—— 论 Kafka 的机械共鸣设计"></a>深度解析：为什么 Kafka 能快到“突破天际”？—— 论 Kafka 的机械共鸣设计</h1><p>在分布式系统领域，Apache Kafka 几乎是高性能消息队列的代名词。令人惊叹的是，作为一个<strong>基于磁盘存储</strong>的系统，Kafka 的吞吐量竟然能超越许多基于内存的数据库。</p><p>很多人将其归结为“快”，但这种快并不是某种单一的黑科技，而是一场<strong>对硬件特性的极致压榨</strong>。这种设计思想在计算机科学中被称为 <strong>“机械共鸣”</strong> —— 即了解底层硬件的工作原理，并让软件设计顺应这些原理。</p><p>本文将从五个核心维度，拆解 Kafka 性能神话背后的技术思考。</p><hr><h3 id="一、-颠覆认知：磁盘并不慢，随机读写才慢"><a href="#一、-颠覆认知：磁盘并不慢，随机读写才慢" class="headerlink" title="一、 颠覆认知：磁盘并不慢，随机读写才慢"></a>一、 颠覆认知：磁盘并不慢，随机读写才慢</h3><p>很多人对 Kafka 的第一个疑问是：“数据存磁盘上，怎么可能快？”</p><p>事实上，磁盘的<strong>顺序写（Sequential Writing）</strong>性能极高。在某些场景下，磁盘顺序写的速度甚至可以媲美随机内存读写。</p><ul><li><strong>Kafka 的做法</strong>：Kafka 将所有消息以 <strong>Append-only（仅追加）</strong> 的方式写入日志文件（Log）。它不执行任何随机位置的更新，也不删除单条数据。</li><li><strong>技术思考</strong>：通过将“逻辑上的随机写”转换为“物理上的顺序写”，Kafka 绕过了磁盘磁头寻道的最大延迟。这种简单到极致的追加设计，是其写入性能的基础。</li></ul><h3 id="二、-零拷贝（Zero-Copy）：减少-CPU-的“搬运工”工作"><a href="#二、-零拷贝（Zero-Copy）：减少-CPU-的“搬运工”工作" class="headerlink" title="二、 零拷贝（Zero-Copy）：减少 CPU 的“搬运工”工作"></a>二、 零拷贝（Zero-Copy）：减少 CPU 的“搬运工”工作</h3><p>在传统的网络传输中，数据从磁盘到网卡需要经历 <strong>4 次拷贝</strong>和 <strong>4 次上下文切换</strong>。</p><ol><li>磁盘 -&gt; 内核缓冲区</li><li>内核缓冲区 -&gt; 用户空间应用缓冲区（CPU 参与）</li><li>用户空间应用缓冲区 -&gt; 内核 Socket 缓冲区（CPU 参与）</li><li>Socket 缓冲区 -&gt; 网卡</li></ol><ul><li><strong>Kafka 的优化</strong>：Kafka 利用了 Linux 内核的 <code>sendfile</code> 系统调用。数据直接从<strong>内核页缓存（Page Cache）</strong>传输到<strong>网卡</strong>，跳过了用户空间。</li><li><strong>技术思考</strong>：这意味着数据在传输过程中不需要经过 Java 堆内存，不仅减少了 CPU 消耗，更重要的是<strong>彻底消除了 JVM 的垃圾回收（GC）压力</strong>。对于海量数据流，不进 JVM 才是最快的。</li></ul><h3 id="三、-页缓存（Page-Cache）-vs-JVM-缓存"><a href="#三、-页缓存（Page-Cache）-vs-JVM-缓存" class="headerlink" title="三、 页缓存（Page Cache） vs JVM 缓存"></a>三、 页缓存（Page Cache） vs JVM 缓存</h3><p>传统的 Java 应用喜欢在内存中维护各种 Cache。但 Kafka 反其道而行之：它几乎不自己管理缓存，而是完全交由操作系统的 <strong>Page Cache</strong> 处理。</p><ul><li><strong>带来的红利</strong>：<ul><li><strong>内存利用率更高</strong>：Page Cache 由内核管理，避免了对象存储在 JVM 堆中带来的额外内存开销（Header, Padding 等）。</li><li><strong>热数据直达</strong>：如果消费者紧跟生产者的脚步，消息直接从内存中读取，根本不会产生真实的磁盘 I/O。</li><li><strong>容错性</strong>：即使 Kafka 进程崩溃，数据依然在系统缓存中，重启后依然可以立即通过缓存提供服务。</li></ul></li></ul><h3 id="四、-网络通信的艺术：多级-Reactor-模型"><a href="#四、-网络通信的艺术：多级-Reactor-模型" class="headerlink" title="四、 网络通信的艺术：多级 Reactor 模型"></a>四、 网络通信的艺术：多级 Reactor 模型</h3><p>Kafka 的网络层是高性能并发处理的典范。它采用了<strong>基于 Java NIO 的多级 Reactor 模型</strong>：</p><ol><li><strong>Acceptor</strong>：只负责接收连接。</li><li><strong>Processor 线程池</strong>：负责处理 I/O 读写。每个线程维护一个 Selector，并发管理成千上万个连接。</li><li><strong>RequestHandler 线程池</strong>：解耦网络 I/O 与业务逻辑。</li></ol><ul><li><strong>技术思考</strong>：这种设计实现了<strong>读写分离</strong>。即便某个请求因为磁盘压力变慢，Processor 线程依然可以继续接收其他连接的数据，不会导致整个系统的网络阻塞。</li></ul><h3 id="五、-批量化与压缩：压榨每一比特带宽"><a href="#五、-批量化与压缩：压榨每一比特带宽" class="headerlink" title="五、 批量化与压缩：压榨每一比特带宽"></a>五、 批量化与压缩：压榨每一比特带宽</h3><p>在高性能系统中，网络往返（RTT）和系统调用的开销往往比数据处理本身更贵。</p><ul><li><strong>批量（Batching）</strong>：Kafka 允许生产者将多条消息打包成一个 Batch 发送。对 Broker 来说，一次 I/O 操作写入的是一批消息，大大减少了系统调用次数。</li><li><strong>压缩（Compression）</strong>：Kafka 支持端到端的压缩（Producer 压缩 -&gt; Broker 存储 -&gt; Consumer 解压）。</li><li><strong>技术思考</strong>：在现代系统中，带宽往往比 CPU 更珍贵。通过在 Producer 端消耗少量 CPU 进行压缩，换取更小的网络延迟和存储空间，是一笔极其划算的买卖。</li></ul><hr><h3 id="总结：Kafka-给我们的架构启示"><a href="#总结：Kafka-给我们的架构启示" class="headerlink" title="总结：Kafka 给我们的架构启示"></a>总结：Kafka 给我们的架构启示</h3><p>Kafka 的成功并非源于它发明了什么深奥的算法，而在于它对<strong>操作系统基础原语</strong>的深刻理解：</p><ol><li><strong>顺应硬件</strong>：既然随机 I/O 慢，就只用顺序 I/O。</li><li><strong>相信系统</strong>：既然内核管缓存管得好，就不要在 JVM 里重复造轮子。</li><li><strong>减少损耗</strong>：既然搬运数据浪费 CPU，就用零拷贝绕过去。</li><li><strong>分而治之</strong>：既然单机有上限，就通过分区（Partitioning）实现横向扩展。</li></ol><p><strong>“快”的本质，其实是消除浪费。</strong> Kafka 的架构告诉我们：有时候，为了获得极致的性能，你不需要做得更多，而是要学会“少做”。</p></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者:</span> <span class="post-copyright-info"><a href="https://nmcb666.vip">纳斯卡可</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接:</span> <span class="post-copyright-info"><a href="https://nmcb666.vip/posts/4b1bdc5.html">https://nmcb666.vip/posts/4b1bdc5.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明:</span> <span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://nmcb666.vip" target="_blank">纳斯卡可`Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%85%AB%E8%82%A1/">八股</a></div><div class="post-share"><div class="social-share" data-image="https://java-ai-nskk.oss-cn-beijing.aliyuncs.com/myblog/666.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdmirror.com/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdmirror.com/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>赞赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://java-ai-nskk.oss-cn-beijing.aliyuncs.com/myblog/wechat.jpg" target="_blank"><img class="post-qr-code-img" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://java-ai-nskk.oss-cn-beijing.aliyuncs.com/myblog/wechat.jpg" alt="wechat"></a><div class="post-qr-code-desc">wechat</div></li></ul></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/posts/95975943.html" title="算法（十六） 区间DP"><div class="cover" style="background:var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">算法（十六） 区间DP</div></div><div class="info-2"><div class="info-item-1">区间DP让字符串成为回文串的最少插入次数leetcode 1312 思路： 跟求最长回文子序列一样。dp[i][j] 表示 让s[i:j] 变成回文串的最少插入数。 如果 s[i] == s[j]，则 dp[i][j] = dp[i + 1][j - 1] 否则 dp[i][j] = min(dp[i + 1][j], dp[i][j - 1]) + 1。 边界值dp[i][i] = 0 以及 dp[i][i + 1] = 1 if s[i] != s[i + 1] else 0 。最后还可以空间压缩，一个格子依赖它的左下，下面，左边3个格子。顺序为从下到上，从左到右。用leftDown记录左下的值即可。 123456789101112131415161718192021222324public int minInsertions(String s1) &#123; char[] s = s1.toCharArray(); int n = s1.length(); if(n==1)&#123; return 0; ...</div></div></div></a><a class="pagination-related" href="/posts/9edb0695.html" title="Java中的NIO就是操作系统的同步非阻塞IO吗？"><div class="cover" style="background:var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">Java中的NIO就是操作系统的同步非阻塞IO吗？</div></div><div class="info-2"><div class="info-item-1">Java NIO：不仅仅是“非阻塞”，更是 IO 模型的“Pro Max”在 Java 后端面试或高并发系统设计的讨论中，NIO (New I/O) 永远是一个绕不开的话题。 很多同学在初学时，往往会被教科书上的定义绕晕： “NIO 是同步非阻塞的。” “NIO 有三大组件：Channel、Buffer、Selector。” “NIO 性能比 BIO 好。” 但如果继续追问：“为什么非阻塞就快？Selector 到底是个什么东西？它和操作系统的 epoll 有什么关系？”很多人可能就卡壳了。 今天我们就从操作系统的底层模型出发，来聊聊 Java NIO 的前世今生，以及为什么我说它是 IO 模型的“Pro Max”版。 1. 痛点：BIO 时代的“贵族服务”在 JDK 1.4 之前，我们使用的是 BIO（Blocking I/O，阻塞 IO）。BIO 的编程模型非常简单符合直觉：建立连接 -&gt; 读数据 -&gt; 写数据。 但是它有一个致命的弱点：阻塞。就像一个传统的餐厅，每一桌客人（Socket 连接）必须配备一名专属服务员（Thread）。 客人看菜单（数据未就绪...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/posts/9edb0695.html" title="Java中的NIO就是操作系统的同步非阻塞IO吗？"><div class="cover" style="background:var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-02-07</div><div class="info-item-2">Java中的NIO就是操作系统的同步非阻塞IO吗？</div></div><div class="info-2"><div class="info-item-1">Java NIO：不仅仅是“非阻塞”，更是 IO 模型的“Pro Max”在 Java 后端面试或高并发系统设计的讨论中，NIO (New I/O) 永远是一个绕不开的话题。 很多同学在初学时，往往会被教科书上的定义绕晕： “NIO 是同步非阻塞的。” “NIO 有三大组件：Channel、Buffer、Selector。” “NIO 性能比 BIO 好。” 但如果继续追问：“为什么非阻塞就快？Selector 到底是个什么东西？它和操作系统的 epoll 有什么关系？”很多人可能就卡壳了。 今天我们就从操作系统的底层模型出发，来聊聊 Java NIO 的前世今生，以及为什么我说它是 IO 模型的“Pro Max”版。 1. 痛点：BIO 时代的“贵族服务”在 JDK 1.4 之前，我们使用的是 BIO（Blocking I/O，阻塞 IO）。BIO 的编程模型非常简单符合直觉：建立连接 -&gt; 读数据 -&gt; 写数据。 但是它有一个致命的弱点：阻塞。就像一个传统的餐厅，每一桌客人（Socket 连接）必须配备一名专属服务员（Thread）。 客人看菜单（数据未就绪...</div></div></div></a><a class="pagination-related" href="/posts/10b4eaf1.html" title="Kafka的多副本同步机制"><div class="cover" style="background:var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-02-16</div><div class="info-item-2">Kafka的多副本同步机制</div></div><div class="info-2"><div class="info-item-1">深度解析 Kafka 多副本同步机制：从 HW 到 Leader Epoch在分布式系统中，数据的一致性和高可用性永远是核心课题。Kafka 作为顶级消息流平台，其高可靠性主要依赖于多副本（Replication）机制。本文将带你深入底层，剖析 Kafka 副本之间是如何协同工作、确保数据不丢不重的。 一、 核心角色与概念在深入同步流程之前，我们先统一几个关键术语： Leader 副本：每个分区（Partition）在创建时，由 Controller 负责指派 Leader。Controller 会从 AR（Assigned Replicas，所有副本） 列表中找到第一个在 ISR 中的副本作为优先 Leader。所有的读写请求都由 Leader 处理。 Follower 副本：不处理客户端请求，只负责从 Leader 拉取（Pull）数据。 ISR (In-Sync Replicas)：与 Leader 保持同步的副本集合。判断标准是 replica.lag.time.max.ms（默认 30s），只要 Follower 在这个时间内向 Leader 发起过同步请求且进度没...</div></div></div></a><a class="pagination-related" href="/posts/fee9ca7b.html" title="分布式事务相关的总结"><div class="cover" style="background:var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-01-15</div><div class="info-item-2">分布式事务相关的总结</div></div><div class="info-2"><div class="info-item-1">分布式事务TC 如何知道哪些RM属于同一个全局事务？以Seate框架为例，在TM向TC发送全局事务开始时，TC会生成对应的全局事务ID（XID），并发送给TM。TM 将 XID 放入当前线程的 ThreadLocal 中，后续的 RM (资源管理器) 分支事务通过解析该 XID 来注册分支。如果涉及RPC调用，每次调用时会在请求头部传递这个XID，让RM知道这个XID,RM向TC发送分支事务开始时,就会携带这个XID,从而告诉TC这个RM属于哪一个全局事务。 在多线程中，由于每个线程的XID是线程私有的，所以无法确定哪些RM属于同一个全局事务。这时全局事务会失效。解决方案可以是在开启新线程时，将XID传递给新线程，新线程的XID会继承父线程的XID。这样子线程的XID就会和父线程的XID一致，从而可以确定哪些RM属于同一个全局事务。 流程图片</div></div></div></a><a class="pagination-related" href="/posts/a3a5550f.html" title="计算机网络问题总结"><div class="cover" style="background:var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-01-08</div><div class="info-item-2">计算机网络问题总结</div></div><div class="info-2"><div class="info-item-1">学习过程中的疑惑通过ARP协议我们可以知道目的ip的mac地址 那要是这个ip不在我的局域网里面 那我应该得到谁的mac地址呢这是一个非常经典且关键的网络问题。 简单直接的回答是：你会得到你所在局域网的“网关”（Gateway）的 MAC 地址。 详细原理解析当你的电脑（主机 A）想要发送数据包给一个 IP 地址（主机 B）时，它会经历以下逻辑判断流程： 判断目标 IP 是否在同一个局域网（子网）内： 电脑会查看自己的子网掩码（Subnet Mask）。 如果 目标IP 和 本机IP 在同一个网段内，电脑认为它可以直接通信。 如果不在同一个网段内，电脑认为“我够不着它”，必须找一个“中介”来帮忙转发。 寻找“中介”（网关）： 这个“中介”就是你配置的默认网关（Default Gateway）。通常这是你路由器（Router）的内网 IP 地址（例如 192.168.1.1 或 192.168.0.1）。 电脑会把数据包发给网关，由网关负责把数据包投递到外网。 ARP 解析的对象发生变化： 既然数据包要发给网关，那么在数据链路层（二层），目标 MAC 地址就必须是...</div></div></div></a><a class="pagination-related" href="/posts/6079905e.html" title="AQS是什么？"><div class="cover" style="background:var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-01-31</div><div class="info-item-2">AQS是什么？</div></div><div class="info-2"><div class="info-item-1">【Java并发】AQS详解：JUC包背后的“幕后大佬”在 Java 并发编程（JUC）的世界里，我们经常使用 ReentrantLock、CountDownLatch、Semaphore 这些赫赫有名的工具类。 但你是否想过，这些功能各异的工具背后，其实共用着同一套“底盘”？ 这就是我们今天要聊的主角——AQS (AbstractQueuedSynchronizer，抽象队列同步器)。它是 JUC 包的心脏，掌握了它，你就掌握了 Java 并发的半壁江山。 一、 什么是 AQS？AQS 是一个用于构建锁和同步器的框架。 如果把 ReentrantLock、CountDownLatch 等比作是成品的汽车（跑车、卡车、公交车），那么 AQS 就是通用的汽车底盘和引擎。 AQS 负责脏活累活：它处理了线程的排队、阻塞、唤醒、线程安全等最复杂的底层逻辑。 同步器负责业务逻辑：具体的工具类只需要告诉 AQS，“什么时候算获取锁成功”，“资源一共有多少”，剩下的交给 AQS 即可。 简单来说，AQS 是一个“原材料”，我们可以根据它加工出各种各样的同步器。 二、 AQS 的核心架构AQ...</div></div></div></a></div></div><hr class="custom-hr"><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i> <span>评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://java-ai-nskk.oss-cn-beijing.aliyuncs.com/myblog/666.jpg" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info-name">纳斯卡可</div><div class="author-info-description">纳斯卡可的博客</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">47</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">12</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/rolay-nmcb"><i class="fab fa-github"></i><span>Follow Me<i class="faa-passing animated" style="padding-left:20px;display:inline-block;vertical-align:middle"><svg class="icon" style="height:28px;width:28px;fill:currentColor;position:relative;top:5px"><use xlink:href="#icon-car"></use></svg></i></span></a><div class="card-info-social-icons"><a class="social-icon faa-parent animated-hover" href="https://github.com/rolay-nmcb" target="_blank" title="Github"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-gitHub"></use></svg></a><a class="social-icon faa-parent animated-hover" href="https://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&amp;email=2843035026@qq.com" target="_blank" title="Email"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-youxiang"></use></svg></a><a class="social-icon faa-parent animated-hover" href="/atom.xml" target="_blank" title="RSS"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-rss"></use></svg></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/1949615496" target="_blank" title="BiliBili"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-bilibili1"></use></svg></a><a class="social-icon faa-parent animated-hover" href="tencent://Message/?Uin=2843035026&amp;amp;websiteName=local.edu.com:8888=&amp;amp;Menu=yes" target="_blank" title="QQ"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-QQ1"></use></svg></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">我的博客上线了🎉🎉🎉</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%B7%B1%E5%BA%A6%E8%A7%A3%E6%9E%90%EF%BC%9A%E4%B8%BA%E4%BB%80%E4%B9%88-Kafka-%E8%83%BD%E5%BF%AB%E5%88%B0%E2%80%9C%E7%AA%81%E7%A0%B4%E5%A4%A9%E9%99%85%E2%80%9D%EF%BC%9F%E2%80%94%E2%80%94-%E8%AE%BA-Kafka-%E7%9A%84%E6%9C%BA%E6%A2%B0%E5%85%B1%E9%B8%A3%E8%AE%BE%E8%AE%A1"><span class="toc-number">1.</span> <span class="toc-text">深度解析：为什么 Kafka 能快到“突破天际”？—— 论 Kafka 的机械共鸣设计</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81-%E9%A2%A0%E8%A6%86%E8%AE%A4%E7%9F%A5%EF%BC%9A%E7%A3%81%E7%9B%98%E5%B9%B6%E4%B8%8D%E6%85%A2%EF%BC%8C%E9%9A%8F%E6%9C%BA%E8%AF%BB%E5%86%99%E6%89%8D%E6%85%A2"><span class="toc-number">1.0.1.</span> <span class="toc-text">一、 颠覆认知：磁盘并不慢，随机读写才慢</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81-%E9%9B%B6%E6%8B%B7%E8%B4%9D%EF%BC%88Zero-Copy%EF%BC%89%EF%BC%9A%E5%87%8F%E5%B0%91-CPU-%E7%9A%84%E2%80%9C%E6%90%AC%E8%BF%90%E5%B7%A5%E2%80%9D%E5%B7%A5%E4%BD%9C"><span class="toc-number">1.0.2.</span> <span class="toc-text">二、 零拷贝（Zero-Copy）：减少 CPU 的“搬运工”工作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E3%80%81-%E9%A1%B5%E7%BC%93%E5%AD%98%EF%BC%88Page-Cache%EF%BC%89-vs-JVM-%E7%BC%93%E5%AD%98"><span class="toc-number">1.0.3.</span> <span class="toc-text">三、 页缓存（Page Cache） vs JVM 缓存</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B%E3%80%81-%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1%E7%9A%84%E8%89%BA%E6%9C%AF%EF%BC%9A%E5%A4%9A%E7%BA%A7-Reactor-%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.0.4.</span> <span class="toc-text">四、 网络通信的艺术：多级 Reactor 模型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%94%E3%80%81-%E6%89%B9%E9%87%8F%E5%8C%96%E4%B8%8E%E5%8E%8B%E7%BC%A9%EF%BC%9A%E5%8E%8B%E6%A6%A8%E6%AF%8F%E4%B8%80%E6%AF%94%E7%89%B9%E5%B8%A6%E5%AE%BD"><span class="toc-number">1.0.5.</span> <span class="toc-text">五、 批量化与压缩：压榨每一比特带宽</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93%EF%BC%9AKafka-%E7%BB%99%E6%88%91%E4%BB%AC%E7%9A%84%E6%9E%B6%E6%9E%84%E5%90%AF%E7%A4%BA"><span class="toc-number">1.0.6.</span> <span class="toc-text">总结：Kafka 给我们的架构启示</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/10b4eaf1.html" title="Kafka的多副本同步机制">Kafka的多副本同步机制</a><time datetime="2026-02-16T17:22:19.000Z" title="发表于 2026-02-16 17:22:19">2026-02-16</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/ae7d08b8.html" title="在DDD下怎么高效实现一人一单+库存超卖">在DDD下怎么高效实现一人一单+库存超卖</a><time datetime="2026-02-11T14:22:55.000Z" title="发表于 2026-02-11 14:22:55">2026-02-11</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/95975943.html" title="算法（十六） 区间DP">算法（十六） 区间DP</a><time datetime="2026-02-07T13:37:09.000Z" title="发表于 2026-02-07 13:37:09">2026-02-07</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/4b1bdc5.html" title="Kafka为什么这么快">Kafka为什么这么快</a><time datetime="2026-02-07T13:32:58.000Z" title="发表于 2026-02-07 13:32:58">2026-02-07</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/9edb0695.html" title="Java中的NIO就是操作系统的同步非阻塞IO吗？">Java中的NIO就是操作系统的同步非阻塞IO吗？</a><time datetime="2026-02-07T02:26:33.000Z" title="发表于 2026-02-07 02:26:33">2026-02-07</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 - 2026 By 纳斯卡可</span><span class="framework-info"><span>框架</span> <a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题</span> <a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.0</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdmirror.com/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = null

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo.nmcb666.vip/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const init = (el = document, path = location.pathname) => {
    twikoo.init({
      el: el.querySelector('#twikoo-wrap'),
      envId: 'https://twikoo.nmcb666.vip/',
      region: '',
      onCommentLoaded: () => {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      },
      ...option,
      path: isShuoshuo ? path : (option && option.path) || path
    })

    

    isShuoshuo && (window.shuoshuoComment.destroyTwikoo = () => {
      if (el.children.length) {
        el.innerHTML = ''
        el.classList.add('no-comment')
      }
    })
  }

  const loadTwikoo = (el, path) => {
    if (typeof twikoo === 'object') setTimeout(() => init(el, path), 0)
    else btf.getScript('https://cdn.jsdmirror.com/npm/twikoo/dist/twikoo.all.min.js').then(() => init(el, path))
  }

  if (isShuoshuo) {
    'Twikoo' === 'Twikoo'
      ? window.shuoshuoComment = { loadComment: loadTwikoo }
      : window.loadOtherComment = loadTwikoo
    return
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script></div><div class="aplayer no-destroy" data-id="2827597264" data-server="netease" data-type="playlist" data-order="list" data-fixed="true" data-preload="auto" data-autoplay="false" data-mutex="true"></div><script defer src="/js/cursor.js"></script><canvas id="universe"></canvas><script src="/bilibiliBanner/banner.js" defer></script><script defer src="/js/universe.js"></script><link rel="stylesheet" href="https://cdn.jsdmirror.com/npm/aplayer/dist/APlayer.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdmirror.com/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdmirror.com/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><div class="app-refresh" id="app-refresh" style="position:fixed;top:-2.2rem;left:0;right:0;z-index:99999;padding:0 1rem;font-size:15px;height:2.2rem;transition:all .3s ease"><div class="app-refresh-wrap" style="display:flex;color:#fff;height:100%;align-items:center;justify-content:center"><label>✨ 有新文章啦！ 👉</label><a href="javascript:void(0)" onclick="location.reload()"><span style="color:#fff;text-decoration:underline;cursor:pointer">🍗点击食用🍔</span></a></div></div><script>if ('serviceWorker' in navigator) {
if (navigator.serviceWorker.controller) {
navigator.serviceWorker.addEventListener('controllerchange', function() {
showNotification()
})
}
window.addEventListener('load', function() {
navigator.serviceWorker.register('/sw.js')
})
}
function showNotification() {
if (GLOBAL_CONFIG.Snackbar) {
var snackbarBg =
document.documentElement.getAttribute('data-theme') === 'light' ?
GLOBAL_CONFIG.Snackbar.bgLight :
GLOBAL_CONFIG.Snackbar.bgDark
var snackbarPos = GLOBAL_CONFIG.Snackbar.position
Snackbar.show({
text: '✨ 有新文章啦！ 👉',
backgroundColor: snackbarBg,
duration: 500000,
pos: snackbarPos,
actionText: '🍗点击食用🍔',
actionTextColor: '#fff',
onActionClick: function(e) {
location.reload()
},
})
} else {
var showBg =
document.documentElement.getAttribute('data-theme') === 'light' ?
'#3b70fc' :
'#1f1f1f'
var cssText = `top: 0; background: ${showBg};`
document.getElementById('app-refresh').style.cssText = cssText
}
}</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i> <span>数据加载中</span></div><div class="local-search-input"><input placeholder="搜索文章" type="text"></div><hr><div id="local-search-results"></div><div class="ais-Pagination" id="local-search-pagination" style="display:none"><ul class="ais-Pagination-list"></ul></div><div id="local-search-stats"></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div><script data-pjax>function butterfly_clock_anzhiyu_injector_config(){var a=document.getElementsByClassName("sticky_layout")[0];console.log("已挂载butterfly_clock_anzhiyu-yang修复版"),a&&a.insertAdjacentHTML("afterbegin",'<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img class="entered loading" id="card-clock-loading" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading"/></div></div></div></div></div>')}for(var elist="null".split(","),cpage=location.pathname,epage="all",qweather_key="b16a1fa0e63c46a4b8f28abfb06ae3fe",gaud_map_key="f54ba5c7880f35d1311b742bbbd52988",baidu_ak_key="undefined",flag=0,clock_rectangle="112.982279,28.19409",clock_default_rectangle_enable="false",i=0;i<elist.length;i++)cpage.includes(elist[i])&&flag++;"all"===epage&&0==flag?butterfly_clock_anzhiyu_injector_config():epage===cpage&&butterfly_clock_anzhiyu_injector_config()</script><script data-pjax src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.js"></script><script data-pjax>function butterfly_footer_beautify_injector_config(){var A=document.getElementById("footer");console.log("已挂载butterfly_footer_beautify"),A.insertAdjacentHTML("beforeend",'<div id="workboard"></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v5.4.0" title=""><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" data-title="主题版本Butterfly_v4.2.2" title=""><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender" alt=""/></a><a class="github-badge" target="_blank" href="https://cdn.jsdmirror.com/" style="margin-inline:5px" data-title="本站使用jsdmirror为静态资源提供CDN加速" title=""><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/CDN-jsDelivr-orange?style=flat&amp;logo=jsdmirror" alt=""/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="本站项目由Github托管" title=""><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&amp;logo=GitHub" alt=""/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title=""><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&amp;logo=Claris" alt=""/></a></p>')}for(var elist="null".split(","),cpage=location.pathname,epage="all",flag=0,i=0;i<elist.length;i++)cpage.includes(elist[i])&&flag++;"all"===epage&&0==flag?butterfly_footer_beautify_injector_config():epage===cpage&&butterfly_footer_beautify_injector_config()</script><script async src="/js/runtime.js"></script><script async src="/js/ali_font.js"></script><div class="js-pjax"><script async>for(var arr=document.getElementsByClassName("recent-post-item"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__zoomIn"),arr[i].setAttribute("data-wow-duration","1.5s"),arr[i].setAttribute("data-wow-delay","200ms"),arr[i].setAttribute("data-wow-offset","30"),arr[i].setAttribute("data-wow-iteration","1")</script><script async>for(var arr=document.getElementsByClassName("card-widget"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__zoomIn"),arr[i].setAttribute("data-wow-duration",""),arr[i].setAttribute("data-wow-delay","200ms"),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script><script async>for(var arr=document.getElementsByClassName("flink-list-card"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__flipInY"),arr[i].setAttribute("data-wow-duration","3s"),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script><script async>for(var arr=document.getElementsByClassName("flink-list-card"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__animated"),arr[i].setAttribute("data-wow-duration","3s"),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script><script async>for(var arr=document.getElementsByClassName("article-sort-item"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__slideInRight"),arr[i].setAttribute("data-wow-duration","1.5s"),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script><script async>for(var arr=document.getElementsByClassName("site-card"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__flipInY"),arr[i].setAttribute("data-wow-duration","3s"),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script><script async>for(var arr=document.getElementsByClassName("site-card"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__animated"),arr[i].setAttribute("data-wow-duration","3s"),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script></div><script defer src="https://cdn.cbd.int/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://cdn.cbd.int/hexo-butterfly-wowjs/lib/wow_init.js"></script><script data-pjax src="https://unpkg.com/oh-my-live2d"></script><script>const oml2d = OML2D.loadOml2d({dockedPosition:"right",mobileDisplay:true,models:[{"path":"https://cdn.jsdmirror.com/gh/rolay-nmcb/my-live2d/LSS.model3.json","mobilePosition":[20,0],"mobileScale":0.15,"mobileStageStyle":{"width":130,"height":130},"motionPreloadStrategy":"IDLE","position":[15,0],"scale":0.25,"stageStyle":{"width":250,"height":250}},{"path":"https://cdn.jsdmirror.com/gh/rolay-nmcb/my-live2d@main/boqi/yili.model3.json","mobilePosition":[-20,5],"mobileScale":0.1,"mobileStageStyle":{"width":130,"height":130},"motionPreloadStrategy":"IDLE","position":[-50,0],"scale":0.2,"stageStyle":{"width":250,"height":250}},{"path":"https://cdn.jsdmirror.com/gh/rolay-nmcb/my-live2d@main/congyu/Murasame.model3.json","mobilePosition":[10,0],"mobileScale":0.1,"mobileStageStyle":{"width":130,"height":130},"motionPreloadStrategy":"IDLE","position":[20,40],"scale":0.15,"stageStyle":{"width":250,"height":300}},{"path":"https://cdn.jsdmirror.com/gh/rolay-nmcb/my-live2d@main/Motis/Motis.model3.json","mobilePosition":[-20,-15],"mobileScale":0.1,"mobileStageStyle":{"width":130,"height":165},"motionPreloadStrategy":"IDLE","position":[-25,-20],"scale":0.15,"stageStyle":{"width":250,"height":250}}],parentElement:document.body,primaryColor:"var(--btn-bg)",sayHello:false,tips:{style: {"width":180,"height":100,"left":"calc(50% - 20px)","top":"-100px"},mobileStyle: {"width":150,"height":70,"left":"calc(50% - 30px)","top":"-80px"},copyTips: {"message":["复制记得注明出处哦~"]},idleTips:{interval:60000,message:["你好呀~","欢迎来到我的小站~"]}}});</script></body></html>