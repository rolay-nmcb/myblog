<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>Java中的NIO就是操作系统的同步非阻塞IO吗？ | 纳斯卡可`Blog</title><meta name="author" content="纳斯卡可,2843035026@qq.com"><meta name="copyright" content="纳斯卡可"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Java NIO：不仅仅是“非阻塞”，更是 IO 模型的“Pro Max”在 Java 后端面试或高并发系统设计的讨论中，NIO (New I&#x2F;O) 永远是一个绕不开的话题。 很多同学在初学时，往往会被教科书上的定义绕晕：  “NIO 是同步非阻塞的。” “NIO 有三大组件：Channel、Buffer、Selector。” “NIO 性能比 BIO 好。”  但如果继续追问：“为什么非阻塞就快"><meta property="og:type" content="article"><meta property="og:title" content="Java中的NIO就是操作系统的同步非阻塞IO吗？"><meta property="og:url" content="https://nmcb666.vip/posts/9edb0695.html"><meta property="og:site_name" content="纳斯卡可&#96;Blog"><meta property="og:description" content="Java NIO：不仅仅是“非阻塞”，更是 IO 模型的“Pro Max”在 Java 后端面试或高并发系统设计的讨论中，NIO (New I&#x2F;O) 永远是一个绕不开的话题。 很多同学在初学时，往往会被教科书上的定义绕晕：  “NIO 是同步非阻塞的。” “NIO 有三大组件：Channel、Buffer、Selector。” “NIO 性能比 BIO 好。”  但如果继续追问：“为什么非阻塞就快"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://java-ai-nskk.oss-cn-beijing.aliyuncs.com/myblog/666.jpg"><meta property="article:published_time" content="2026-02-07T02:26:33.000Z"><meta property="article:modified_time" content="2026-02-22T12:13:28.638Z"><meta property="article:author" content="纳斯卡可"><meta property="article:tag" content="八股"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://java-ai-nskk.oss-cn-beijing.aliyuncs.com/myblog/666.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Java中的NIO就是操作系统的同步非阻塞IO吗？",
  "url": "https://nmcb666.vip/posts/9edb0695.html",
  "image": "https://java-ai-nskk.oss-cn-beijing.aliyuncs.com/myblog/666.jpg",
  "datePublished": "2026-02-07T02:26:33.000Z",
  "dateModified": "2026-02-22T12:13:28.638Z",
  "author": [
    {
      "@type": "Person",
      "name": "纳斯卡可",
      "url": "https://nmcb666.vip"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://nmcb666.vip/posts/9edb0695.html"><link rel="preconnect" href="//cdn.jsdmirror.com"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="manifest" href="/manifest.json"><meta name="msapplication-TileColor" content="#13227a"><link rel="apple-touch-icon" sizes="180x180" href="/img/siteicon/128.png"><link rel="icon" type="image/png" sizes="32x32" href="/img/siteicon/32.png"><link rel="icon" type="image/png" sizes="16x16" href="/img/siteicon/16.png"><link rel="mask-icon" href="/img/siteicon/128.png" color="#5bbad5"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdmirror.com/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>(() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"pagination":{"enable":false,"hitsPerPage":8},"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdmirror.com/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"Java中的NIO就是操作系统的同步非阻塞IO吗？",isHighlightShrink:!1,isToc:!0,pageType:"post"}</script><link rel="stylesheet" href="/css/custom.css" media="defer" onload='this.media="all"'><script defer src="/js/title.js"></script><link rel="stylesheet" href="/css/universe.css"><link rel="stylesheet" href="/bilibiliBanner/banner.css"><link rel="stylesheet" href="https://cdn.jsdmirror.com/gh/l-lin/font-awesome-animation/dist/font-awesome-animation.min.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.css"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-blog@2.0.4/css/runtime/runtime.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload='this.media="all"'><script src="https://cdn.cbd.int/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload='this.media="screen"'><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="纳斯卡可`Blog" type="application/atom+xml"></head><body><div id="web_bg" style="background-image:url(https://java-ai-nskk.oss-cn-beijing.aliyuncs.com/myblog/default_cover_14.webp)"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://java-ai-nskk.oss-cn-beijing.aliyuncs.com/myblog/666.jpg" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">48</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">12</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><i class="fa-fw icon-home"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-home"></use></svg> <span>Home</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/archives/"><i class="fa-fw icon-archive"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-archive"></use></svg> <span>归档</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/tags/"><i class="fa-fw icon-tags"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-tags"></use></svg> <span>标签</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/bangumis/index.html"><i class="fa-fw icon-bilibili"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-bilibili"></use></svg> <span>追番</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/comments/"><i class="fa-fw icon-xinfeng"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-xinfeng"></use></svg> <span>留言板</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/links/"><i class="fa-fw icon-lianjie"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-lianjie"></use></svg> <span>友链</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/about/"><i class="fa-fw icon-zhifeiji"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-zhifeiji"></use></svg> <span>关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">纳斯卡可`Blog</span></a><a class="nav-page-title" href="/"><span class="site-name">Java中的NIO就是操作系统的同步非阻塞IO吗？</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i> <span>返回首页</span></span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i> <span>搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><i class="fa-fw icon-home"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-home"></use></svg> <span>Home</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/archives/"><i class="fa-fw icon-archive"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-archive"></use></svg> <span>归档</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/tags/"><i class="fa-fw icon-tags"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-tags"></use></svg> <span>标签</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/bangumis/index.html"><i class="fa-fw icon-bilibili"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-bilibili"></use></svg> <span>追番</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/comments/"><i class="fa-fw icon-xinfeng"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-xinfeng"></use></svg> <span>留言板</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/links/"><i class="fa-fw icon-lianjie"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-lianjie"></use></svg> <span>友链</span></a></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/about/"><i class="fa-fw icon-zhifeiji"></i><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-zhifeiji"></use></svg> <span>关于</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Java中的NIO就是操作系统的同步非阻塞IO吗？</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2026-02-07T02:26:33.000Z" title="发表于 2026-02-07 02:26:33">2026-02-07</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2026-02-22T12:13:28.638Z" title="更新于 2026-02-22 12:13:28">2026-02-22</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="Java-NIO：不仅仅是“非阻塞”，更是-IO-模型的“Pro-Max”"><a href="#Java-NIO：不仅仅是“非阻塞”，更是-IO-模型的“Pro-Max”" class="headerlink" title="Java NIO：不仅仅是“非阻塞”，更是 IO 模型的“Pro Max”"></a>Java NIO：不仅仅是“非阻塞”，更是 IO 模型的“Pro Max”</h1><p>在 Java 后端面试或高并发系统设计的讨论中，<strong>NIO (New I/O)</strong> 永远是一个绕不开的话题。</p><p>很多同学在初学时，往往会被教科书上的定义绕晕：</p><ul><li>“NIO 是同步非阻塞的。”</li><li>“NIO 有三大组件：Channel、Buffer、Selector。”</li><li>“NIO 性能比 BIO 好。”</li></ul><p>但如果继续追问：“为什么非阻塞就快？Selector 到底是个什么东西？它和操作系统的 epoll 有什么关系？”很多人可能就卡壳了。</p><p>今天我们就从<strong>操作系统的底层模型</strong>出发，来聊聊 Java NIO 的前世今生，以及为什么我说它是 IO 模型的“Pro Max”版。</p><h2 id="1-痛点：BIO-时代的“贵族服务”"><a href="#1-痛点：BIO-时代的“贵族服务”" class="headerlink" title="1. 痛点：BIO 时代的“贵族服务”"></a>1. 痛点：BIO 时代的“贵族服务”</h2><p>在 JDK 1.4 之前，我们使用的是 BIO（Blocking I/O，阻塞 IO）。<br>BIO 的编程模型非常简单符合直觉：<strong>建立连接 -&gt; 读数据 -&gt; 写数据</strong>。</p><p>但是它有一个致命的弱点：<strong>阻塞</strong>。<br>就像一个传统的餐厅，<strong>每一桌客人（Socket 连接）必须配备一名专属服务员（Thread）</strong>。</p><ul><li>客人看菜单（数据未就绪），服务员就得傻站在旁边等着，什么都不能干。</li><li>客人吃饭（数据传输中），服务员还是得等着。</li></ul><p><strong>后果是显而易见的：</strong><br>如果餐厅来了 1 万桌客人，老板就需要雇佣 1 万个服务员。在计算机世界里，线程是昂贵的资源，内存占用高、上下文切换开销大。这种“一对一”的贵族服务模式，注定了 BIO 无法支撑高并发。</p><h2 id="2-误区：NIO-就是“非阻塞”吗？"><a href="#2-误区：NIO-就是“非阻塞”吗？" class="headerlink" title="2. 误区：NIO 就是“非阻塞”吗？"></a>2. 误区：NIO 就是“非阻塞”吗？</h2><p>为了解决阻塞问题，操作系统引入了 <strong>Non-blocking I/O（非阻塞 IO）</strong> 的概念。很多人认为 Java NIO 指的就是这个。</p><p><strong>并不完全是。</strong></p><p>如果仅仅把 Socket 设置为非阻塞（Non-blocking），模型是这样的：</p><ul><li>用户线程发起读取请求。</li><li>内核看了一眼：没数据。立刻返回一个错误（EWOULDBLOCK）。</li><li>用户线程不死心，过一会儿再来问，还没有，再返回错误。</li></ul><p>这在技术上叫<strong>“轮询”（Polling）</strong>。<br>这就好比服务员不傻站着了，他在餐厅里跑来跑去，不停地问每一桌：“你要点菜吗？你要点菜吗？”</p><p>虽然线程没被卡死，但 CPU 却在空转（Busy Waiting）。每一次询问都是一次用户态到内核态的切换，这种<strong>“用户态轮询”</strong>效率极低，甚至比 BIO 还糟糕。</p><h2 id="3-破局：IO-多路复用"><a href="#3-破局：IO-多路复用" class="headerlink" title="3. 破局：IO 多路复用"></a>3. 破局：IO 多路复用</h2><p>Java NIO 的真正威力，不仅仅在于“非阻塞”，而在于它引入了 <strong>Selector（选择器）</strong>。</p><p>Selector 的本质，是利用了操作系统的 <strong>I/O 多路复用（I/O Multiplexing）</strong> 技术。<br>这才是真正的 <strong>Pro Max</strong> 进化。</p><h3 id="什么是多路复用？"><a href="#什么是多路复用？" class="headerlink" title="什么是多路复用？"></a>什么是多路复用？</h3><p>复用，是指<strong>多个连接复用同一个线程</strong>。<br>在这个模型下，餐厅不再需要几千个服务员，也不需要一个服务员像没头苍蝇一样轮询。我们引入了一个<strong>“智能管家”（Selector）</strong>。</p><ol><li><strong>注册：</strong> 所有的桌子（Channel）都在管家那里登记：“我有事会按铃，没按铃别烦我。”</li><li><strong>监听：</strong> 管家在吧台坐着，只听铃声（事件）。</li><li><strong>处理：</strong> 只有当某一桌按铃了（数据就绪），管家才通知服务员过去处理。</li></ol><h3 id="这里的关键点在于：谁在轮询？"><a href="#这里的关键点在于：谁在轮询？" class="headerlink" title="这里的关键点在于：谁在轮询？"></a>这里的关键点在于：谁在轮询？</h3><ul><li><strong>普通非阻塞 IO：</strong> 是<strong>用户程序</strong>在轮询（低效）。</li><li><strong>IO 多路复用（Java NIO）：</strong> 是<strong>操作系统内核</strong>在帮你轮询（高效）。</li></ul><h2 id="4-底层黑科技：从-select-到-epoll"><a href="#4-底层黑科技：从-select-到-epoll" class="headerlink" title="4. 底层黑科技：从 select 到 epoll"></a>4. 底层黑科技：从 select 到 epoll</h2><p>Java NIO 的 Selector 只是一个 Java API，它的性能取决于底层的操作系统实现。</p><ul><li><strong>JDK 1.4 / 早期 Linux：</strong> 使用 <code>select</code> 或 <code>poll</code> 模型。<ul><li>这就像管家虽然不跑了，但他手里拿个长长的单子（1万个连接）。每次有人按铃，他都要从头到尾检查一遍单子：“是谁按的铃？”（时间复杂度 O(N)）。</li></ul></li><li><strong>JDK 1.5+ / 现代 Linux：</strong> 使用 <strong>epoll</strong> 模型。<ul><li>Epoll 是<strong>事件驱动</strong>的。它在内核里维护了一个“就绪列表”。</li><li>谁按铃，硬件中断直接把谁的名字扔进“就绪列表”。</li><li>管家只需要看一眼“就绪列表”里有没有人就行了，根本不需要遍历那 1 万个连接。（时间复杂度 O(1)）。</li></ul></li></ul><p><strong>所以，当我们说 Java NIO 高性能时，默认是在 Linux 环境下，因为其底层依托于 epoll 强大的事件驱动能力。</strong></p><h2 id="5-总结与思考"><a href="#5-总结与思考" class="headerlink" title="5. 总结与思考"></a>5. 总结与思考</h2><p>回答标题的问题：<br><strong>Java NIO 是什么？</strong><br>它是一套工具包，它引入了 Buffer（内存管理）、Channel（双向通道），但其灵魂是 <strong>Selector</strong>。</p><p><strong>它是 IO 多路复用吗？</strong><br>Java NIO 的 Selector 是 <strong>IO 多路复用</strong> 在 JVM 层面的封装。而在 Linux 上，它最终进化为 <strong>epoll</strong>，解决了传统轮询的性能瓶颈。</p><p><strong>技术思考图谱：</strong></p><ol><li><strong>BIO</strong> = 阻塞 + 多线程（资源耗尽）</li><li><strong>OS NIO</strong> = 非阻塞 + 用户态轮询（CPU 空转）</li><li><strong>Java NIO (Selector)</strong> = 非阻塞 + <strong>IO 多路复用</strong> (内核态轮询/事件驱动) = <strong>高并发的基石</strong></li></ol><p>理解了这一点，你再去看 Netty 这种框架，就会明白它为什么这么快：因为它不仅把 Java NIO 难用的 API 封装好了，还通过 Reactor 模型将这种“多路复用”的优势发挥到了极致。</p><h2 id="补充说明，操作系统的NIO跟多路复用的区别"><a href="#补充说明，操作系统的NIO跟多路复用的区别" class="headerlink" title="补充说明，操作系统的NIO跟多路复用的区别"></a>补充说明，操作系统的NIO跟多路复用的区别</h2><p>NIO就是用户进程轮询，多路复用是内核里面的选择器去轮询。这正是区分 <strong>“单纯的非阻塞 IO（OS NIO）”</strong> 和 <strong>“IO 多路复用”</strong> 最核心的界限：<strong>苦力活（轮询）到底是谁在干？</strong></p><h3 id="1-单纯的-OS-NIO-用户进程在轮询"><a href="#1-单纯的-OS-NIO-用户进程在轮询" class="headerlink" title="1. 单纯的 OS NIO = 用户进程在轮询"></a>1. 单纯的 OS NIO = 用户进程在轮询</h3><p><strong>“用户进程自己去轮询”</strong>。</p><ul><li><strong>场景：</strong> 你写了一个 <code>while(true)</code> 循环。</li><li><strong>动作：</strong> 你的代码里遍历 1000 个 Socket，挨个调用系统函数 <code>read()</code>。</li><li><strong>对话：</strong><ul><li>用户：“Socket A 有数据吗？” -&gt; 内核：“没。”（上下文切换 1 次）</li><li>用户：“Socket B 有数据吗？” -&gt; 内核：“没。”（上下文切换 1 次）</li><li>…</li><li>用户：“Socket Z 有数据吗？” -&gt; 内核：“没。”（上下文切换 1 次）</li></ul></li><li><strong>代价：</strong><ul><li><strong>CPU 瞎忙：</strong> 你的进程跑得飞快，CPU 占用率 100%，但全是空转。</li><li><strong>系统开销巨大：</strong> 每一次 <code>read()</code> 都是一次 <strong>用户态 &lt;-&gt; 内核态</strong> 的切换。1000 次循环就是 1000 次切换，这简直是性能杀手。</li></ul></li></ul><h3 id="2-IO-多路复用-内核在轮询-监控"><a href="#2-IO-多路复用-内核在轮询-监控" class="headerlink" title="2. IO 多路复用 = 内核在轮询/监控"></a>2. IO 多路复用 = 内核在轮询/监控</h3><p><strong>“内核里面的选择器去轮询”</strong>。</p><ul><li><strong>场景：</strong> 你把 1000 个 Socket 打包，调用一次 <code>select()</code> 或 <code>epoll_wait()</code>。</li><li><strong>动作：</strong> 你的进程此时<strong>休息了</strong>（阻塞在这一行），把监控的任务甩锅给内核。</li><li><strong>对话：</strong><ul><li>用户：“内核，这 1000 个兄弟你帮我盯着，谁有数据了叫醒我。” -&gt; <strong>（只有 1 次上下文切换）</strong></li><li>… （用户睡觉，内核在干活） …</li><li>内核：“醒醒！Socket C 和 Socket F 有数据了！” -&gt; <strong>（再切换 1 次回来）</strong></li></ul></li><li><strong>收益：</strong><ul><li><strong>用户态不忙了：</strong> 用户进程不需要写死循环，不需要做无意义的系统调用。</li><li><strong>切换次数极少：</strong> 从 N 次切换变成了 1 次切换。</li></ul></li></ul><hr><h3 id="还有一个深层次的细节（关于-epoll）"><a href="#还有一个深层次的细节（关于-epoll）" class="headerlink" title="还有一个深层次的细节（关于 epoll）"></a>还有一个深层次的细节（关于 epoll）</h3><p>“内核选择器去轮询”，这对于 <code>select</code> 和 <code>poll</code> 是完全正确的。</p><p>但对于 <strong>epoll</strong>，内核甚至<strong>都不用轮询</strong>，它更高级：</p><ul><li><strong>select/poll（内核轮询）：</strong> 内核在一个死循环里检查这 1000 个 Socket 的状态。（虽然比用户态轮询快，但内核也很累）。</li><li><strong>epoll（内核回调）：</strong> 内核根本不轮询。它在网卡驱动上注册了<strong>回调函数</strong>。<ul><li>网卡收到数据 -&gt; 触发硬件中断 -&gt; 触发回调 -&gt; <strong>直接把有数据的那个 Socket 扔进“就绪列表”</strong>。</li><li>内核只需要看一眼那个列表是不是空的就行了。</li></ul></li></ul><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><blockquote><p><strong>NIO（指 OS 原始非阻塞）是用户态自己在死循环检查；</strong><br><strong>多路复用是把这个检查的动作挪到了内核态（由 select 轮询或 epoll 事件驱动），从而解放了用户进程。</strong></p></blockquote><p>这也是为什么 Java NIO（使用多路复用）比单纯使用非阻塞 Socket 性能高出几个数量级的原因。</p><hr><blockquote><p><strong>写在最后</strong><br>技术名词层出不穷，但底层的原理往往是通用的。从 BIO 到 NIO 的演进，本质上是<strong>为了压榨 CPU 性能，减少无效等待和上下文切换</strong>。理解了“谁在等”和“谁在问”，就理解了高并发 IO 的核心。</p></blockquote></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者:</span> <span class="post-copyright-info"><a href="https://nmcb666.vip">纳斯卡可</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接:</span> <span class="post-copyright-info"><a href="https://nmcb666.vip/posts/9edb0695.html">https://nmcb666.vip/posts/9edb0695.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明:</span> <span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://nmcb666.vip" target="_blank">纳斯卡可`Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%85%AB%E8%82%A1/">八股</a></div><div class="post-share"><div class="social-share" data-image="https://java-ai-nskk.oss-cn-beijing.aliyuncs.com/myblog/666.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdmirror.com/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdmirror.com/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>赞赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://java-ai-nskk.oss-cn-beijing.aliyuncs.com/myblog/wechat.jpg" target="_blank"><img class="post-qr-code-img" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://java-ai-nskk.oss-cn-beijing.aliyuncs.com/myblog/wechat.jpg" alt="wechat"></a><div class="post-qr-code-desc">wechat</div></li></ul></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/posts/4b1bdc5.html" title="Kafka为什么这么快"><div class="cover" style="background:var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">Kafka为什么这么快</div></div><div class="info-2"><div class="info-item-1">深度解析：为什么 Kafka 能快到“突破天际”？—— 论 Kafka 的机械共鸣设计在分布式系统领域，Apache Kafka 几乎是高性能消息队列的代名词。令人惊叹的是，作为一个基于磁盘存储的系统，Kafka 的吞吐量竟然能超越许多基于内存的数据库。 很多人将其归结为“快”，但这种快并不是某种单一的黑科技，而是一场对硬件特性的极致压榨。这种设计思想在计算机科学中被称为 “机械共鸣” —— 即了解底层硬件的工作原理，并让软件设计顺应这些原理。 本文将从五个核心维度，拆解 Kafka 性能神话背后的技术思考。 一、 颠覆认知：磁盘并不慢，随机读写才慢很多人对 Kafka 的第一个疑问是：“数据存磁盘上，怎么可能快？” 事实上，磁盘的顺序写（Sequential Writing）性能极高。在某些场景下，磁盘顺序写的速度甚至可以媲美随机内存读写。 Kafka 的做法：Kafka 将所有消息以 Append-only（仅追加） 的方式写入日志文件（Log）。它不执行任何随机位置的更新，也不删除单条数据。 技术思考：通过将“逻辑上的随机写”转换为“物理上的顺序写”，Kafka 绕过了...</div></div></div></a><a class="pagination-related" href="/posts/2707a2f4.html" title="算法（十五） 背包dp"><div class="cover" style="background:var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">算法（十五） 背包dp</div></div><div class="info-2"><div class="info-item-1">01背包问题基础背包1234567int[] dp = new int[weight+1];for(int i=1;i&lt;=n;i++)&#123; for(int j=weight;j&gt;=nums[i-1];j--)&#123; dp[j] = Math.max(dp[j-nums[i-1]]+nums[i-1],dp[j]); &#125;&#125;return dp[weight]; 目标和leetcode 494 思路：见代码注释 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657// 新思路，转化为01背包问题 // 思考1: // 虽然题目说nums是非负数组，但即使nums中有负数比如[3,-4,2] // 因为能在每个数前面用+或者-号 // 所以[3,-4,2]其实和[3,4,2]会达成一样的结果 // 所以即使nums中有负数，也可以把负数直接变成正数，也不会影响结...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/posts/6079905e.html" title="AQS是什么？"><div class="cover" style="background:var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-01-31</div><div class="info-item-2">AQS是什么？</div></div><div class="info-2"><div class="info-item-1">【Java并发】AQS详解：JUC包背后的“幕后大佬”在 Java 并发编程（JUC）的世界里，我们经常使用 ReentrantLock、CountDownLatch、Semaphore 这些赫赫有名的工具类。 但你是否想过，这些功能各异的工具背后，其实共用着同一套“底盘”？ 这就是我们今天要聊的主角——AQS (AbstractQueuedSynchronizer，抽象队列同步器)。它是 JUC 包的心脏，掌握了它，你就掌握了 Java 并发的半壁江山。 一、 什么是 AQS？AQS 是一个用于构建锁和同步器的框架。 如果把 ReentrantLock、CountDownLatch 等比作是成品的汽车（跑车、卡车、公交车），那么 AQS 就是通用的汽车底盘和引擎。 AQS 负责脏活累活：它处理了线程的排队、阻塞、唤醒、线程安全等最复杂的底层逻辑。 同步器负责业务逻辑：具体的工具类只需要告诉 AQS，“什么时候算获取锁成功”，“资源一共有多少”，剩下的交给 AQS 即可。 简单来说，AQS 是一个“原材料”，我们可以根据它加工出各种各样的同步器。 二、 AQS 的核心架构AQ...</div></div></div></a><a class="pagination-related" href="/posts/4b1bdc5.html" title="Kafka为什么这么快"><div class="cover" style="background:var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-02-07</div><div class="info-item-2">Kafka为什么这么快</div></div><div class="info-2"><div class="info-item-1">深度解析：为什么 Kafka 能快到“突破天际”？—— 论 Kafka 的机械共鸣设计在分布式系统领域，Apache Kafka 几乎是高性能消息队列的代名词。令人惊叹的是，作为一个基于磁盘存储的系统，Kafka 的吞吐量竟然能超越许多基于内存的数据库。 很多人将其归结为“快”，但这种快并不是某种单一的黑科技，而是一场对硬件特性的极致压榨。这种设计思想在计算机科学中被称为 “机械共鸣” —— 即了解底层硬件的工作原理，并让软件设计顺应这些原理。 本文将从五个核心维度，拆解 Kafka 性能神话背后的技术思考。 一、 颠覆认知：磁盘并不慢，随机读写才慢很多人对 Kafka 的第一个疑问是：“数据存磁盘上，怎么可能快？” 事实上，磁盘的顺序写（Sequential Writing）性能极高。在某些场景下，磁盘顺序写的速度甚至可以媲美随机内存读写。 Kafka 的做法：Kafka 将所有消息以 Append-only（仅追加） 的方式写入日志文件（Log）。它不执行任何随机位置的更新，也不删除单条数据。 技术思考：通过将“逻辑上的随机写”转换为“物理上的顺序写”，Kafka 绕过了...</div></div></div></a><a class="pagination-related" href="/posts/10b4eaf1.html" title="Kafka的多副本同步机制"><div class="cover" style="background:var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-02-16</div><div class="info-item-2">Kafka的多副本同步机制</div></div><div class="info-2"><div class="info-item-1">深度解析 Kafka 多副本同步机制：从 HW 到 Leader Epoch在分布式系统中，数据的一致性和高可用性永远是核心课题。Kafka 作为顶级消息流平台，其高可靠性主要依赖于多副本（Replication）机制。本文将带你深入底层，剖析 Kafka 副本之间是如何协同工作、确保数据不丢不重的。 一、 核心角色与概念在深入同步流程之前，我们先统一几个关键术语： Leader 副本：每个分区（Partition）在创建时，由 Controller 负责指派 Leader。Controller 会从 AR（Assigned Replicas，所有副本） 列表中找到第一个在 ISR 中的副本作为优先 Leader。所有的读写请求都由 Leader 处理。 Follower 副本：不处理客户端请求，只负责从 Leader 拉取（Pull）数据。 ISR (In-Sync Replicas)：与 Leader 保持同步的副本集合。判断标准是 replica.lag.time.max.ms（默认 30s），只要 Follower 在这个时间内向 Leader 发起过同步请求且进度没...</div></div></div></a><a class="pagination-related" href="/posts/fee9ca7b.html" title="分布式事务相关的总结"><div class="cover" style="background:var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-01-15</div><div class="info-item-2">分布式事务相关的总结</div></div><div class="info-2"><div class="info-item-1">分布式事务TC 如何知道哪些RM属于同一个全局事务？以Seate框架为例，在TM向TC发送全局事务开始时，TC会生成对应的全局事务ID（XID），并发送给TM。TM 将 XID 放入当前线程的 ThreadLocal 中，后续的 RM (资源管理器) 分支事务通过解析该 XID 来注册分支。如果涉及RPC调用，每次调用时会在请求头部传递这个XID，让RM知道这个XID,RM向TC发送分支事务开始时,就会携带这个XID,从而告诉TC这个RM属于哪一个全局事务。 在多线程中，由于每个线程的XID是线程私有的，所以无法确定哪些RM属于同一个全局事务。这时全局事务会失效。解决方案可以是在开启新线程时，将XID传递给新线程，新线程的XID会继承父线程的XID。这样子线程的XID就会和父线程的XID一致，从而可以确定哪些RM属于同一个全局事务。 流程图片</div></div></div></a><a class="pagination-related" href="/posts/34e1e2ae.html" title="并发与串行下的接口幂等"><div class="cover" style="background:var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-02-21</div><div class="info-item-2">并发与串行下的接口幂等</div></div><div class="info-2"><div class="info-item-1">架构漫谈：别盲信分布式锁——大道至简的接口幂等性深度实践在分布式系统的开发中，“接口幂等性（Idempotency）”是一个老生常谈却又极易踩坑的话题。尤其是涉及资金交易、订单状态流转的业务（如提现、转账、支付回调），一旦防重逻辑出现漏洞，轻则客诉，重则产生直接资损。 面对“重复请求防并发”，很多开发者的第一反应往往是：“加个 Redis 分布式锁不就行了吗？” 然而，在经历过几次血淋淋的生产事故，或者深入剖析过数据库底层原理后，你会发现：用分布式锁来保证业务幂等，不仅大材小用、徒增系统复杂度，而且一旦用错，根本拦不住真正的重复执行。 今天，我们就来深度剖析一下，为什么在绝大多数场景下，数据库本身就是最好的幂等防线；以及在企业级架构中，究竟该如何优雅地构建这套防御体系。 1. 灾难现场：被击穿的“加锁”逻辑假设有一个“异步出款”的消费者，由于网络抖动，同一笔订单的出款消息被消费了两次。 重度依赖中间件的开发者，防重代码往往是这样写的： 12345678910111213// 反面教材：单纯依赖分布式锁public void processPayout(String order...</div></div></div></a><a class="pagination-related" href="/posts/a3a5550f.html" title="计算机网络问题总结"><div class="cover" style="background:var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-01-08</div><div class="info-item-2">计算机网络问题总结</div></div><div class="info-2"><div class="info-item-1">学习过程中的疑惑通过ARP协议我们可以知道目的ip的mac地址 那要是这个ip不在我的局域网里面 那我应该得到谁的mac地址呢这是一个非常经典且关键的网络问题。 简单直接的回答是：你会得到你所在局域网的“网关”（Gateway）的 MAC 地址。 详细原理解析当你的电脑（主机 A）想要发送数据包给一个 IP 地址（主机 B）时，它会经历以下逻辑判断流程： 判断目标 IP 是否在同一个局域网（子网）内： 电脑会查看自己的子网掩码（Subnet Mask）。 如果 目标IP 和 本机IP 在同一个网段内，电脑认为它可以直接通信。 如果不在同一个网段内，电脑认为“我够不着它”，必须找一个“中介”来帮忙转发。 寻找“中介”（网关）： 这个“中介”就是你配置的默认网关（Default Gateway）。通常这是你路由器（Router）的内网 IP 地址（例如 192.168.1.1 或 192.168.0.1）。 电脑会把数据包发给网关，由网关负责把数据包投递到外网。 ARP 解析的对象发生变化： 既然数据包要发给网关，那么在数据链路层（二层），目标 MAC 地址就必须是...</div></div></div></a></div></div><hr class="custom-hr"><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i> <span>评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://java-ai-nskk.oss-cn-beijing.aliyuncs.com/myblog/666.jpg" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info-name">纳斯卡可</div><div class="author-info-description">纳斯卡可的博客</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">48</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">12</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">0</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/rolay-nmcb"><i class="fab fa-github"></i><span>Follow Me<i class="faa-passing animated" style="padding-left:20px;display:inline-block;vertical-align:middle"><svg class="icon" style="height:28px;width:28px;fill:currentColor;position:relative;top:5px"><use xlink:href="#icon-car"></use></svg></i></span></a><div class="card-info-social-icons"><a class="social-icon faa-parent animated-hover" href="https://github.com/rolay-nmcb" target="_blank" title="Github"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-gitHub"></use></svg></a><a class="social-icon faa-parent animated-hover" href="https://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&amp;email=2843035026@qq.com" target="_blank" title="Email"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-youxiang"></use></svg></a><a class="social-icon faa-parent animated-hover" href="/atom.xml" target="_blank" title="RSS"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-rss"></use></svg></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/1949615496" target="_blank" title="BiliBili"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-bilibili1"></use></svg></a><a class="social-icon faa-parent animated-hover" href="tencent://Message/?Uin=2843035026&amp;amp;websiteName=local.edu.com:8888=&amp;amp;Menu=yes" target="_blank" title="QQ"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-QQ1"></use></svg></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">我的博客上线了🎉🎉🎉</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Java-NIO%EF%BC%9A%E4%B8%8D%E4%BB%85%E4%BB%85%E6%98%AF%E2%80%9C%E9%9D%9E%E9%98%BB%E5%A1%9E%E2%80%9D%EF%BC%8C%E6%9B%B4%E6%98%AF-IO-%E6%A8%A1%E5%9E%8B%E7%9A%84%E2%80%9CPro-Max%E2%80%9D"><span class="toc-number">1.</span> <span class="toc-text">Java NIO：不仅仅是“非阻塞”，更是 IO 模型的“Pro Max”</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E7%97%9B%E7%82%B9%EF%BC%9ABIO-%E6%97%B6%E4%BB%A3%E7%9A%84%E2%80%9C%E8%B4%B5%E6%97%8F%E6%9C%8D%E5%8A%A1%E2%80%9D"><span class="toc-number">1.1.</span> <span class="toc-text">1. 痛点：BIO 时代的“贵族服务”</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E8%AF%AF%E5%8C%BA%EF%BC%9ANIO-%E5%B0%B1%E6%98%AF%E2%80%9C%E9%9D%9E%E9%98%BB%E5%A1%9E%E2%80%9D%E5%90%97%EF%BC%9F"><span class="toc-number">1.2.</span> <span class="toc-text">2. 误区：NIO 就是“非阻塞”吗？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E7%A0%B4%E5%B1%80%EF%BC%9AIO-%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8"><span class="toc-number">1.3.</span> <span class="toc-text">3. 破局：IO 多路复用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8%EF%BC%9F"><span class="toc-number">1.3.1.</span> <span class="toc-text">什么是多路复用？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%99%E9%87%8C%E7%9A%84%E5%85%B3%E9%94%AE%E7%82%B9%E5%9C%A8%E4%BA%8E%EF%BC%9A%E8%B0%81%E5%9C%A8%E8%BD%AE%E8%AF%A2%EF%BC%9F"><span class="toc-number">1.3.2.</span> <span class="toc-text">这里的关键点在于：谁在轮询？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%BA%95%E5%B1%82%E9%BB%91%E7%A7%91%E6%8A%80%EF%BC%9A%E4%BB%8E-select-%E5%88%B0-epoll"><span class="toc-number">1.4.</span> <span class="toc-text">4. 底层黑科技：从 select 到 epoll</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E6%80%BB%E7%BB%93%E4%B8%8E%E6%80%9D%E8%80%83"><span class="toc-number">1.5.</span> <span class="toc-text">5. 总结与思考</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A5%E5%85%85%E8%AF%B4%E6%98%8E%EF%BC%8C%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84NIO%E8%B7%9F%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">1.6.</span> <span class="toc-text">补充说明，操作系统的NIO跟多路复用的区别</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%8D%95%E7%BA%AF%E7%9A%84-OS-NIO-%E7%94%A8%E6%88%B7%E8%BF%9B%E7%A8%8B%E5%9C%A8%E8%BD%AE%E8%AF%A2"><span class="toc-number">1.6.1.</span> <span class="toc-text">1. 单纯的 OS NIO &#x3D; 用户进程在轮询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-IO-%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8-%E5%86%85%E6%A0%B8%E5%9C%A8%E8%BD%AE%E8%AF%A2-%E7%9B%91%E6%8E%A7"><span class="toc-number">1.6.2.</span> <span class="toc-text">2. IO 多路复用 &#x3D; 内核在轮询&#x2F;监控</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%98%E6%9C%89%E4%B8%80%E4%B8%AA%E6%B7%B1%E5%B1%82%E6%AC%A1%E7%9A%84%E7%BB%86%E8%8A%82%EF%BC%88%E5%85%B3%E4%BA%8E-epoll%EF%BC%89"><span class="toc-number">1.6.3.</span> <span class="toc-text">还有一个深层次的细节（关于 epoll）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">1.6.4.</span> <span class="toc-text">总结</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/34e1e2ae.html" title="并发与串行下的接口幂等">并发与串行下的接口幂等</a><time datetime="2026-02-21T12:41:31.000Z" title="发表于 2026-02-21 12:41:31">2026-02-21</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/10b4eaf1.html" title="Kafka的多副本同步机制">Kafka的多副本同步机制</a><time datetime="2026-02-16T17:22:19.000Z" title="发表于 2026-02-16 17:22:19">2026-02-16</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/ae7d08b8.html" title="在DDD下怎么高效实现一人一单+库存超卖">在DDD下怎么高效实现一人一单+库存超卖</a><time datetime="2026-02-11T14:22:55.000Z" title="发表于 2026-02-11 14:22:55">2026-02-11</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/95975943.html" title="算法（十六） 区间DP">算法（十六） 区间DP</a><time datetime="2026-02-07T13:37:09.000Z" title="发表于 2026-02-07 13:37:09">2026-02-07</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/posts/4b1bdc5.html" title="Kafka为什么这么快">Kafka为什么这么快</a><time datetime="2026-02-07T13:32:58.000Z" title="发表于 2026-02-07 13:32:58">2026-02-07</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 - 2026 By 纳斯卡可</span><span class="framework-info"><span>框架</span> <a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题</span> <a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.0</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdmirror.com/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = null

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo.nmcb666.vip/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const init = (el = document, path = location.pathname) => {
    twikoo.init({
      el: el.querySelector('#twikoo-wrap'),
      envId: 'https://twikoo.nmcb666.vip/',
      region: '',
      onCommentLoaded: () => {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      },
      ...option,
      path: isShuoshuo ? path : (option && option.path) || path
    })

    

    isShuoshuo && (window.shuoshuoComment.destroyTwikoo = () => {
      if (el.children.length) {
        el.innerHTML = ''
        el.classList.add('no-comment')
      }
    })
  }

  const loadTwikoo = (el, path) => {
    if (typeof twikoo === 'object') setTimeout(() => init(el, path), 0)
    else btf.getScript('https://cdn.jsdmirror.com/npm/twikoo/dist/twikoo.all.min.js').then(() => init(el, path))
  }

  if (isShuoshuo) {
    'Twikoo' === 'Twikoo'
      ? window.shuoshuoComment = { loadComment: loadTwikoo }
      : window.loadOtherComment = loadTwikoo
    return
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script></div><div class="aplayer no-destroy" data-id="2827597264" data-server="netease" data-type="playlist" data-order="list" data-fixed="true" data-preload="auto" data-autoplay="false" data-mutex="true"></div><script defer src="/js/cursor.js"></script><canvas id="universe"></canvas><script src="/bilibiliBanner/banner.js" defer></script><script defer src="/js/universe.js"></script><link rel="stylesheet" href="https://cdn.jsdmirror.com/npm/aplayer/dist/APlayer.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdmirror.com/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdmirror.com/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><div class="app-refresh" id="app-refresh" style="position:fixed;top:-2.2rem;left:0;right:0;z-index:99999;padding:0 1rem;font-size:15px;height:2.2rem;transition:all .3s ease"><div class="app-refresh-wrap" style="display:flex;color:#fff;height:100%;align-items:center;justify-content:center"><label>✨ 有新文章啦！ 👉</label><a href="javascript:void(0)" onclick="location.reload()"><span style="color:#fff;text-decoration:underline;cursor:pointer">🍗点击食用🍔</span></a></div></div><script>if ('serviceWorker' in navigator) {
if (navigator.serviceWorker.controller) {
navigator.serviceWorker.addEventListener('controllerchange', function() {
showNotification()
})
}
window.addEventListener('load', function() {
navigator.serviceWorker.register('/sw.js')
})
}
function showNotification() {
if (GLOBAL_CONFIG.Snackbar) {
var snackbarBg =
document.documentElement.getAttribute('data-theme') === 'light' ?
GLOBAL_CONFIG.Snackbar.bgLight :
GLOBAL_CONFIG.Snackbar.bgDark
var snackbarPos = GLOBAL_CONFIG.Snackbar.position
Snackbar.show({
text: '✨ 有新文章啦！ 👉',
backgroundColor: snackbarBg,
duration: 500000,
pos: snackbarPos,
actionText: '🍗点击食用🍔',
actionTextColor: '#fff',
onActionClick: function(e) {
location.reload()
},
})
} else {
var showBg =
document.documentElement.getAttribute('data-theme') === 'light' ?
'#3b70fc' :
'#1f1f1f'
var cssText = `top: 0; background: ${showBg};`
document.getElementById('app-refresh').style.cssText = cssText
}
}</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><i class="fas fa-spinner fa-pulse" id="loading-status" hidden></i><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i> <span>数据加载中</span></div><div class="local-search-input"><input placeholder="搜索文章" type="text"></div><hr><div id="local-search-results"></div><div class="ais-Pagination" id="local-search-pagination" style="display:none"><ul class="ais-Pagination-list"></ul></div><div id="local-search-stats"></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div><script data-pjax>function butterfly_clock_anzhiyu_injector_config(){var a=document.getElementsByClassName("sticky_layout")[0];console.log("已挂载butterfly_clock_anzhiyu-yang修复版"),a&&a.insertAdjacentHTML("afterbegin",'<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img class="entered loading" id="card-clock-loading" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading"/></div></div></div></div></div>')}for(var elist="null".split(","),cpage=location.pathname,epage="all",qweather_key="b16a1fa0e63c46a4b8f28abfb06ae3fe",gaud_map_key="f54ba5c7880f35d1311b742bbbd52988",baidu_ak_key="undefined",flag=0,clock_rectangle="112.982279,28.19409",clock_default_rectangle_enable="false",i=0;i<elist.length;i++)cpage.includes(elist[i])&&flag++;"all"===epage&&0==flag?butterfly_clock_anzhiyu_injector_config():epage===cpage&&butterfly_clock_anzhiyu_injector_config()</script><script data-pjax src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.js"></script><script data-pjax>function butterfly_footer_beautify_injector_config(){var A=document.getElementById("footer");console.log("已挂载butterfly_footer_beautify"),A.insertAdjacentHTML("beforeend",'<div id="workboard"></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v5.4.0" title=""><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" data-title="主题版本Butterfly_v4.2.2" title=""><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender" alt=""/></a><a class="github-badge" target="_blank" href="https://cdn.jsdmirror.com/" style="margin-inline:5px" data-title="本站使用jsdmirror为静态资源提供CDN加速" title=""><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/CDN-jsDelivr-orange?style=flat&amp;logo=jsdmirror" alt=""/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="本站项目由Github托管" title=""><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&amp;logo=GitHub" alt=""/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title=""><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&amp;logo=Claris" alt=""/></a></p>')}for(var elist="null".split(","),cpage=location.pathname,epage="all",flag=0,i=0;i<elist.length;i++)cpage.includes(elist[i])&&flag++;"all"===epage&&0==flag?butterfly_footer_beautify_injector_config():epage===cpage&&butterfly_footer_beautify_injector_config()</script><script async src="/js/runtime.js"></script><script async src="/js/ali_font.js"></script><div class="js-pjax"><script async>for(var arr=document.getElementsByClassName("recent-post-item"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__zoomIn"),arr[i].setAttribute("data-wow-duration","1.5s"),arr[i].setAttribute("data-wow-delay","200ms"),arr[i].setAttribute("data-wow-offset","30"),arr[i].setAttribute("data-wow-iteration","1")</script><script async>for(var arr=document.getElementsByClassName("card-widget"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__zoomIn"),arr[i].setAttribute("data-wow-duration",""),arr[i].setAttribute("data-wow-delay","200ms"),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script><script async>for(var arr=document.getElementsByClassName("flink-list-card"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__flipInY"),arr[i].setAttribute("data-wow-duration","3s"),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script><script async>for(var arr=document.getElementsByClassName("flink-list-card"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__animated"),arr[i].setAttribute("data-wow-duration","3s"),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script><script async>for(var arr=document.getElementsByClassName("article-sort-item"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__slideInRight"),arr[i].setAttribute("data-wow-duration","1.5s"),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script><script async>for(var arr=document.getElementsByClassName("site-card"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__flipInY"),arr[i].setAttribute("data-wow-duration","3s"),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script><script async>for(var arr=document.getElementsByClassName("site-card"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__animated"),arr[i].setAttribute("data-wow-duration","3s"),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script></div><script defer src="https://cdn.cbd.int/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://cdn.cbd.int/hexo-butterfly-wowjs/lib/wow_init.js"></script><script data-pjax src="https://unpkg.com/oh-my-live2d"></script><script>const oml2d = OML2D.loadOml2d({dockedPosition:"right",mobileDisplay:true,models:[{"path":"https://cdn.jsdmirror.com/gh/rolay-nmcb/my-live2d/LSS.model3.json","mobilePosition":[20,0],"mobileScale":0.15,"mobileStageStyle":{"width":130,"height":130},"motionPreloadStrategy":"IDLE","position":[15,0],"scale":0.25,"stageStyle":{"width":250,"height":250}},{"path":"https://cdn.jsdmirror.com/gh/rolay-nmcb/my-live2d@main/boqi/yili.model3.json","mobilePosition":[-20,5],"mobileScale":0.1,"mobileStageStyle":{"width":130,"height":130},"motionPreloadStrategy":"IDLE","position":[-50,0],"scale":0.2,"stageStyle":{"width":250,"height":250}},{"path":"https://cdn.jsdmirror.com/gh/rolay-nmcb/my-live2d@main/congyu/Murasame.model3.json","mobilePosition":[10,0],"mobileScale":0.1,"mobileStageStyle":{"width":130,"height":130},"motionPreloadStrategy":"IDLE","position":[20,40],"scale":0.15,"stageStyle":{"width":250,"height":300}},{"path":"https://cdn.jsdmirror.com/gh/rolay-nmcb/my-live2d@main/Motis/Motis.model3.json","mobilePosition":[-20,-15],"mobileScale":0.1,"mobileStageStyle":{"width":130,"height":165},"motionPreloadStrategy":"IDLE","position":[-25,-20],"scale":0.15,"stageStyle":{"width":250,"height":250}}],parentElement:document.body,primaryColor:"var(--btn-bg)",sayHello:false,tips:{style: {"width":180,"height":100,"left":"calc(50% - 20px)","top":"-100px"},mobileStyle: {"width":150,"height":70,"left":"calc(50% - 30px)","top":"-80px"},copyTips: {"message":["复制记得注明出处哦~"]},idleTips:{interval:60000,message:["你好呀~","欢迎来到我的小站~"]}}});</script></body></html>