<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>çº³æ–¯å¡å¯`Blog</title>
  <icon>https://www.gravatar.com/avatar/feb67af737a34cba9363ed2d415c9ae9</icon>
  <subtitle>ğŸ˜¶â€ğŸŒ«ï¸</subtitle>
  <link href="https://nmcb666.vip/atom.xml" rel="self"/>
  
  <link href="https://nmcb666.vip/"/>
  <updated>2025-12-06T11:22:35.705Z</updated>
  <id>https://nmcb666.vip/</id>
  
  <author>
    <name>çº³æ–¯å¡å¯</name>
    <email>2843035026@qq.com</email>
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>åˆ©ç”¨Redis Sorted Setå®ç°Javaæ»šåŠ¨åˆ†é¡µæŸ¥è¯¢</title>
    <link href="https://nmcb666.vip/posts/7be5306f.html"/>
    <id>https://nmcb666.vip/posts/7be5306f.html</id>
    <published>2025-12-06T19:13:16.000Z</published>
    <updated>2025-12-06T11:22:35.705Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œåˆ†é¡µæŸ¥è¯¢æ˜¯ä¸€ä¸ªéå¸¸å¸¸è§çš„éœ€æ±‚ã€‚ä¼ ç»Ÿçš„åŸºäºæ•°æ®åº“çš„Limit Offsetåˆ†é¡µæ–¹å¼è™½ç„¶ç®€å•ï¼Œä½†åœ¨æ•°æ®é‡è¾ƒå¤§æˆ–æ•°æ®å®æ—¶å˜åŠ¨ï¼ˆå¦‚æ’å…¥æ–°æ•°æ®ï¼‰çš„åœºæ™¯ä¸‹ï¼Œä¼šå‡ºç°<strong>é‡å¤æ•°æ®</strong>æˆ–<strong>æ•°æ®é—æ¼</strong>çš„é—®é¢˜ã€‚æœ¬æ–‡å°†æ¢è®¨å¦‚ä½•åˆ©ç”¨Redisçš„Sorted Setï¼ˆæœ‰åºé›†åˆï¼‰æ•°æ®ç»“æ„æ¥å®ç°é«˜æ•ˆã€å‡†ç¡®çš„æ»šåŠ¨åˆ†é¡µæŸ¥è¯¢ï¼Œå¹¶ç»“åˆå…·ä½“Javaä»£ç è¿›è¡Œè¯¦ç»†è§£æã€‚</p><h2 id="ä¸€ã€ä¼ ç»Ÿåˆ†é¡µçš„ç—›ç‚¹ï¼šä¸ºä»€ä¹ˆéœ€è¦æ»šåŠ¨åˆ†é¡µï¼Ÿ"><a href="#ä¸€ã€ä¼ ç»Ÿåˆ†é¡µçš„ç—›ç‚¹ï¼šä¸ºä»€ä¹ˆéœ€è¦æ»šåŠ¨åˆ†é¡µï¼Ÿ" class="headerlink" title="ä¸€ã€ä¼ ç»Ÿåˆ†é¡µçš„ç—›ç‚¹ï¼šä¸ºä»€ä¹ˆéœ€è¦æ»šåŠ¨åˆ†é¡µï¼Ÿ"></a>ä¸€ã€ä¼ ç»Ÿåˆ†é¡µçš„ç—›ç‚¹ï¼šä¸ºä»€ä¹ˆéœ€è¦æ»šåŠ¨åˆ†é¡µï¼Ÿ</h2><p>æˆ‘ä»¬å…ˆå›é¡¾ä¸€ä¸‹ä¼ ç»Ÿçš„Limit Offsetåˆ†é¡µã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€å¼ åšå®¢è¡¨ï¼Œè¦æŸ¥è¯¢ç¬¬2é¡µæ•°æ®ï¼ˆæ¯é¡µ2æ¡ï¼‰ï¼ŒSQLé€šå¸¸æ˜¯ï¼š</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> blog <span class="keyword">ORDER</span> <span class="keyword">BY</span> create_time <span class="keyword">DESC</span> LIMIT <span class="number">2</span> <span class="keyword">OFFSET</span> <span class="number">2</span>;</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹å¼çš„é—®é¢˜åœ¨äºï¼šå¦‚æœåœ¨æŸ¥è¯¢ç¬¬1é¡µåã€ç¬¬2é¡µå‰ï¼Œæœ‰ä¸€æ¡æ–°çš„åšå®¢æ’å…¥ï¼ˆcreate_timeæ¯”ç¬¬1é¡µçš„éƒ¨åˆ†æ•°æ®æ›´æ–°ï¼‰ï¼Œé‚£ä¹ˆç¬¬2é¡µçš„ç»“æœå°±ä¼šåŒ…å«åŸæœ¬ç¬¬1é¡µçš„æœ€åä¸€æ¡æ•°æ®ï¼Œå¯¼è‡´é‡å¤æŸ¥è¯¢ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><ul><li><p>åˆå§‹æ•°æ®ï¼š[A(æ—¶é—´10), B(æ—¶é—´9), C(æ—¶é—´8), D(æ—¶é—´7)]</p></li><li><p>ç¬¬1é¡µï¼ˆLIMIT 2 OFFSET 0ï¼‰ï¼š[A, B]</p></li><li><p>æ’å…¥æ–°æ•°æ®E(æ—¶é—´11)ï¼Œæ•°æ®å˜ä¸ºï¼š[E(11), A(10), B(9), C(8), D(7)]</p></li><li><p>ç¬¬2é¡µï¼ˆLIMIT 2 OFFSET 2ï¼‰ï¼š[B, C] â†’ Bé‡å¤å‡ºç°</p></li></ul><p>æ»šåŠ¨åˆ†é¡µï¼ˆä¹Ÿå«æ¸¸æ ‡åˆ†é¡µï¼‰åˆ™é€šè¿‡<strong>ä¸Šä¸€é¡µçš„æœ€åä¸€ä¸ªæ ‡è®°ï¼ˆå¦‚æ—¶é—´æˆ³ï¼‰</strong>æ¥å®šä½ä¸‹ä¸€é¡µçš„èµ·å§‹ä½ç½®ï¼Œé¿å…äº†Offsetå¸¦æ¥çš„é—®é¢˜ã€‚è€ŒRedisçš„Sorted Setæ°å¥½èƒ½å®Œç¾æ”¯æŒè¿™ç§åœºæ™¯ã€‚</p><h2 id="äºŒã€Redis-Sorted-Setçš„ç‰¹æ€§ï¼šä¸ºä»€ä¹ˆé€‚åˆæ»šåŠ¨åˆ†é¡µï¼Ÿ"><a href="#äºŒã€Redis-Sorted-Setçš„ç‰¹æ€§ï¼šä¸ºä»€ä¹ˆé€‚åˆæ»šåŠ¨åˆ†é¡µï¼Ÿ" class="headerlink" title="äºŒã€Redis Sorted Setçš„ç‰¹æ€§ï¼šä¸ºä»€ä¹ˆé€‚åˆæ»šåŠ¨åˆ†é¡µï¼Ÿ"></a>äºŒã€Redis Sorted Setçš„ç‰¹æ€§ï¼šä¸ºä»€ä¹ˆé€‚åˆæ»šåŠ¨åˆ†é¡µï¼Ÿ</h2><p>Redisçš„Sorted Setï¼ˆæœ‰åºé›†åˆï¼‰æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ•°æ®ç»“æ„ï¼Œå®ƒä¸ºæ¯ä¸ªå…ƒç´ åˆ†é…ä¸€ä¸ª<strong>åˆ†æ•°ï¼ˆScoreï¼‰</strong>ï¼Œå¹¶æŒ‰ç…§åˆ†æ•°å¯¹å…ƒç´ è¿›è¡Œæ’åºã€‚å…¶æ ¸å¿ƒç‰¹æ€§åŒ…æ‹¬ï¼š</p><ol><li><p><strong>æœ‰åºæ€§</strong>ï¼šå…ƒç´ å¤©ç„¶æŒ‰ç…§Scoreå‡åºæˆ–é™åºæ’åˆ—ï¼Œæ— éœ€é¢å¤–æ’åºæ“ä½œã€‚</p></li><li><p><strong>èŒƒå›´æŸ¥è¯¢</strong>ï¼šæ”¯æŒé€šè¿‡ScoreèŒƒå›´ï¼ˆå¦‚0åˆ°maxScoreï¼‰æŸ¥è¯¢å…ƒç´ ï¼Œè¿™æ˜¯å®ç°æ»šåŠ¨åˆ†é¡µçš„å…³é”®ã€‚</p></li><li><p><strong>é«˜æ•ˆæ€§</strong>ï¼šæ— è®ºæ˜¯æ’å…¥ã€æŸ¥è¯¢è¿˜æ˜¯åˆ é™¤æ“ä½œï¼Œæ—¶é—´å¤æ‚åº¦å‡ä¸ºO(logN)ï¼Œé€‚åˆå¤§æ•°æ®é‡åœºæ™¯ã€‚</p></li></ol><p>åœ¨æ»šåŠ¨åˆ†é¡µåœºæ™¯ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å°†<strong>ä¸šåŠ¡æ•°æ®çš„å”¯ä¸€æ ‡è¯†ï¼ˆå¦‚åšå®¢IDï¼‰</strong>ä½œä¸ºSorted Setçš„å…ƒç´ ï¼ˆValueï¼‰ï¼Œå°†<strong>æ’åºå­—æ®µï¼ˆå¦‚åˆ›å»ºæ—¶é—´æˆ³ï¼‰</strong>ä½œä¸ºå…ƒç´ çš„åˆ†æ•°ï¼ˆScoreï¼‰ã€‚è¿™æ ·ï¼Œé€šè¿‡ScoreèŒƒå›´å°±èƒ½å¿«é€Ÿå®šä½ä¸‹ä¸€é¡µæ•°æ®ã€‚</p><h2 id="ä¸‰ã€æ»šåŠ¨åˆ†é¡µçš„å®ç°æ€è·¯ä¸ä»£ç è§£æ"><a href="#ä¸‰ã€æ»šåŠ¨åˆ†é¡µçš„å®ç°æ€è·¯ä¸ä»£ç è§£æ" class="headerlink" title="ä¸‰ã€æ»šåŠ¨åˆ†é¡µçš„å®ç°æ€è·¯ä¸ä»£ç è§£æ"></a>ä¸‰ã€æ»šåŠ¨åˆ†é¡µçš„å®ç°æ€è·¯ä¸ä»£ç è§£æ</h2><p>ä¸‹é¢ç»“åˆæä¾›çš„Javaä»£ç ï¼Œè¯¦ç»†æ‹†è§£åˆ©ç”¨Redis Sorted Setå®ç°æ»šåŠ¨åˆ†é¡µçš„å®Œæ•´æµç¨‹ã€‚æœ¬æ–‡ä»¥â€œæŸ¥è¯¢å…³æ³¨çš„åšå®¢åŠ¨æ€â€ä¸ºä¾‹è¿›è¡Œè¯´æ˜ã€‚</p><h3 id="3-1-æ ¸å¿ƒæµç¨‹æ¦‚è§ˆ"><a href="#3-1-æ ¸å¿ƒæµç¨‹æ¦‚è§ˆ" class="headerlink" title="3.1 æ ¸å¿ƒæµç¨‹æ¦‚è§ˆ"></a>3.1 æ ¸å¿ƒæµç¨‹æ¦‚è§ˆ</h3><p>æ»šåŠ¨åˆ†é¡µçš„æ ¸å¿ƒæ˜¯é€šè¿‡â€œä¸Šä¸€é¡µçš„æœ€å°æ—¶é—´æˆ³ï¼ˆminTimeï¼‰â€å’Œâ€œåç§»é‡ï¼ˆoffsetï¼‰â€æ¥å®šä½ä¸‹ä¸€é¡µæ•°æ®ï¼Œå…·ä½“æµç¨‹å¦‚ä¸‹ï¼š</p><ol><li><p>å®šä¹‰Redisçš„Sorted Seté”®ï¼šä»¥ç”¨æˆ·IDä¸ºç»´åº¦ï¼Œå­˜å‚¨è¯¥ç”¨æˆ·å…³æ³¨çš„åšå®¢IDé›†åˆï¼ˆå¦‚<code>feed:1001</code>è¡¨ç¤ºç”¨æˆ·1001çš„å…³æ³¨åŠ¨æ€ï¼‰ã€‚</p></li><li><p>æŸ¥è¯¢ä¸Šä¸€é¡µæ•°æ®ï¼šé€šè¿‡<code>reverseRangeByScoreWithScores</code>æ–¹æ³•ï¼ŒæŸ¥è¯¢Scoreåœ¨0åˆ°maxï¼ˆä¸Šä¸€é¡µçš„minTimeï¼‰ä¹‹é—´çš„å…ƒç´ ï¼ŒåŒæ—¶æŒ‡å®šåç§»é‡å’Œæ¯é¡µæ•°é‡ã€‚</p></li><li><p>å¤„ç†æŸ¥è¯¢ç»“æœï¼šæå–åšå®¢IDã€è®¡ç®—å½“å‰é¡µçš„æœ€å°æ—¶é—´æˆ³å’Œåç§»é‡ï¼Œç”¨äºä¸‹ä¸€é¡µæŸ¥è¯¢ã€‚</p></li><li><p>å°è£…å¹¶è¿”å›ç»“æœï¼šå°†åšå®¢è¯¦æƒ…ã€minTimeã€offsetè¿”å›ç»™å‰ç«¯ï¼Œä½œä¸ºä¸‹ä¸€é¡µè¯·æ±‚çš„å‚æ•°ã€‚</p></li></ol><h3 id="3-2-ä»£ç é€è¡Œè§£æ"><a href="#3-2-ä»£ç é€è¡Œè§£æ" class="headerlink" title="3.2 ä»£ç é€è¡Œè§£æ"></a>3.2 ä»£ç é€è¡Œè§£æ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">queryBlogOfFollow</span><span class="params">(Long max, Integer offset)</span> &#123;</span><br><span class="line">    <span class="comment">// 1. è·å–å½“å‰ç”¨æˆ·</span></span><br><span class="line">    <span class="type">UserDTO</span> <span class="variable">user</span> <span class="operator">=</span> UserHolder.getUser();</span><br><span class="line">    <span class="type">Long</span> <span class="variable">userId</span> <span class="operator">=</span> user.getId();</span><br><span class="line">    <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> <span class="string">&quot;feed:&quot;</span> + userId; <span class="comment">// Redisé”®ï¼šfeed:ç”¨æˆ·ID</span></span><br><span class="line">    <span class="comment">// 2. ä»RedisæŸ¥è¯¢blogIdåˆ—è¡¨</span></span><br><span class="line">    <span class="comment">// reverseRangeByScoreWithScoresï¼šå€’åºæŸ¥è¯¢Scoreåœ¨[0, max]ä¹‹é—´çš„å…ƒç´ </span></span><br><span class="line">    <span class="comment">// å‚æ•°è¯´æ˜ï¼škey, æœ€å°Score, æœ€å¤§Score, åç§»é‡, æ¯é¡µæ•°é‡</span></span><br><span class="line">    Set&lt;ZSetOperations.TypedTuple&lt;String&gt;&gt; result = stringRedisTemplate.opsForZSet()</span><br><span class="line">            .reverseRangeByScoreWithScores(key, <span class="number">0</span>, max, offset, <span class="number">2</span>);</span><br><span class="line">    <span class="comment">// 3. å¤„ç†ç©ºç»“æœ</span></span><br><span class="line">    <span class="keyword">if</span>(result == <span class="literal">null</span> || result.isEmpty()) &#123;</span><br><span class="line">        log.debug(<span class="string">&quot;æ— æ–°æ•°æ®&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> Result.ok();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 4. æå–åšå®¢IDã€è®¡ç®—å½“å‰é¡µçš„minTimeå’Œoffset</span></span><br><span class="line">    <span class="type">long</span> <span class="variable">minTime</span> <span class="operator">=</span> System.currentTimeMillis(); <span class="comment">// åˆå§‹åŒ–ä¸ºå½“å‰æ—¶é—´</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">offset1</span> <span class="operator">=</span> <span class="number">1</span>; <span class="comment">// åˆå§‹åç§»é‡ä¸º1</span></span><br><span class="line">    List&lt;Long&gt; ids = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(result.size());</span><br><span class="line">    <span class="keyword">for</span> (ZSetOperations.TypedTuple&lt;String&gt; tuple : result) &#123;</span><br><span class="line">        <span class="comment">// æå–åšå®¢ID</span></span><br><span class="line">        ids.add(Long.valueOf(Objects.requireNonNull(tuple.getValue())));</span><br><span class="line">        <span class="comment">// æå–Scoreï¼ˆå³åšå®¢åˆ›å»ºæ—¶é—´æˆ³ï¼‰</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">time</span> <span class="operator">=</span> Objects.requireNonNull(tuple.getScore()).longValue();</span><br><span class="line">        <span class="comment">// å¤„ç†ç›¸åŒæ—¶é—´æˆ³çš„æƒ…å†µï¼šè‹¥æ—¶é—´ç­‰äºå½“å‰minTimeï¼Œåç§»é‡+1ï¼›å¦åˆ™æ›´æ–°minTimeå’Œåç§»é‡</span></span><br><span class="line">        <span class="keyword">if</span>(time == minTime) &#123;</span><br><span class="line">            offset1++;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            minTime = time;</span><br><span class="line">            offset1 = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 5. æŸ¥è¯¢åšå®¢è¯¦æƒ…ï¼ˆæ‰¹é‡æŸ¥è¯¢é¿å…N+1é—®é¢˜ï¼Œæ­¤å¤„ä¸ºç®€åŒ–ç¤ºä¾‹ï¼‰</span></span><br><span class="line">    List&lt;Blog&gt; blogs = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(ids.size());</span><br><span class="line">    ids.forEach(id -&gt; &#123;</span><br><span class="line">        <span class="type">Blog</span> <span class="variable">blog</span> <span class="operator">=</span> getById(id); <span class="comment">// ä»æ•°æ®åº“æŸ¥è¯¢åšå®¢è¯¦æƒ…</span></span><br><span class="line">        setBlogIsLiked(blog); <span class="comment">// å¤„ç†åšå®¢ç‚¹èµçŠ¶æ€</span></span><br><span class="line">        queryUser(blog); <span class="comment">// å¡«å……åšå®¢ä½œè€…ä¿¡æ¯</span></span><br><span class="line">        blogs.add(blog);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// 6. å°è£…æ»šåŠ¨åˆ†é¡µç»“æœ</span></span><br><span class="line">    ScrollResult&lt;Blog&gt; scrollResult = <span class="keyword">new</span> <span class="title class_">ScrollResult</span>&lt;&gt;();</span><br><span class="line">    scrollResult.setList(blogs); <span class="comment">// å½“å‰é¡µåšå®¢åˆ—è¡¨</span></span><br><span class="line">    scrollResult.setMinTime(minTime); <span class="comment">// å½“å‰é¡µæœ€å°æ—¶é—´æˆ³ï¼ˆä¸‹ä¸€é¡µçš„maxå‚æ•°ï¼‰</span></span><br><span class="line">    scrollResult.setOffset(offset1); <span class="comment">// å½“å‰é¡µæœ€å°æ—¶é—´æˆ³å¯¹åº”çš„åç§»é‡</span></span><br><span class="line">    <span class="keyword">return</span> Result.ok(scrollResult);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-3-å…³é”®ç»†èŠ‚è¯´æ˜"><a href="#3-3-å…³é”®ç»†èŠ‚è¯´æ˜" class="headerlink" title="3.3 å…³é”®ç»†èŠ‚è¯´æ˜"></a>3.3 å…³é”®ç»†èŠ‚è¯´æ˜</h3><div class="tip warning faa-parent animated-hover"><p class="faa-horizontal">**ä¸ºä»€ä¹ˆç”¨reverseRangeByScoreWithScoresï¼Ÿ**å› ä¸ºæˆ‘ä»¬é€šå¸¸éœ€è¦æŒ‰æ—¶é—´å€’åºå±•ç¤ºæ•°æ®ï¼ˆæœ€æ–°çš„åœ¨å‰ï¼‰ï¼Œè¯¥æ–¹æ³•ä¼šæŒ‰ç…§Scoreä»å¤§åˆ°å°è¿”å›å…ƒç´ ï¼Œæ­£å¥½ç¬¦åˆéœ€æ±‚ã€‚</p></div><div class="tip warning faa-parent animated-hover"><p class="faa-horizontal">**maxå’Œoffsetå‚æ•°çš„ä½œç”¨ï¼Ÿ**- `max`ï¼šä¸Šä¸€é¡µè¿”å›çš„minTimeï¼Œä»£è¡¨ä¸‹ä¸€é¡µæ•°æ®çš„Scoreä¸èƒ½è¶…è¿‡è¿™ä¸ªå€¼ï¼ˆå³æ—¶é—´ä¸èƒ½æ™šäºè¿™ä¸ªå€¼ï¼‰ã€‚- `offset`ï¼šå½“å­˜åœ¨å¤šä¸ªScoreç›¸åŒçš„å…ƒç´ æ—¶ï¼Œç”¨äºè·³è¿‡å‰Nä¸ªå…ƒç´ ï¼Œé¿å…é‡å¤ã€‚</p></div><div class="tip warning faa-parent animated-hover"><p class="faa-horizontal">**å¦‚ä½•å¤„ç†ç›¸åŒæ—¶é—´æˆ³çš„æ•°æ®ï¼Ÿ**å¦‚æœå¤šæ¡åšå®¢çš„åˆ›å»ºæ—¶é—´æˆ³ç›¸åŒï¼ˆScoreç›¸åŒï¼‰ï¼Œä¸‹ä¸€é¡µæŸ¥è¯¢æ—¶éœ€è¦é€šè¿‡offsetè·³è¿‡è¿™äº›é‡å¤çš„å…ƒç´ ã€‚ä¾‹å¦‚ï¼Œå½“å‰é¡µæœ‰3æ¡æ•°æ®çš„Scoreéƒ½æ˜¯1620000000ï¼Œé‚£ä¹ˆminTime=1620000000ï¼Œoffset=3ï¼Œä¸‹ä¸€é¡µæŸ¥è¯¢æ—¶ä¼šä»ç¬¬4ä¸ªScore=1620000000çš„å…ƒç´ å¼€å§‹ã€‚</p></div><h2 id="å››ã€æ»šåŠ¨åˆ†é¡µçš„ä¼˜åŠ¿ä¸æ³¨æ„äº‹é¡¹"><a href="#å››ã€æ»šåŠ¨åˆ†é¡µçš„ä¼˜åŠ¿ä¸æ³¨æ„äº‹é¡¹" class="headerlink" title="å››ã€æ»šåŠ¨åˆ†é¡µçš„ä¼˜åŠ¿ä¸æ³¨æ„äº‹é¡¹"></a>å››ã€æ»šåŠ¨åˆ†é¡µçš„ä¼˜åŠ¿ä¸æ³¨æ„äº‹é¡¹</h2><h3 id="4-1-ä¼˜åŠ¿"><a href="#4-1-ä¼˜åŠ¿" class="headerlink" title="4.1 ä¼˜åŠ¿"></a>4.1 ä¼˜åŠ¿</h3><ul><li><p><strong>æ— é‡å¤æ— é—æ¼</strong>ï¼šåŸºäºæ—¶é—´æˆ³å®šä½ï¼Œå³ä½¿ä¸­é—´æ’å…¥æ–°æ•°æ®ï¼Œä¹Ÿä¸ä¼šå½±å“ä¸‹ä¸€é¡µçš„æŸ¥è¯¢ç»“æœã€‚</p></li><li><p><strong>é«˜æ€§èƒ½</strong>ï¼šRedisçš„Sorted SetæŸ¥è¯¢æ•ˆç‡é«˜ï¼Œå°¤å…¶é€‚åˆå¤§æ•°æ®é‡åœºæ™¯ï¼Œé¿å…äº†æ•°æ®åº“Limit Offsetçš„å…¨è¡¨æ‰«æé—®é¢˜ã€‚</p></li><li><p><strong>å®æ—¶æ€§å¥½</strong>ï¼šæ•°æ®æ’å…¥Redisåå¯ç«‹å³æŸ¥è¯¢ï¼Œæ— éœ€ç­‰å¾…æ•°æ®åº“åŒæ­¥ã€‚</p></li></ul><h3 id="4-2-æ³¨æ„äº‹é¡¹"><a href="#4-2-æ³¨æ„äº‹é¡¹" class="headerlink" title="4.2 æ³¨æ„äº‹é¡¹"></a>4.2 æ³¨æ„äº‹é¡¹</h3><ul><li><p><strong>Scoreçš„å”¯ä¸€æ€§é—®é¢˜</strong>ï¼šå¦‚æœæ’åºå­—æ®µï¼ˆå¦‚æ—¶é—´æˆ³ï¼‰å­˜åœ¨å¤§é‡é‡å¤ï¼Œéœ€è¦é€šè¿‡offsetæ¥å¤„ç†ï¼Œå¦åˆ™å¯èƒ½å‡ºç°æ•°æ®æ¼æŸ¥ã€‚</p></li><li><p><strong>Redisæ•°æ®ä¸€è‡´æ€§</strong>ï¼šéœ€è¦ä¿è¯ä¸šåŠ¡æ•°æ®ï¼ˆå¦‚åšå®¢ï¼‰ä¸Redisä¸­çš„Sorted SetåŒæ­¥ã€‚ä¾‹å¦‚ï¼Œåšå®¢åˆ é™¤æ—¶ï¼Œè¦åŠæ—¶ä»Redisä¸­ç§»é™¤å¯¹åº”çš„å…ƒç´ ã€‚</p></li><li><p><strong>åˆ†é¡µå‚æ•°çš„ä¼ é€’</strong>ï¼šå‰ç«¯éœ€è¦å°†ä¸Šä¸€é¡µè¿”å›çš„minTimeå’Œoffsetä½œä¸ºä¸‹ä¸€é¡µè¯·æ±‚çš„å‚æ•°ï¼Œå› æ­¤éœ€è¦åœ¨æ¥å£è®¾è®¡ä¸­æ˜ç¡®è¿™ä¸¤ä¸ªå‚æ•°ã€‚</p></li></ul><h2 id="äº”ã€æ€»ç»“"><a href="#äº”ã€æ€»ç»“" class="headerlink" title="äº”ã€æ€»ç»“"></a>äº”ã€æ€»ç»“</h2><p>ç›¸æ¯”ä¼ ç»Ÿçš„Limit Offsetåˆ†é¡µï¼ŒåŸºäºRedis Sorted Setçš„æ»šåŠ¨åˆ†é¡µåœ¨å®æ—¶æ€§ã€å‡†ç¡®æ€§å’Œé«˜æ€§èƒ½æ–¹é¢éƒ½æœ‰æ˜æ˜¾ä¼˜åŠ¿ï¼Œå°¤å…¶é€‚åˆåŠ¨æ€æ•°æ®ï¼ˆå¦‚å…³æ³¨åŠ¨æ€ã€æ¶ˆæ¯æµï¼‰çš„åˆ†é¡µåœºæ™¯ã€‚å…¶æ ¸å¿ƒæ˜¯åˆ©ç”¨Sorted Setçš„Scoreæœ‰åºæ€§å’ŒèŒƒå›´æŸ¥è¯¢èƒ½åŠ›ï¼Œé€šè¿‡â€œä¸Šä¸€é¡µçš„æœ€å°æ—¶é—´æˆ³+åç§»é‡â€æ¥å®šä½ä¸‹ä¸€é¡µæ•°æ®ï¼Œä»æ ¹æœ¬ä¸Šè§£å†³äº†ä¼ ç»Ÿåˆ†é¡µçš„é‡å¤å’Œé—æ¼é—®é¢˜ã€‚</p><p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€æ±‚ä¼˜åŒ–ç»†èŠ‚ï¼Œä¾‹å¦‚ç»“åˆRedisçš„è¿‡æœŸç­–ç•¥æ¸…ç†å†å²æ•°æ®ã€ä½¿ç”¨ç®¡é“ï¼ˆPipelineï¼‰å‡å°‘Redisäº¤äº’æ¬¡æ•°ç­‰ï¼Œè¿›ä¸€æ­¥æå‡ç³»ç»Ÿæ€§èƒ½ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œåˆ†é¡µæŸ¥è¯¢æ˜¯ä¸€ä¸ªéå¸¸å¸¸è§çš„éœ€æ±‚ã€‚ä¼ ç»Ÿçš„åŸºäºæ•°æ®åº“çš„Limit Offsetåˆ†é¡µæ–¹å¼è™½ç„¶ç®€å•ï¼Œä½†åœ¨æ•°æ®é‡è¾ƒå¤§æˆ–æ•°æ®å®æ—¶å˜åŠ¨ï¼ˆå¦‚æ’å…¥æ–°æ•°æ®ï¼‰çš„åœºæ™¯ä¸‹ï¼Œä¼šå‡ºç°&lt;strong&gt;é‡å¤æ•°æ®&lt;/strong&gt;æˆ–&lt;strong&gt;æ•°æ®é—æ¼&lt;/strong&gt;çš„é—®é¢˜ã€‚æœ¬æ–‡å°†æ¢è®¨å¦‚ä½•åˆ©</summary>
      
    
    
    
    
    <category term="redis" scheme="https://nmcb666.vip/tags/redis/"/>
    
  </entry>
  
  <entry>
    <title>Redis Streamå¤šæ¶ˆè´¹è€…ç»„æ¨¡å¼ï¼šåŸç†ã€ACKæœºåˆ¶ä¸åœ¨Javaä¸­çš„å®è·µ</title>
    <link href="https://nmcb666.vip/posts/da8941bc.html"/>
    <id>https://nmcb666.vip/posts/da8941bc.html</id>
    <published>2025-12-03T18:42:18.000Z</published>
    <updated>2025-12-06T11:22:35.705Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Redis-Streamå¤šæ¶ˆè´¹è€…ç»„æ¨¡å¼ï¼šåŸç†ã€ACKæœºåˆ¶ä¸Javaå®è·µ"><a href="#Redis-Streamå¤šæ¶ˆè´¹è€…ç»„æ¨¡å¼ï¼šåŸç†ã€ACKæœºåˆ¶ä¸Javaå®è·µ" class="headerlink" title="Redis Streamå¤šæ¶ˆè´¹è€…ç»„æ¨¡å¼ï¼šåŸç†ã€ACKæœºåˆ¶ä¸Javaå®è·µ"></a>Redis Streamå¤šæ¶ˆè´¹è€…ç»„æ¨¡å¼ï¼šåŸç†ã€ACKæœºåˆ¶ä¸Javaå®è·µ</h1><p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œæ¶ˆæ¯é˜Ÿåˆ—æ˜¯è§£è€¦æœåŠ¡ã€å‰Šå³°å¡«è°·çš„æ ¸å¿ƒç»„ä»¶ã€‚Redisä½œä¸ºé«˜æ€§èƒ½çš„å†…å­˜æ•°æ®åº“ï¼Œä»5.0ç‰ˆæœ¬å¼€å§‹å¼•å…¥Streamæ•°æ®ç»“æ„ï¼ŒåŸç”Ÿæ”¯æŒæ¶ˆæ¯é˜Ÿåˆ—åŠŸèƒ½ã€‚ç›¸è¾ƒäºRedisä»¥å¾€çš„Pub/Subï¼ˆæ— æŒä¹…åŒ–ï¼‰ã€Listï¼ˆç®€å•é˜Ÿåˆ—ï¼‰ï¼ŒStreamæä¾›äº†<strong>æŒä¹…åŒ–ã€å¤šæ¶ˆè´¹è€…ç»„ã€ACKç¡®è®¤ã€æ¶ˆæ¯å›æº¯</strong>ç­‰ä¼ä¸šçº§ç‰¹æ€§ï¼Œå°¤å…¶åœ¨å¤šæ¶ˆè´¹è€…ç»„åœºæ™¯ä¸‹ï¼Œèƒ½çµæ´»å®ç°æ¶ˆæ¯çš„åˆ†å‘ä¸å¤„ç†ã€‚æœ¬æ–‡å°†æ·±å…¥å‰–æStreamå¤šæ¶ˆè´¹è€…ç»„çš„å®ç°åŸç†ï¼Œé‡ç‚¹è§£è¯»ACKç¡®è®¤æœºåˆ¶ä¸Pending Listçš„ä½œç”¨ï¼Œå¹¶ç»“åˆJavaä»£ç æ¼”ç¤ºå®é™…è¿ç”¨åœºæ™¯ã€‚</p><h1 id="ä¸€ã€Redis-Streamæ ¸å¿ƒæ¦‚å¿µä¸å¤šæ¶ˆè´¹è€…ç»„æ¨¡å‹"><a href="#ä¸€ã€Redis-Streamæ ¸å¿ƒæ¦‚å¿µä¸å¤šæ¶ˆè´¹è€…ç»„æ¨¡å‹" class="headerlink" title="ä¸€ã€Redis Streamæ ¸å¿ƒæ¦‚å¿µä¸å¤šæ¶ˆè´¹è€…ç»„æ¨¡å‹"></a>ä¸€ã€Redis Streamæ ¸å¿ƒæ¦‚å¿µä¸å¤šæ¶ˆè´¹è€…ç»„æ¨¡å‹</h1><p>åœ¨ç†è§£å¤šæ¶ˆè´¹è€…ç»„ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ˜ç¡®Streamçš„å‡ ä¸ªåŸºç¡€æ¦‚å¿µï¼š</p><ul><li><p><strong>Stream</strong>ï¼šæ¶ˆæ¯çš„è½½ä½“ï¼Œç±»ä¼¼æ—¥å¿—æ–‡ä»¶çš„ç»“æ„ï¼Œæ¯æ¡æ¶ˆæ¯æœ‰å”¯ä¸€çš„IDï¼ˆæ ¼å¼ä¸ºâ€œæ—¶é—´æˆ³-åºåˆ—å·â€ï¼Œå¦‚1690000000000-0ï¼‰ï¼Œæ¶ˆæ¯å†…å®¹ä»¥é”®å€¼å¯¹å­˜å‚¨ã€‚</p></li><li><p><strong>æ¶ˆè´¹è€…ç»„ï¼ˆConsumer Groupï¼‰</strong>ï¼šä¸€ç»„æ¶ˆè´¹è€…çš„é›†åˆï¼ŒåŒä¸€ä¸ªStreamå¯ä»¥åˆ›å»ºå¤šä¸ªæ¶ˆè´¹è€…ç»„ã€‚<strong>ä¸åŒæ¶ˆè´¹è€…ç»„ä¹‹é—´æ˜¯ç‹¬ç«‹çš„</strong>ï¼Œå³åŒä¸€æ¡æ¶ˆæ¯ä¼šè¢«æ¯ä¸ªæ¶ˆè´¹è€…ç»„æ¶ˆè´¹ä¸€æ¬¡ï¼›è€ŒåŒä¸€ä¸ªæ¶ˆè´¹è€…ç»„å†…çš„æ¶ˆè´¹è€…åˆ™ç«äº‰æ¶ˆè´¹æ¶ˆæ¯ï¼Œç¡®ä¿ä¸€æ¡æ¶ˆæ¯åªè¢«ç»„å†…ä¸€ä¸ªæ¶ˆè´¹è€…å¤„ç†ã€‚</p></li><li><p><strong>æ¶ˆè´¹è€…ï¼ˆConsumerï¼‰</strong>ï¼šéš¶å±äºæŸä¸ªæ¶ˆè´¹è€…ç»„ï¼Œå®é™…å¤„ç†æ¶ˆæ¯çš„ä¸ªä½“ã€‚</p></li><li><p><strong>Pending Listï¼ˆPENDINGåˆ—è¡¨ï¼‰</strong>ï¼šæ¶ˆè´¹è€…ä»ç»„å†…è·å–æ¶ˆæ¯åï¼Œè‹¥æœªå‘é€ACKç¡®è®¤ï¼Œæ¶ˆæ¯ä¼šè¢«æ”¾å…¥è¯¥æ¶ˆè´¹è€…çš„Pending Listä¸­ï¼Œæ ‡è®°ä¸ºâ€œå·²è¯»å–ä½†æœªç¡®è®¤â€ã€‚</p></li></ul><p>å¤šæ¶ˆè´¹è€…ç»„çš„æ ¸å¿ƒæ¨¡å‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ˆæ¦‚å¿µç¤ºæ„ï¼‰ï¼š</p><blockquote><p>Streamï¼ˆæ¶ˆæ¯é˜Ÿåˆ—ï¼‰ â†’ æ¶ˆè´¹è€…ç»„Aï¼ˆConsumer1ã€Consumer2ï¼‰ â†’ å„è‡ªPending List</p><pre><code>  â””â†’ æ¶ˆè´¹è€…ç»„Bï¼ˆConsumer3ã€Consumer4ï¼‰ â†’ å„è‡ªPending List</code></pre></blockquote><p>ä¾‹å¦‚ï¼Œä¸€ä¸ªè®¢å•Streamå¯ä»¥åˆ›å»ºâ€œæ”¯ä»˜ç»„â€å’Œâ€œç‰©æµç»„â€ï¼Œæ”¯ä»˜ç»„å¤„ç†è®¢å•æ”¯ä»˜çŠ¶æ€ï¼Œç‰©æµç»„å¤„ç†è®¢å•å‘è´§ï¼Œä¸¤è€…ç‹¬ç«‹æ¶ˆè´¹åŒä¸€æ¡è®¢å•æ¶ˆæ¯ï¼Œäº’ä¸å¹²æ‰°ã€‚</p><h1 id="äºŒã€å…³é”®æœºåˆ¶ï¼šACKç¡®è®¤ä¸Pending-Listæ·±åº¦è§£æ"><a href="#äºŒã€å…³é”®æœºåˆ¶ï¼šACKç¡®è®¤ä¸Pending-Listæ·±åº¦è§£æ" class="headerlink" title="äºŒã€å…³é”®æœºåˆ¶ï¼šACKç¡®è®¤ä¸Pending Listæ·±åº¦è§£æ"></a>äºŒã€å…³é”®æœºåˆ¶ï¼šACKç¡®è®¤ä¸Pending Listæ·±åº¦è§£æ</h1><p>Streamçš„å¯é æ€§ä¾èµ–äº<strong>ACKç¡®è®¤æœºåˆ¶</strong>ï¼Œè€ŒPending Liståˆ™æ˜¯ACKæœºåˆ¶çš„æ ¸å¿ƒè½½ä½“ã€‚è¿™ä¸¤è€…å…±åŒç¡®ä¿æ¶ˆæ¯â€œè‡³å°‘è¢«æ¶ˆè´¹ä¸€æ¬¡â€ï¼ˆAt-Least-Onceï¼‰ï¼Œé¿å…æ¶ˆæ¯ä¸¢å¤±ã€‚</p><h2 id="2-1-ACKç¡®è®¤æœºåˆ¶æµç¨‹"><a href="#2-1-ACKç¡®è®¤æœºåˆ¶æµç¨‹" class="headerlink" title="2.1 ACKç¡®è®¤æœºåˆ¶æµç¨‹"></a>2.1 ACKç¡®è®¤æœºåˆ¶æµç¨‹</h2><p>å½“æ¶ˆè´¹è€…ä»ç»„å†…è·å–æ¶ˆæ¯åï¼Œæ¶ˆæ¯å¹¶ä¸ä¼šç«‹å³ä»Streamä¸­åˆ é™¤ï¼Œè€Œæ˜¯éœ€è¦æ¶ˆè´¹è€…å¤„ç†å®Œæˆåä¸»åŠ¨å‘é€ACKå‘½ä»¤ï¼ˆ<code>XACK</code>ï¼‰ï¼ŒRedisæ‰ä¼šå°†æ¶ˆæ¯ä»è¯¥æ¶ˆè´¹è€…çš„Pending Listä¸­ç§»é™¤ï¼Œæ ‡è®°ä¸ºâ€œå·²å¤„ç†â€ã€‚å…·ä½“æµç¨‹å¦‚ä¸‹ï¼š</p><ol><li><p>æ¶ˆè´¹è€…é€šè¿‡<code>XREADGROUP</code>å‘½ä»¤ä»ç»„å†…è¯»å–æ¶ˆæ¯ï¼ˆå¦‚<code>XREADGROUP GROUP group1 consumer1 COUNT 1 STREAMS stream1 &gt;</code>ï¼Œå…¶ä¸­â€œ&gt;â€è¡¨ç¤ºè¯»å–ç»„å†…æœªè¢«æ¶ˆè´¹è¿‡çš„æ¶ˆæ¯ï¼‰ã€‚</p></li><li><p>Rediså°†æ¶ˆæ¯æ ‡è®°ä¸ºâ€œå·²åˆ†é…ç»™consumer1â€ï¼Œå¹¶åŠ å…¥consumer1çš„Pending Listã€‚</p></li><li><p>æ¶ˆè´¹è€…å¤„ç†æ¶ˆæ¯ï¼ˆå¦‚ä¸šåŠ¡é€»è¾‘è®¡ç®—ã€æ•°æ®åº“å†™å…¥ç­‰ï¼‰ã€‚</p></li><li><p>å¤„ç†æˆåŠŸåï¼Œæ¶ˆè´¹è€…å‘é€<code>XACK stream1 group1 msgId</code>å‘½ä»¤ç¡®è®¤æ¶ˆæ¯ã€‚</p></li><li><p>Redisæ”¶åˆ°ACKåï¼Œä»consumer1çš„Pending Listä¸­åˆ é™¤è¯¥æ¶ˆæ¯ã€‚</p></li></ol><h2 id="2-2-Pending-Listçš„ä½œç”¨ä¸æ ¸å¿ƒæ“ä½œ"><a href="#2-2-Pending-Listçš„ä½œç”¨ä¸æ ¸å¿ƒæ“ä½œ" class="headerlink" title="2.2 Pending Listçš„ä½œç”¨ä¸æ ¸å¿ƒæ“ä½œ"></a>2.2 Pending Listçš„ä½œç”¨ä¸æ ¸å¿ƒæ“ä½œ</h2><p>Pending Listï¼ˆç®€ç§°PENDINGï¼‰æ˜¯æ¯ä¸ªæ¶ˆè´¹è€…ç»„å†…æ¶ˆè´¹è€…ç‹¬æœ‰çš„â€œæœªç¡®è®¤æ¶ˆæ¯åˆ—è¡¨â€ï¼Œå®ƒè§£å†³äº†â€œæ¶ˆæ¯å·²è¯»å–ä½†å¤„ç†å¤±è´¥â€çš„é—®é¢˜ã€‚å½“æ¶ˆè´¹è€…å¤„ç†æ¶ˆæ¯å¼‚å¸¸ï¼ˆå¦‚æœåŠ¡å®•æœºã€ä¸šåŠ¡æŠ¥é”™ï¼‰æ—¶ï¼Œæ¶ˆæ¯ä¼šä¸€ç›´ç•™åœ¨Pending Listä¸­ï¼Œç›´åˆ°è¢«é‡æ–°å¤„ç†å¹¶ACKã€‚</p><div class="tip warning faa-horizontal animated-hover"><p><strong>æ ¸å¿ƒç‰¹æ€§</strong>ï¼šPending Listä¸­çš„æ¶ˆæ¯ä¼šè®°å½•ä¸‰ä¸ªå…³é”®ä¿¡æ¯â€”â€”æ¶ˆæ¯IDã€æ¶ˆè´¹è€…IDã€æœªç¡®è®¤æ—¶é•¿ï¼ˆidle timeï¼‰ï¼Œæ–¹ä¾¿åç»­è¿›è¡Œæ¶ˆæ¯é‡è¯•æˆ–æ­»ä¿¡å¤„ç†ã€‚</p></div><p>æ“ä½œPending Listçš„å¸¸ç”¨å‘½ä»¤ï¼š</p><ul><li><p><code>XPENDING</code>ï¼šæŸ¥çœ‹æ¶ˆè´¹è€…ç»„æˆ–æ¶ˆè´¹è€…çš„Pendingæ¶ˆæ¯ç»Ÿè®¡ï¼Œå¦‚<code>XPENDING stream1 group1</code>å¯æŸ¥çœ‹group1çš„Pendingæ€»æ•°ã€æœ€å°/æœ€å¤§idle timeç­‰ã€‚</p></li><li><p><code>XPENDING stream1 group1 - + 10 consumer1</code>ï¼šæŸ¥çœ‹consumer1çš„å‰10æ¡Pendingæ¶ˆæ¯ï¼ˆâ€œ-â€è¡¨ç¤ºæœ€å°IDï¼Œâ€œ+â€è¡¨ç¤ºæœ€å¤§IDï¼‰ã€‚</p></li><li><p><code>XCLAIM</code>ï¼šå°†Pending Listä¸­çš„æ¶ˆæ¯â€œè®¤é¢†â€ç»™å…¶ä»–æ¶ˆè´¹è€…å¤„ç†ï¼Œé€‚ç”¨äºæ¶ˆè´¹è€…å®•æœºåçš„æ¶ˆæ¯è½¬ç§»ï¼Œå¦‚<code>XCLAIM stream1 group1 consumer2 60000 1690000000000-0</code>ï¼ˆ60000è¡¨ç¤ºidle timeè¶…è¿‡60ç§’çš„æ¶ˆæ¯ï¼‰ã€‚</p></li></ul><h1 id="ä¸‰ã€Javaä¸­çš„å®è·µï¼šä»é˜Ÿåˆ—æ¶ˆè´¹ä¸Pending-Listé‡è¯•"><a href="#ä¸‰ã€Javaä¸­çš„å®è·µï¼šä»é˜Ÿåˆ—æ¶ˆè´¹ä¸Pending-Listé‡è¯•" class="headerlink" title="ä¸‰ã€Javaä¸­çš„å®è·µï¼šä»é˜Ÿåˆ—æ¶ˆè´¹ä¸Pending Listé‡è¯•"></a>ä¸‰ã€Javaä¸­çš„å®è·µï¼šä»é˜Ÿåˆ—æ¶ˆè´¹ä¸Pending Listé‡è¯•</h1><p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡Javaä»£ç æ¼”ç¤ºStreamçš„æ ¸å¿ƒç”¨æ³•ï¼š<strong>å…ˆæ¶ˆè´¹Streamä¸­çš„æ–°æ¶ˆæ¯ï¼Œè‹¥å¤„ç†å¼‚å¸¸åˆ™å°†æ¶ˆæ¯ç•™åœ¨Pending Listï¼Œä¸‹æ¬¡æ¶ˆè´¹å‰å…ˆå¤„ç†Pending Listä¸­çš„æ¶ˆæ¯</strong>ã€‚æˆ‘ä»¬ä½¿ç”¨Spring Data Redisä½œä¸ºå®¢æˆ·ç«¯ï¼ˆéœ€å¼•å…¥ä¾èµ–ï¼š<code>spring-boot-starter-data-redis</code>ï¼‰ã€‚</p><h2 id="3-1-åˆå§‹åŒ–Streamä¸æ¶ˆè´¹è€…ç»„"><a href="#3-1-åˆå§‹åŒ–Streamä¸æ¶ˆè´¹è€…ç»„" class="headerlink" title="3.1 åˆå§‹åŒ–Streamä¸æ¶ˆè´¹è€…ç»„"></a>3.1 åˆå§‹åŒ–Streamä¸æ¶ˆè´¹è€…ç»„</h2><p>é¦–å…ˆéœ€è¦åˆ›å»ºStreamå¹¶åˆå§‹åŒ–æ¶ˆè´¹è€…ç»„ï¼ˆå¯åœ¨é¡¹ç›®å¯åŠ¨æ—¶æ‰§è¡Œï¼‰ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.connection.RedisConnection;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.connection.stream.Consumer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.connection.stream.ObjectRecord;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.connection.stream.ReadOffset;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.connection.stream.StreamInfo;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.RedisTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.PostConstruct;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamInitializer</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> RedisTemplate&lt;String, Object&gt; redisTemplate;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">STREAM_KEY</span> <span class="operator">=</span> <span class="string">&quot;order_stream&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">GROUP_NAME</span> <span class="operator">=</span> <span class="string">&quot;order_group&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">StreamInitializer</span><span class="params">(RedisTemplate&lt;String, Object&gt; redisTemplate)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.redisTemplate = redisTemplate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initStreamAndGroup</span><span class="params">()</span> &#123;</span><br><span class="line">        redisTemplate.execute((RedisConnection connection) -&gt; &#123;</span><br><span class="line">            <span class="comment">// æ£€æŸ¥Streamæ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»ºï¼ˆå¯é€‰ï¼ŒXADDä¼šè‡ªåŠ¨åˆ›å»ºï¼‰</span></span><br><span class="line">            StreamInfo.<span class="type">XInfoStream</span> <span class="variable">info</span> <span class="operator">=</span> connection.streamCommands().xInfoStream(STREAM_KEY.getBytes());</span><br><span class="line">            <span class="keyword">if</span> (info == <span class="literal">null</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;Streamä¸å­˜åœ¨ï¼Œåˆ›å»ºStreamï¼š&quot;</span> + STREAM_KEY);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// æ£€æŸ¥æ¶ˆè´¹è€…ç»„æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»º</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                connection.streamCommands().xInfoGroup(STREAM_KEY.getBytes(), GROUP_NAME.getBytes());</span><br><span class="line">                System.out.println(<span class="string">&quot;æ¶ˆè´¹è€…ç»„å·²å­˜åœ¨ï¼š&quot;</span> + GROUP_NAME);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                <span class="comment">// MKSTREAMé€‰é¡¹ï¼šè‹¥Streamä¸å­˜åœ¨åˆ™åˆ›å»º</span></span><br><span class="line">                connection.streamCommands().xGroupCreate(</span><br><span class="line">                        STREAM_KEY.getBytes(),</span><br><span class="line">                        GROUP_NAME.getBytes(),</span><br><span class="line">                        ReadOffset.latest(),</span><br><span class="line">                        <span class="literal">true</span></span><br><span class="line">                );</span><br><span class="line">                System.out.println(<span class="string">&quot;åˆ›å»ºæ¶ˆè´¹è€…ç»„ï¼š&quot;</span> + GROUP_NAME);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-2-æ¶ˆæ¯ç”Ÿäº§è€…"><a href="#3-2-æ¶ˆæ¯ç”Ÿäº§è€…" class="headerlink" title="3.2 æ¶ˆæ¯ç”Ÿäº§è€…"></a>3.2 æ¶ˆæ¯ç”Ÿäº§è€…</h2><p>æ¨¡æ‹Ÿå‘é€è®¢å•æ¶ˆæ¯åˆ°Streamï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.connection.stream.ObjectRecord;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.RedisTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamProducer</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> RedisTemplate&lt;String, Object&gt; redisTemplate;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">STREAM_KEY</span> <span class="operator">=</span> <span class="string">&quot;order_stream&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">StreamProducer</span><span class="params">(RedisTemplate&lt;String, Object&gt; redisTemplate)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.redisTemplate = redisTemplate;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‘é€è®¢å•æ¶ˆæ¯</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendOrderMessage</span><span class="params">(OrderMessage message)</span> &#123;</span><br><span class="line">        <span class="comment">// ObjectRecordä¼šè‡ªåŠ¨å°†å¯¹è±¡åºåˆ—åŒ–ä¸ºHashï¼ˆéœ€é…ç½®RedisTemplateçš„åºåˆ—åŒ–æ–¹å¼ï¼‰</span></span><br><span class="line">        ObjectRecord&lt;String, OrderMessage&gt; record = ObjectRecord.create(STREAM_KEY, message);</span><br><span class="line">        <span class="comment">// XADDå‘½ä»¤ï¼šæ·»åŠ æ¶ˆæ¯åˆ°Stream</span></span><br><span class="line">        redisTemplate.opsForStream().add(record);</span><br><span class="line">        System.out.println(<span class="string">&quot;å‘é€æ¶ˆæ¯ï¼š&quot;</span> + message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è®¢å•æ¶ˆæ¯å®ä½“</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">OrderMessage</span> &#123;</span><br><span class="line">        <span class="keyword">private</span> String orderId;</span><br><span class="line">        <span class="keyword">private</span> String userId;</span><br><span class="line">        <span class="keyword">private</span> Double amount;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// getterã€setterã€toString</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-3-æ¶ˆæ¯æ¶ˆè´¹è€…ï¼šä¼˜å…ˆå¤„ç†Pending-List"><a href="#3-3-æ¶ˆæ¯æ¶ˆè´¹è€…ï¼šä¼˜å…ˆå¤„ç†Pending-List" class="headerlink" title="3.3 æ¶ˆæ¯æ¶ˆè´¹è€…ï¼šä¼˜å…ˆå¤„ç†Pending List"></a>3.3 æ¶ˆæ¯æ¶ˆè´¹è€…ï¼šä¼˜å…ˆå¤„ç†Pending List</h2><p>æ ¸å¿ƒé€»è¾‘ï¼šæ¶ˆè´¹è€…å¯åŠ¨åï¼Œ<strong>å…ˆå¤„ç†Pending Listä¸­çš„æ¶ˆæ¯</strong>ï¼Œå¤„ç†å®Œåå†æŒç»­æ¶ˆè´¹Streamä¸­çš„æœªè¢«æ¶ˆè´¹çš„æ¶ˆæ¯ï¼›è‹¥å¤„ç†æ¶ˆæ¯å¼‚å¸¸ï¼Œä¸å‘é€ACKï¼Œæ¶ˆæ¯ç•™åœ¨Pending Listä¸‹æ¬¡é‡è¯•ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//å®šä¹‰çº¿ç¨‹æ± </span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">ExecutorService</span> <span class="variable">SAVE_ORDER_EXECUTOR</span> <span class="operator">=</span> Executors.newSingleThreadExecutor();</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯åŠ¨æ—¶æ‰§è¡Œ æŒç»­ç›‘å¬æ¶ˆæ¯é˜Ÿåˆ—</span></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line">        SAVE_ORDER_EXECUTOR.submit(<span class="keyword">new</span> <span class="title class_">VoucherOrderTask</span>());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">class</span> <span class="title class_">VoucherOrderTask</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span>&#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">while</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="comment">//ä»æ¶ˆæ¯é˜Ÿåˆ—é‡Œé¢è¯»å–æ¶ˆæ¯ XREADGROUP GROUP g1 c1 COUNT 1 BLOCK 2000 STREAMS streams.order &gt;</span></span><br><span class="line">                    List&lt;MapRecord&lt;String, Object, Object&gt;&gt; read = stringRedisTemplate.opsForStream().read(</span><br><span class="line">                            Consumer.from(<span class="string">&quot;g1&quot;</span>, <span class="string">&quot;c1&quot;</span>),</span><br><span class="line">                            StreamReadOptions.empty().count(<span class="number">1</span>).block(Duration.ofSeconds(<span class="number">2</span>)),</span><br><span class="line">                            StreamOffset.create(<span class="string">&quot;stream.order&quot;</span>, ReadOffset.lastConsumed())</span><br><span class="line">                    );</span><br><span class="line">                    <span class="keyword">if</span>(read == <span class="literal">null</span> || read.isEmpty())</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="keyword">continue</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">//è·å–æ¶ˆæ¯ å¹¶ä¸”å°†æ¶ˆæ¯è½¬åŒ–ä¸ºè®¢å•</span></span><br><span class="line">                    MapRecord&lt;String, Object, Object&gt; record = read.getFirst();</span><br><span class="line">                    Map&lt;Object, Object&gt; orderMap = record.getValue();</span><br><span class="line">                    <span class="type">VoucherOrder</span> <span class="variable">voucherOrder</span> <span class="operator">=</span> BeanUtil.fillBeanWithMap(orderMap, <span class="keyword">new</span> <span class="title class_">VoucherOrder</span>(), <span class="literal">true</span>);</span><br><span class="line">                    voucherOrderSaveHandler(voucherOrder);</span><br><span class="line">                    <span class="comment">//ç¡®è®¤æ¶ˆæ¯ å‘é€ack</span></span><br><span class="line">                    stringRedisTemplate.opsForStream().acknowledge(<span class="string">&quot;stream.order&quot;</span>,<span class="string">&quot;g1&quot;</span>,record.getId());</span><br><span class="line"></span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                    log.error(<span class="string">&quot;å¤„ç†è®¢å•å¼‚å¸¸&quot;</span>);</span><br><span class="line">                    <span class="comment">//é‡åˆ°å¼‚å¸¸åº”å…ˆå¤„ç†pending listä¸­çš„æ¶ˆæ¯  ç¡®ä¿æ¯ä¸ªæ¶ˆæ¯éƒ½è¢«å¤„ç†ä¸€æ¬¡</span></span><br><span class="line">                    handPendingMessagesList();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">handPendingMessagesList</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="literal">true</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">//ä»pendingé˜Ÿåˆ—é‡Œé¢è·å–å¾…å¤„ç†çš„æ¶ˆæ¯</span></span><br><span class="line">                List&lt;MapRecord&lt;String, Object, Object&gt;&gt; read = stringRedisTemplate.opsForStream().read(</span><br><span class="line">                        Consumer.from(<span class="string">&quot;g1&quot;</span>, <span class="string">&quot;c1&quot;</span>),</span><br><span class="line">                        StreamReadOptions.empty().count(<span class="number">1</span>),</span><br><span class="line">                        StreamOffset.create(<span class="string">&quot;stream.order&quot;</span>, ReadOffset.from(<span class="string">&quot;0&quot;</span>))</span><br><span class="line">                );</span><br><span class="line">                <span class="keyword">if</span>(read == <span class="literal">null</span> || read.isEmpty())</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//è·å–æ¶ˆæ¯ å¹¶ä¸”å°†æ¶ˆæ¯è½¬åŒ–ä¸ºè®¢å•</span></span><br><span class="line">                MapRecord&lt;String, Object, Object&gt; record = read.getFirst();</span><br><span class="line">                Map&lt;Object, Object&gt; orderMap = record.getValue();</span><br><span class="line">                <span class="type">VoucherOrder</span> <span class="variable">voucherOrder</span> <span class="operator">=</span> BeanUtil.fillBeanWithMap(orderMap, <span class="keyword">new</span> <span class="title class_">VoucherOrder</span>(), <span class="literal">true</span>);</span><br><span class="line">                voucherOrderSaveHandler(voucherOrder);</span><br><span class="line">                <span class="comment">//ç¡®è®¤æ¶ˆæ¯ å‘é€ack</span></span><br><span class="line">                stringRedisTemplate.opsForStream().acknowledge(<span class="string">&quot;stream.order&quot;</span>,<span class="string">&quot;g1&quot;</span>,record.getId());</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                log.error(<span class="string">&quot;å¤„ç†pending-listè®¢å•å¼‚å¸¸&quot;</span>);</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">50</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException ex) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(ex);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h1 id="å››ã€æ€»ç»“ä¸æ³¨æ„äº‹é¡¹"><a href="#å››ã€æ€»ç»“ä¸æ³¨æ„äº‹é¡¹" class="headerlink" title="å››ã€æ€»ç»“ä¸æ³¨æ„äº‹é¡¹"></a>å››ã€æ€»ç»“ä¸æ³¨æ„äº‹é¡¹</h1><p>Redis Streamçš„å¤šæ¶ˆè´¹è€…ç»„æ¨¡å¼é€šè¿‡ACKæœºåˆ¶å’ŒPending Listï¼Œå®ç°äº†æ¶ˆæ¯çš„å¯é æ¶ˆè´¹ï¼Œå°¤å…¶é€‚åˆä¸­å°å‹åˆ†å¸ƒå¼ç³»ç»Ÿçš„è½»é‡çº§æ¶ˆæ¯é˜Ÿåˆ—åœºæ™¯ã€‚ä½†åœ¨ä½¿ç”¨æ—¶éœ€æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ul><li><p><strong>æ¶ˆæ¯æŒä¹…åŒ–</strong>ï¼šStreamæ¶ˆæ¯é»˜è®¤æŒä¹…åŒ–åˆ°Redisçš„RDB/AOFä¸­ï¼Œéœ€ç¡®ä¿Redisçš„æŒä¹…åŒ–é…ç½®åˆç†ï¼Œé¿å…å®•æœºä¸¢å¤±æ¶ˆæ¯ã€‚</p></li><li><p><strong>Pending Listç§¯å‹</strong>ï¼šéœ€å®šæœŸç›‘æ§Pending Listçš„æ¶ˆæ¯é‡ï¼Œè‹¥ç§¯å‹è¿‡å¤šï¼Œéœ€æ’æŸ¥æ¶ˆè´¹è€…æ˜¯å¦å¼‚å¸¸ï¼Œå¹¶é€šè¿‡<code>XCLAIM</code>è½¬ç§»æ¶ˆæ¯æˆ–è®¾ç½®æ­»ä¿¡æœºåˆ¶ï¼ˆå¦‚è¶…è¿‡é‡è¯•æ¬¡æ•°åè½¬ç§»åˆ°å…¶ä»–Streamï¼‰ã€‚</p></li><li><p><strong>æ¶ˆè´¹è€…å¼¹æ€§</strong>ï¼šåŒä¸€ä¸ªæ¶ˆè´¹è€…ç»„å†…å¯åŠ¨æ€å¢å‡æ¶ˆè´¹è€…ï¼Œå®ç°è´Ÿè½½å‡è¡¡ï¼Œä½†éœ€é¿å…æ¶ˆè´¹è€…IDé‡å¤ã€‚</p></li><li><p><strong>æ€§èƒ½è€ƒé‡</strong>ï¼šRediså•çº¿ç¨‹å¤„ç†å‘½ä»¤ï¼Œé«˜å¹¶å‘åœºæ™¯ä¸‹éœ€è¯„ä¼°Streamçš„æ¶ˆæ¯ç”Ÿäº§é€Ÿç‡ï¼Œé¿å…Redisæˆä¸ºç“¶é¢ˆï¼ˆå¯ç»“åˆåˆ†ç‰‡æˆ–é›†ç¾¤æ‰©å±•ï¼‰ã€‚</p></li></ul><p>æ€»ä¹‹ï¼ŒRedis Streamä»¥å…¶è½»é‡ã€é«˜æ•ˆã€å¯é çš„ç‰¹æ€§ï¼Œä¸ºåˆ†å¸ƒå¼ç³»ç»Ÿæä¾›äº†ä¸€ç§çµæ´»çš„æ¶ˆæ¯é˜Ÿåˆ—è§£å†³æ–¹æ¡ˆï¼Œå°¤å…¶åœ¨å¤šæ¶ˆè´¹è€…ç»„å’Œæ¶ˆæ¯é‡è¯•åœºæ™¯ä¸‹ï¼Œå±•ç°äº†ç‹¬ç‰¹çš„ä¼˜åŠ¿ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Redis-Streamå¤šæ¶ˆè´¹è€…ç»„æ¨¡å¼ï¼šåŸç†ã€ACKæœºåˆ¶ä¸Javaå®è·µ&quot;&gt;&lt;a href=&quot;#Redis-Streamå¤šæ¶ˆè´¹è€…ç»„æ¨¡å¼ï¼šåŸç†ã€ACKæœºåˆ¶ä¸Javaå®è·µ&quot; class=&quot;headerlink&quot; title=&quot;Redis Streamå¤šæ¶ˆè´¹è€…ç»„æ¨¡å¼ï¼šåŸç†</summary>
      
    
    
    
    
    <category term="redis" scheme="https://nmcb666.vip/tags/redis/"/>
    
  </entry>
  
  <entry>
    <title>Javaä¸­Redissoné”å¯¹äºå¯é‡è¯•çš„å®ç°</title>
    <link href="https://nmcb666.vip/posts/3a74c7b3.html"/>
    <id>https://nmcb666.vip/posts/3a74c7b3.html</id>
    <published>2025-12-02T08:40:27.000Z</published>
    <updated>2025-12-06T11:22:35.704Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Javaä¸­Redissoné”å¯¹äºå¯é‡è¯•çš„å®ç°æ–¹å¼"><a href="#Javaä¸­Redissoné”å¯¹äºå¯é‡è¯•çš„å®ç°æ–¹å¼" class="headerlink" title="Javaä¸­Redissoné”å¯¹äºå¯é‡è¯•çš„å®ç°æ–¹å¼"></a>Javaä¸­Redissoné”å¯¹äºå¯é‡è¯•çš„å®ç°æ–¹å¼</h1><p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œåˆ†å¸ƒå¼é”æ˜¯è§£å†³å¹¶å‘é—®é¢˜çš„å…³é”®å·¥å…·ï¼Œè€ŒRedissonä½œä¸ºåŸºäºRedisçš„Javaå®¢æˆ·ç«¯ï¼Œå…¶æä¾›çš„åˆ†å¸ƒå¼é”å› å…¶é«˜æ•ˆã€å¯é çš„ç‰¹æ€§è¢«å¹¿æ³›åº”ç”¨ã€‚åœ¨å®é™…ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œç”±äºç½‘ç»œæŠ–åŠ¨ã€RedisæœåŠ¡çŸ­æš‚ä¸å¯ç”¨ç­‰åŸå› ï¼Œé”çš„è·å–å¯èƒ½ä¼šå‡ºç°æš‚æ—¶æ€§å¤±è´¥ï¼Œæ­¤æ—¶<strong>å¯é‡è¯•æœºåˆ¶</strong>å°±æ˜¾å¾—å°¤ä¸ºé‡è¦ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨Redissoné”å¯é‡è¯•çš„å®ç°æ–¹å¼ï¼Œä»æ ¸å¿ƒæ€è·¯åˆ°å…·ä½“ä»£ç ï¼Œå†åˆ°æ³¨æ„äº‹é¡¹ï¼Œä¸ºå¤§å®¶æ¢³ç†è¿™ä¸€å®ç”¨ç‰¹æ€§çš„æ¥é¾™å»è„‰ã€‚</p><h2 id="ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦Redissoné”çš„å¯é‡è¯•æœºåˆ¶ï¼Ÿ"><a href="#ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦Redissoné”çš„å¯é‡è¯•æœºåˆ¶ï¼Ÿ" class="headerlink" title="ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦Redissoné”çš„å¯é‡è¯•æœºåˆ¶ï¼Ÿ"></a>ä¸€ã€ä¸ºä»€ä¹ˆéœ€è¦Redissoné”çš„å¯é‡è¯•æœºåˆ¶ï¼Ÿ</h2><p>åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼Œè·å–Redissoné”å¤±è´¥å¹¶ä¸æ€»æ˜¯æ„å‘³ç€â€œé”è¢«å ç”¨â€ï¼Œè¿˜å¯èƒ½æ˜¯ç”±ä»¥ä¸‹æš‚æ—¶æ€§å› ç´ å¯¼è‡´ï¼š</p><ul><li><p><strong>ç½‘ç»œæ³¢åŠ¨</strong>ï¼šå®¢æˆ·ç«¯ä¸RedisæœåŠ¡å™¨ä¹‹é—´çš„ç½‘ç»œè¿æ¥å‡ºç°çŸ­æš‚ä¸ç¨³å®šï¼Œå¯¼è‡´é”è¯·æ±‚è¶…æ—¶ã€‚</p></li><li><p><strong>RedisæœåŠ¡è´Ÿè½½è¿‡é«˜</strong>ï¼šRedisåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹å¤„ç†è¯·æ±‚çš„é€Ÿåº¦å˜æ…¢ï¼Œä½¿å¾—é”è·å–æ“ä½œæœªèƒ½åœ¨é¢„æœŸæ—¶é—´å†…å®Œæˆã€‚</p></li><li><p><strong>é”ç«äº‰æ¿€çƒˆ</strong>ï¼šå¤šä¸ªå®¢æˆ·ç«¯åŒæ—¶ç«äº‰åŒä¸€æŠŠé”ï¼Œå½“å‰å®¢æˆ·ç«¯ç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶é”æ­£è¢«å ç”¨ï¼Œä½†çŸ­æ—¶é—´å†…é”å°±ä¼šè¢«é‡Šæ”¾ã€‚</p></li></ul><p>å¦‚æœæ­¤æ—¶ç›´æ¥è¿”å›å¤±è´¥ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¸šåŠ¡æµç¨‹ä¸­æ–­ï¼Œå½±å“ç³»ç»Ÿçš„å¯ç”¨æ€§å’Œç”¨æˆ·ä½“éªŒã€‚è€Œå¯é‡è¯•æœºåˆ¶èƒ½å¤Ÿè®©å®¢æˆ·ç«¯åœ¨ä¸€å®šæ¡ä»¶ä¸‹é‡å¤å°è¯•è·å–é”ï¼Œä»è€Œè§„é¿ä¸Šè¿°æš‚æ—¶æ€§é—®é¢˜ï¼Œæé«˜é”è·å–çš„æˆåŠŸç‡ã€‚</p><h2 id="äºŒã€Redissoné”å¯é‡è¯•å®ç°çš„æ ¸å¿ƒæ€è·¯"><a href="#äºŒã€Redissoné”å¯é‡è¯•å®ç°çš„æ ¸å¿ƒæ€è·¯" class="headerlink" title="äºŒã€Redissoné”å¯é‡è¯•å®ç°çš„æ ¸å¿ƒæ€è·¯"></a>äºŒã€Redissoné”å¯é‡è¯•å®ç°çš„æ ¸å¿ƒæ€è·¯</h2><p>Redissoné”çš„å¯é‡è¯•å¹¶éç®€å•å¾ªç¯+å›ºå®šç­‰å¾…ï¼Œè€Œæ˜¯åŸºäº<strong>â€œRediså‘å¸ƒè®¢é˜…çš„ç­‰å¾…-å”¤é†’æœºåˆ¶â€</strong>å®ç°ï¼Œæ ¸å¿ƒæ˜¯é¿å…æ— æ„ä¹‰çš„è½®è¯¢ï¼Œå‡å°‘èµ„æºæ¶ˆè€—ã€‚å…¶æœ¬è´¨æ˜¯ç»“åˆ<code>tryLock</code>çš„é˜»å¡ç­‰å¾…é€»è¾‘ä¸Redisçš„æ¶ˆæ¯é€šçŸ¥ï¼Œå…·ä½“æ‹†è§£ä¸ºä»¥ä¸‹æ­¥éª¤ï¼š</p><ol><li><p><strong>åˆå§‹å°è¯•è·å–é”</strong>ï¼šå®¢æˆ·ç«¯é€šè¿‡<code>SET NX</code>å‘½ä»¤å°è¯•è·å–é”ï¼Œè‹¥æˆåŠŸåˆ™è¿”å›é”å®ä¾‹ï¼ŒåŒæ—¶è®°å½•é”çš„ç§ŸæœŸ(å¦‚æœè¿˜éœ€è¦å®ç°å¯é‡å…¥åˆ™éœ€è¦ç”¨Hashç»“æ„å»è®°å½•é”çš„æŒæœ‰è€…ä»¥åŠé”çš„æ•°é‡ï¼Œè¿™é‡Œé»˜è®¤ä¸æ”¯æŒå¯é‡å…¥)ã€‚</p></li><li><p><strong>å¤±è´¥åˆ™è®¢é˜…é”é‡Šæ”¾é€šçŸ¥</strong>ï¼šè‹¥é”å·²è¢«å ç”¨ï¼Œå®¢æˆ·ç«¯ä¸ä¼šç«‹å³é‡è¯•ï¼Œè€Œæ˜¯é€šè¿‡Redisçš„<code>SUBSCRIBE</code>å‘½ä»¤è®¢é˜…è¯¥é”çš„é‡Šæ”¾é€šçŸ¥é¢‘é“ï¼ˆå¦‚<code>redisson_lock__channel:&#123;lockKey&#125;</code>ï¼‰ã€‚</p></li><li><p><strong>é˜»å¡ç­‰å¾…é€šçŸ¥æˆ–è¶…æ—¶</strong>ï¼šå®¢æˆ·ç«¯è¿›å…¥é˜»å¡çŠ¶æ€ï¼Œç­‰å¾…ä¸¤ä¸ªè§¦å‘æ¡ä»¶ä¹‹ä¸€ï¼šâ‘  æ”¶åˆ°é”é‡Šæ”¾çš„<code>PUBLISH</code>é€šçŸ¥ï¼›â‘¡ è¾¾åˆ°é¢„è®¾çš„æœ€å¤§ç­‰å¾…æ—¶é—´ï¼ˆ<code>waitTime</code>ï¼‰ã€‚</p></li><li><p><strong>å”¤é†’åé‡è¯•æˆ–ç»ˆæ­¢</strong>ï¼šè‹¥æ”¶åˆ°é‡Šæ”¾é€šçŸ¥ï¼Œå®¢æˆ·ç«¯ç«‹å³å”¤é†’å¹¶é‡æ–°å°è¯•è·å–é”ï¼›è‹¥ç­‰å¾…è¶…æ—¶ï¼Œåˆ™ç»ˆæ­¢é‡è¯•å¹¶è¿”å›å¤±è´¥ã€‚</p></li></ol><div class="tip warning faa-horizontal animated"><p>å…³é”®åœ¨äºâ€œç²¾å‡†å”¤é†’â€è€Œéâ€œç›²ç›®é‡è¯•â€ï¼šé€šè¿‡Redisçš„å‘å¸ƒè®¢é˜…æœºåˆ¶ï¼Œåªæœ‰å½“é”çœŸæ­£é‡Šæ”¾æ—¶æ‰è§¦å‘é‡è¯•ï¼Œæ—¢å‡å°‘äº†Redisçš„è¯·æ±‚å‹åŠ›ï¼Œåˆèƒ½ä¿è¯é‡è¯•çš„åŠæ—¶æ€§ã€‚</p></div><h2 id="ä¸‰ã€Redissoné”å¯é‡è¯•çš„åº•å±‚å®ç°ä¸æ‰‹åŠ¨å°è£…"><a href="#ä¸‰ã€Redissoné”å¯é‡è¯•çš„åº•å±‚å®ç°ä¸æ‰‹åŠ¨å°è£…" class="headerlink" title="ä¸‰ã€Redissoné”å¯é‡è¯•çš„åº•å±‚å®ç°ä¸æ‰‹åŠ¨å°è£…"></a>ä¸‰ã€Redissoné”å¯é‡è¯•çš„åº•å±‚å®ç°ä¸æ‰‹åŠ¨å°è£…</h2><p>Redissonçš„åŸç”Ÿ<code>tryLock(waitTime, leaseTime, TimeUnit)</code>æ–¹æ³•å·²å†…ç½®â€œç­‰å¾…-å”¤é†’â€çš„å¯é‡è¯•é€»è¾‘ï¼Œå…¶åº•å±‚é€šè¿‡<code>RedissonLock#tryAcquireAsync</code>å®ç°å¼‚æ­¥è·å–+é€šçŸ¥è®¢é˜…ã€‚æˆ‘ä»¬æ— éœ€é‡å¤å¼€å‘æ ¸å¿ƒæœºåˆ¶ï¼Œåªéœ€åŸºäºåŸç”Ÿæ–¹æ³•å°è£…ä¸šåŠ¡çº§çš„é‡è¯•ç­–ç•¥ï¼ˆå¦‚æ€»è¶…æ—¶æ§åˆ¶ã€å¤šè½®ç­‰å¾…ç­‰ï¼‰ï¼Œä»¥ä¸‹æ˜¯å…·ä½“å®ç°ã€‚</p><h3 id="æ–¹å¼ä¸€ï¼šåŸºäºåŸç”ŸtryLockçš„å¤šè½®ç­‰å¾…å°è£…"><a href="#æ–¹å¼ä¸€ï¼šåŸºäºåŸç”ŸtryLockçš„å¤šè½®ç­‰å¾…å°è£…" class="headerlink" title="æ–¹å¼ä¸€ï¼šåŸºäºåŸç”ŸtryLockçš„å¤šè½®ç­‰å¾…å°è£…"></a>æ–¹å¼ä¸€ï¼šåŸºäºåŸç”ŸtryLockçš„å¤šè½®ç­‰å¾…å°è£…</h3><p>RedissonåŸç”Ÿ<code>tryLock(waitTime, ...)</code>å·²å®ç°â€œç­‰å¾…é€šçŸ¥+å•æ¬¡é‡è¯•â€ï¼Œè‹¥éœ€æ”¯æŒå¤šè½®ç­‰å¾…ï¼ˆå¦‚æ€»ç­‰å¾…æ—¶é—´è¾ƒé•¿æ—¶ï¼‰ï¼Œå¯å°è£…å¤šè½®<code>tryLock</code>è°ƒç”¨ï¼Œæ¯è½®åˆ©ç”¨åŸç”Ÿçš„ç­‰å¾…-å”¤é†’æœºåˆ¶ï¼Œé¿å…å›ºå®šä¼‘çœ ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.redisson.api.RLock;</span><br><span class="line"><span class="keyword">import</span> org.redisson.api.RedissonClient;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.atomic.AtomicLong;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RedissonLockRetryDemo</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> RedissonClient redissonClient;</span><br><span class="line">    <span class="comment">// æ€»æœ€å¤§ç­‰å¾…æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">TOTAL_MAX_WAIT_MS</span> <span class="operator">=</span> <span class="number">3000</span>;</span><br><span class="line">    <span class="comment">// æ¯è½®ç­‰å¾…æ—¶é—´ï¼ˆåˆ©ç”¨åŸç”ŸtryLockçš„ç­‰å¾…-å”¤é†’ï¼‰</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">PER_ROUND_WAIT_MS</span> <span class="operator">=</span> <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">RedissonLockRetryDemo</span><span class="params">(RedissonClient redissonClient)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.redissonClient = redissonClient;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åŸºäºåŸç”ŸtryLockç­‰å¾…-å”¤é†’çš„å¤šè½®é‡è¯•å°è£…</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> lockKey é”é”®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> leaseTime é”ç§ŸæœŸ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> unit æ—¶é—´å•ä½</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> é”å®ä¾‹ï¼Œè‹¥è·å–å¤±è´¥åˆ™è¿”å›null</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> RLock <span class="title function_">tryLockWithRetry</span><span class="params">(String lockKey, <span class="type">long</span> leaseTime, TimeUnit unit)</span> &#123;</span><br><span class="line">        <span class="type">RLock</span> <span class="variable">lock</span> <span class="operator">=</span> redissonClient.getLock(lockKey);</span><br><span class="line">        <span class="type">AtomicLong</span> <span class="variable">remainingWaitMs</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AtomicLong</span>(TOTAL_MAX_WAIT_MS);</span><br><span class="line">        <span class="type">long</span> <span class="variable">startTimestamp</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (remainingWaitMs.get() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="comment">// æ¯è½®è°ƒç”¨åŸç”ŸtryLockï¼Œåˆ©ç”¨å…¶ç­‰å¾…-å”¤é†’æœºåˆ¶</span></span><br><span class="line">                <span class="type">boolean</span> <span class="variable">locked</span> <span class="operator">=</span> lock.tryLock(remainingWaitMs.get(), leaseTime, unit);</span><br><span class="line">                <span class="keyword">if</span> (locked) &#123;</span><br><span class="line">                    <span class="type">long</span> <span class="variable">usedWaitMs</span> <span class="operator">=</span> System.currentTimeMillis() - startTimestamp;</span><br><span class="line">                    System.out.println(<span class="string">&quot;è·å–é”æˆåŠŸï¼Œç´¯è®¡ç­‰å¾…æ—¶é—´ï¼š&quot;</span> + usedWaitMs + <span class="string">&quot;ms&quot;</span>);</span><br><span class="line">                    <span class="keyword">return</span> lock;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// æ›´æ–°å‰©ä½™ç­‰å¾…æ—¶é—´ï¼ˆé¿å…æ€»ç­‰å¾…è¶…æ—¶ï¼‰</span></span><br><span class="line">                remainingWaitMs.addAndGet(-PER_ROUND_WAIT_MS);</span><br><span class="line">                System.out.println(<span class="string">&quot;æœ¬è½®ç­‰å¾…è¶…æ—¶ï¼Œå‰©ä½™ç­‰å¾…æ—¶é—´ï¼š&quot;</span> + remainingWaitMs.get() + <span class="string">&quot;ms&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                Thread.currentThread().interrupt();</span><br><span class="line">                System.out.println(<span class="string">&quot;è·å–é”è¿‡ç¨‹è¢«ä¸­æ–­&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ€»ç­‰å¾…æ—¶é—´å·²è€—å°½ï¼Œè·å–é”å¤±è´¥&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šè¿°ä»£ç ä¸­ï¼Œ<strong><code>tryLock</code></strong> <strong>æ ¸å¿ƒæ˜¯å¤ç”¨RedissonåŸç”Ÿçš„ç­‰å¾…é€»è¾‘</strong>ï¼šæ¯è½®è°ƒç”¨<code>tryLock(remainingWaitMs, ...)</code>æ—¶ï¼Œå®¢æˆ·ç«¯ä¼šè®¢é˜…é”é‡Šæ”¾é€šçŸ¥å¹¶é˜»å¡ï¼Œç›´åˆ°æ”¶åˆ°é€šçŸ¥ï¼ˆç«‹å³é‡è¯•ï¼‰æˆ–æœ¬è½®ç­‰å¾…è¶…æ—¶ã€‚é€šè¿‡<code>remainingWaitMs</code>æ§åˆ¶æ€»ç­‰å¾…æ—¶é—´ï¼Œæ—¢ä¿è¯äº†â€œç²¾å‡†å”¤é†’â€ï¼Œåˆå®ç°äº†ä¸šåŠ¡çº§çš„å¤šè½®é‡è¯•æ§åˆ¶ã€‚</p><h3 id="æ–¹å¼äºŒï¼šç†è§£RedissonåŸç”Ÿç­‰å¾…-å”¤é†’çš„åº•å±‚é€»è¾‘"><a href="#æ–¹å¼äºŒï¼šç†è§£RedissonåŸç”Ÿç­‰å¾…-å”¤é†’çš„åº•å±‚é€»è¾‘" class="headerlink" title="æ–¹å¼äºŒï¼šç†è§£RedissonåŸç”Ÿç­‰å¾…-å”¤é†’çš„åº•å±‚é€»è¾‘"></a>æ–¹å¼äºŒï¼šç†è§£RedissonåŸç”Ÿç­‰å¾…-å”¤é†’çš„åº•å±‚é€»è¾‘</h3><p>ä¸ºæ›´æ·±å…¥ç†è§£â€œç­‰å¾…-å”¤é†’â€æœºåˆ¶ï¼Œä»¥ä¸‹ç®€è¦åˆ†æRedissonLockçš„åº•å±‚å®ç°æµç¨‹ï¼ˆåŸºäºRedisson 3.xç‰ˆæœ¬ï¼‰ï¼Œå¸®åŠ©æˆ‘ä»¬æ›´åˆç†åœ°ä½¿ç”¨å¯é‡è¯•åŠŸèƒ½ï¼š</p><h4 id="1-é”è·å–å¤±è´¥åçš„è®¢é˜…é€»è¾‘"><a href="#1-é”è·å–å¤±è´¥åçš„è®¢é˜…é€»è¾‘" class="headerlink" title="1. é”è·å–å¤±è´¥åçš„è®¢é˜…é€»è¾‘"></a>1. é”è·å–å¤±è´¥åçš„è®¢é˜…é€»è¾‘</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// RedissonLock#tryAcquireAsyncç®€åŒ–é€»è¾‘</span></span><br><span class="line"><span class="keyword">private</span> CompletableFuture&lt;Boolean&gt; <span class="title function_">tryAcquireAsync</span><span class="params">(<span class="type">long</span> waitTime, <span class="type">long</span> leaseTime, TimeUnit unit)</span> &#123;</span><br><span class="line">    <span class="comment">// 1. å°è¯•è·å–é”</span></span><br><span class="line">    CompletableFuture&lt;Boolean&gt; acquiredFuture = tryLockInnerAsync(waitTime, leaseTime, unit);</span><br><span class="line">    <span class="keyword">return</span> acquiredFuture.thenCompose(acquired -&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (acquired) &#123;</span><br><span class="line">            <span class="keyword">return</span> CompletableFuture.completedFuture(<span class="literal">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 2. è·å–å¤±è´¥ï¼Œè®¢é˜…é”é‡Šæ”¾é€šçŸ¥</span></span><br><span class="line">        <span class="keyword">return</span> subscribeToLockRelease(waitTime, unit);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¢é˜…é”é‡Šæ”¾é¢‘é“</span></span><br><span class="line"><span class="keyword">private</span> CompletableFuture&lt;Boolean&gt; <span class="title function_">subscribeToLockRelease</span><span class="params">(<span class="type">long</span> waitTime, TimeUnit unit)</span> &#123;</span><br><span class="line">    <span class="type">RTopic</span> <span class="variable">topic</span> <span class="operator">=</span> redisson.getTopic(getChannelName()); <span class="comment">// é¢‘é“åï¼šredisson_lock__channel:&#123;lockKey&#125;</span></span><br><span class="line">    CompletableFuture&lt;Boolean&gt; future = <span class="keyword">new</span> <span class="title class_">CompletableFuture</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">// è®¢é˜…æ¶ˆæ¯ï¼Œæ”¶åˆ°é€šçŸ¥åå®Œæˆfuture</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">listenerId</span> <span class="operator">=</span> topic.addListener(String.class, (channel, message) -&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (message.equals(getLockName())) &#123; <span class="comment">// éªŒè¯æ˜¯å½“å‰é”çš„é‡Šæ”¾é€šçŸ¥</span></span><br><span class="line">            topic.removeListener(listenerId);</span><br><span class="line">            future.complete(<span class="literal">true</span>); <span class="comment">// å”¤é†’ç­‰å¾…çš„çº¿ç¨‹</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// 3. åŒæ—¶è®¾ç½®è¶…æ—¶ä»»åŠ¡ï¼Œé¿å…æ— é™ç­‰å¾…</span></span><br><span class="line">    scheduleTimeout(future, waitTime, unit, listenerId, topic);</span><br><span class="line">    <span class="keyword">return</span> future.thenCompose(ignored -&gt; &#123;</span><br><span class="line">        <span class="comment">// 4. è¢«å”¤é†’åé‡æ–°å°è¯•è·å–é”</span></span><br><span class="line">        <span class="keyword">return</span> tryAcquireAsync(waitTime - usedTime, leaseTime, unit);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-é”é‡Šæ”¾æ—¶çš„é€šçŸ¥é€»è¾‘"><a href="#2-é”é‡Šæ”¾æ—¶çš„é€šçŸ¥é€»è¾‘" class="headerlink" title="2. é”é‡Šæ”¾æ—¶çš„é€šçŸ¥é€»è¾‘"></a>2. é”é‡Šæ”¾æ—¶çš„é€šçŸ¥é€»è¾‘</h4><p>å½“æŒæœ‰é”çš„å®¢æˆ·ç«¯é‡Šæ”¾é”æ—¶ï¼Œä¼šé€šè¿‡<code>PUBLISH</code>å‘½ä»¤å‘å¯¹åº”é¢‘é“å‘é€é€šçŸ¥ï¼Œå”¤é†’æ‰€æœ‰è®¢é˜…çš„ç­‰å¾…çº¿ç¨‹ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// RedissonLock#unlockAsyncç®€åŒ–é€»è¾‘</span></span><br><span class="line"><span class="keyword">public</span> CompletableFuture&lt;Void&gt; <span class="title function_">unlockAsync</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 1. é‡Šæ”¾é”ï¼ˆåˆ é™¤Redisä¸­çš„é”é”®ï¼‰</span></span><br><span class="line">    CompletableFuture&lt;Boolean&gt; releaseFuture = unlockInnerAsync();</span><br><span class="line">    <span class="keyword">return</span> releaseFuture.thenAccept(released -&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> (released) &#123;</span><br><span class="line">            <span class="comment">// 2. å‘å¸ƒé”é‡Šæ”¾é€šçŸ¥</span></span><br><span class="line">            <span class="type">RTopic</span> <span class="variable">topic</span> <span class="operator">=</span> redisson.getTopic(getChannelName());</span><br><span class="line">            topic.publish(getLockName()); <span class="comment">// å‘é€å½“å‰é”çš„æ ‡è¯†</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-æ ¸å¿ƒä¼˜åŠ¿æ€»ç»“"><a href="#3-æ ¸å¿ƒä¼˜åŠ¿æ€»ç»“" class="headerlink" title="3. æ ¸å¿ƒä¼˜åŠ¿æ€»ç»“"></a>3. æ ¸å¿ƒä¼˜åŠ¿æ€»ç»“</h4><figure class="highlight plaintext"><figcaption><span>Text</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">// åŸç”ŸtryLockçš„æ ¸å¿ƒä»·å€¼</span><br><span class="line">1. æ— è½®è¯¢ï¼šç­‰å¾…æœŸé—´çº¿ç¨‹é˜»å¡ï¼Œä¸æ¶ˆè€—CPUèµ„æº</span><br><span class="line">2. ç²¾å‡†å”¤é†’ï¼šä»…å½“é”é‡Šæ”¾æ—¶æ‰è§¦å‘é‡è¯•ï¼Œå“åº”åŠæ—¶</span><br><span class="line">3. è‡ªåŠ¨è¶…æ—¶ï¼šé¿å…å› é€šçŸ¥ä¸¢å¤±å¯¼è‡´çš„æ— é™ç­‰å¾…</span><br><span class="line">4. å¼‚æ­¥éé˜»å¡ï¼šåº•å±‚åŸºäºNettyå®ç°å¼‚æ­¥æ“ä½œï¼Œæ€§èƒ½é«˜æ•ˆ</span><br></pre></td></tr></table></figure><p>åŸºäºä¸Šè¿°åº•å±‚é€»è¾‘ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨Redissoné”å¯é‡è¯•åŠŸèƒ½æ—¶ï¼Œéœ€é‡ç‚¹å…³æ³¨ä»¥ä¸‹å‚æ•°è®¾è®¡ï¼š</p><ul><li><p><code>waitTime</code>ï¼šå•è½®æœ€å¤§ç­‰å¾…æ—¶é—´ï¼ˆéå›ºå®šç­‰å¾…ï¼‰ï¼Œå»ºè®®è®¾ä¸ºä¸šåŠ¡å¯æ¥å—çš„å•æ¬¡é˜»å¡æ—¶é•¿ï¼Œå¦‚1ç§’ï¼›</p></li><li><p><code>totalWaitTime</code>ï¼šä¸šåŠ¡çº§æ€»ç­‰å¾…æ—¶é—´ï¼Œé€šè¿‡å¤šè½®<code>tryLock</code>ç´¯åŠ æ§åˆ¶ï¼Œé¿å…æ•´ä½“è¶…æ—¶ï¼›</p></li><li><p><code>leaseTime</code>ï¼šé”ç§ŸæœŸï¼Œéœ€å¤§äºä¸šåŠ¡æ‰§è¡Œæ—¶é—´ï¼Œå»ºè®®ç»“åˆ<code>lockWatchdogTimeout</code>ï¼ˆçœ‹é—¨ç‹—æœºåˆ¶ï¼‰è‡ªåŠ¨ç»­æœŸï¼Œé¿å…é”æå‰é‡Šæ”¾ã€‚</p></li></ul><h2 id="å››ã€Redissoné”å¯é‡è¯•å®ç°çš„æ³¨æ„äº‹é¡¹"><a href="#å››ã€Redissoné”å¯é‡è¯•å®ç°çš„æ³¨æ„äº‹é¡¹" class="headerlink" title="å››ã€Redissoné”å¯é‡è¯•å®ç°çš„æ³¨æ„äº‹é¡¹"></a>å››ã€Redissoné”å¯é‡è¯•å®ç°çš„æ³¨æ„äº‹é¡¹</h2><p>åœ¨å®ç°Redissoné”çš„å¯é‡è¯•æœºåˆ¶æ—¶ï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼Œä»¥ç¡®ä¿ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œæ­£ç¡®æ€§ï¼š</p><h3 id="1-åˆç†è®¾ç½®é‡è¯•å‚æ•°"><a href="#1-åˆç†è®¾ç½®é‡è¯•å‚æ•°" class="headerlink" title="1. åˆç†è®¾ç½®é‡è¯•å‚æ•°"></a>1. åˆç†è®¾ç½®é‡è¯•å‚æ•°</h3><p>é‡è¯•æ¬¡æ•°å’Œç­‰å¾…æ—¶é—´éœ€è¦æ ¹æ®ä¸šåŠ¡åœºæ™¯è¿›è¡Œè°ƒæ•´ï¼š</p><ul><li><p>è‹¥ä¸šåŠ¡å¯¹å“åº”æ—¶é—´æ•æ„Ÿï¼Œåº”å‡å°‘é‡è¯•æ¬¡æ•°å’Œç­‰å¾…æ—¶é—´ï¼›</p></li><li><p>è‹¥é”ç«äº‰æ¿€çƒˆæˆ–ç½‘ç»œä¸ç¨³å®šï¼Œå¯é€‚å½“å¢åŠ é‡è¯•æ¬¡æ•°ï¼Œå¹¶é‡‡ç”¨æŒ‡æ•°é€€é¿ç­‰ç­–ç•¥å»¶é•¿ç­‰å¾…æ—¶é—´ã€‚</p></li></ul><h3 id="2-é¿å…æ­»é”é£é™©"><a href="#2-é¿å…æ­»é”é£é™©" class="headerlink" title="2. é¿å…æ­»é”é£é™©"></a>2. é¿å…æ­»é”é£é™©</h3><p>Redissoné”æœ¬èº«å…·æœ‰è‡ªåŠ¨è¿‡æœŸæœºåˆ¶ï¼ˆ<code>leaseTime</code>ï¼‰ï¼Œå¯ä»¥é¿å…æ­»é”ï¼Œä½†åœ¨é‡è¯•è¿‡ç¨‹ä¸­ä»éœ€æ³¨æ„ï¼š</p><ul><li><p>ç¡®ä¿æ¯æ¬¡è·å–é”åéƒ½æœ‰å¯¹åº”çš„é‡Šæ”¾æ“ä½œï¼ˆå»ºè®®ä½¿ç”¨<code>try-finally</code>å—ï¼‰ï¼›</p></li><li><p>ä¸è¦åœ¨é‡è¯•è¿‡ç¨‹ä¸­æŒæœ‰å…¶ä»–èµ„æºï¼Œä»¥å…é‡è¯•å¤±è´¥æ—¶å¯¼è‡´èµ„æºæ³„æ¼ã€‚</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// æ­£ç¡®çš„é”é‡Šæ”¾æ–¹å¼</span></span><br><span class="line"><span class="type">RLock</span> <span class="variable">lock</span> <span class="operator">=</span> tryLockWithRetry(<span class="string">&quot;testLock&quot;</span>, <span class="number">5</span>, TimeUnit.SECONDS);</span><br><span class="line"><span class="keyword">if</span> (lock != <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// ä¸šåŠ¡é€»è¾‘</span></span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        lock.unlock();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3-è€ƒè™‘Redisé›†ç¾¤çš„ä¸€è‡´æ€§"><a href="#3-è€ƒè™‘Redisé›†ç¾¤çš„ä¸€è‡´æ€§" class="headerlink" title="3. è€ƒè™‘Redisé›†ç¾¤çš„ä¸€è‡´æ€§"></a>3. è€ƒè™‘Redisé›†ç¾¤çš„ä¸€è‡´æ€§</h3><p>åœ¨Redisé›†ç¾¤ç¯å¢ƒä¸‹ï¼ŒRedissoné”çš„å®ç°åŸºäºRedisçš„<code>SET NX</code>å‘½ä»¤ï¼Œè‹¥é‡‡ç”¨ä¸»ä»å¤åˆ¶æ¶æ„ï¼Œä¸»èŠ‚ç‚¹å®•æœºå¯èƒ½å¯¼è‡´é”ä¿¡æ¯æœªåŒæ­¥åˆ°ä»èŠ‚ç‚¹ï¼Œä»è€Œå‡ºç°â€œé”ä¸¢å¤±â€é—®é¢˜ã€‚æ­¤æ—¶å¯è€ƒè™‘ä½¿ç”¨Redissonçš„<code>RedissonRedLock</code>ï¼ˆçº¢é”ï¼‰ï¼Œå®ƒé€šè¿‡åœ¨å¤šä¸ªç‹¬ç«‹çš„RedisèŠ‚ç‚¹ä¸Šè·å–é”ï¼Œæé«˜é”çš„å¯é æ€§ï¼Œä½†ä¼šå¢åŠ æ€§èƒ½å¼€é”€ï¼Œéœ€æ ¹æ®ä¸šåŠ¡åœºæ™¯æƒè¡¡ã€‚</p><h3 id="4-ç›‘æ§é‡è¯•-metrics"><a href="#4-ç›‘æ§é‡è¯•-metrics" class="headerlink" title="4. ç›‘æ§é‡è¯• metrics"></a>4. ç›‘æ§é‡è¯• metrics</h3><p>åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå»ºè®®å¯¹é”çš„é‡è¯•æƒ…å†µè¿›è¡Œç›‘æ§ï¼Œè®°å½•é‡è¯•æ¬¡æ•°ã€æˆåŠŸç‡ã€å¤±è´¥åŸå› ç­‰metricsï¼Œä»¥ä¾¿åŠæ—¶å‘ç°é—®é¢˜å¹¶è°ƒæ•´é‡è¯•ç­–ç•¥ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨Prometheus + Grafanaç›‘æ§é‡è¯•ç›¸å…³æŒ‡æ ‡ã€‚</p><h2 id="äº”ã€æ€»ç»“"><a href="#äº”ã€æ€»ç»“" class="headerlink" title="äº”ã€æ€»ç»“"></a>äº”ã€æ€»ç»“</h2><p>Redissoné”çš„å¯é‡è¯•æœºåˆ¶æ˜¯åº”å¯¹åˆ†å¸ƒå¼ç¯å¢ƒä¸­æš‚æ—¶æ€§é—®é¢˜çš„æœ‰æ•ˆæ‰‹æ®µï¼Œé€šè¿‡â€œå¾ªç¯å°è¯• + æ¡ä»¶åˆ¤æ–­ + ç­‰å¾…ç­–ç•¥â€çš„æ ¸å¿ƒæ€è·¯ï¼Œç»“åˆæ‰‹åŠ¨å®ç°æˆ–Spring Retryæ¡†æ¶ï¼Œèƒ½å¤Ÿçµæ´»æ»¡è¶³ä¸åŒä¸šåŠ¡åœºæ™¯çš„éœ€æ±‚ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œéœ€åˆç†è®¾ç½®é‡è¯•å‚æ•°ã€é¿å…æ­»é”é£é™©ã€è€ƒè™‘Redisé›†ç¾¤ä¸€è‡´æ€§ï¼Œå¹¶åŠ å¼ºç›‘æ§ï¼Œä»¥ç¡®ä¿å¯é‡è¯•æœºåˆ¶çš„é«˜æ•ˆä¸å¯é ã€‚</p><p>å¸Œæœ›æœ¬æ–‡çš„æ€è€ƒèƒ½å¤Ÿä¸ºå¤§å®¶åœ¨ä½¿ç”¨Redissoné”æ—¶æä¾›ä¸€äº›å¸®åŠ©ï¼Œè‹¥æœ‰ä¸åŒçš„è§è§£æˆ–æ›´å¥½çš„å®ç°æ–¹å¼ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµè®¨è®ºï¼</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Javaä¸­Redissoné”å¯¹äºå¯é‡è¯•çš„å®ç°æ–¹å¼&quot;&gt;&lt;a href=&quot;#Javaä¸­Redissoné”å¯¹äºå¯é‡è¯•çš„å®ç°æ–¹å¼&quot; class=&quot;headerlink&quot; title=&quot;Javaä¸­Redissoné”å¯¹äºå¯é‡è¯•çš„å®ç°æ–¹å¼&quot;&gt;&lt;/a&gt;Javaä¸­Redissoné”</summary>
      
    
    
    
    
    <category term="redis" scheme="https://nmcb666.vip/tags/redis/"/>
    
  </entry>
  
  <entry>
    <title>windows11å®‰è£…docker</title>
    <link href="https://nmcb666.vip/posts/fd5326b3.html"/>
    <id>https://nmcb666.vip/posts/fd5326b3.html</id>
    <published>2025-09-28T14:13:48.000Z</published>
    <updated>2025-12-06T11:22:35.704Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Windows-11ä¸‹å®‰è£…Dockerå¹¶ä¿®æ”¹å®‰è£…ä½ç½®è‡³éCç›˜æ•™ç¨‹"><a href="#Windows-11ä¸‹å®‰è£…Dockerå¹¶ä¿®æ”¹å®‰è£…ä½ç½®è‡³éCç›˜æ•™ç¨‹" class="headerlink" title="Windows 11ä¸‹å®‰è£…Dockerå¹¶ä¿®æ”¹å®‰è£…ä½ç½®è‡³éCç›˜æ•™ç¨‹"></a>Windows 11ä¸‹å®‰è£…Dockerå¹¶ä¿®æ”¹å®‰è£…ä½ç½®è‡³éCç›˜æ•™ç¨‹</h1><h1 id="ä¸€ã€å®‰è£…å‰å‡†å¤‡"><a href="#ä¸€ã€å®‰è£…å‰å‡†å¤‡" class="headerlink" title="ä¸€ã€å®‰è£…å‰å‡†å¤‡"></a>ä¸€ã€å®‰è£…å‰å‡†å¤‡</h1><h2 id="1-1-æ£€æŸ¥ç³»ç»Ÿè¦æ±‚"><a href="#1-1-æ£€æŸ¥ç³»ç»Ÿè¦æ±‚" class="headerlink" title="1.1 æ£€æŸ¥ç³»ç»Ÿè¦æ±‚"></a>1.1 æ£€æŸ¥ç³»ç»Ÿè¦æ±‚</h2><p>åœ¨å®‰è£…Dockerå‰ï¼Œéœ€ç¡®ä¿Windows 11ç³»ç»Ÿæ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š</p><ul><li><p>ç³»ç»Ÿç‰ˆæœ¬ï¼šWindows 11 64ä½ä¸“ä¸šç‰ˆã€ä¼ä¸šç‰ˆæˆ–æ•™è‚²ç‰ˆï¼ˆå®¶åº­ç‰ˆéœ€é€šè¿‡WSL 2æ”¯æŒï¼‰ã€‚</p></li><li><p>ç¡¬ä»¶è¦æ±‚ï¼šæ”¯æŒç¡¬ä»¶è™šæ‹ŸåŒ–æŠ€æœ¯ï¼ˆVT-x/AMD-Vï¼‰ï¼Œå¹¶åœ¨BIOS/UEFIä¸­å¯ç”¨ã€‚</p></li><li><p>WSL 2è¦æ±‚ï¼šå·²å®‰è£…å¹¶å¯ç”¨Windows Subsystem for Linux 2ï¼Œä¸”å†…æ ¸ç‰ˆæœ¬æ›´æ–°è‡³æœ€æ–°ã€‚</p></li><li><p>å­˜å‚¨ç©ºé—´ï¼šéCç›˜é¢„ç•™è‡³å°‘20GBç©ºé—²ç©ºé—´ï¼ˆç”¨äºDockerå®‰è£…åŠé•œåƒå­˜å‚¨ï¼‰ã€‚</p></li></ul><h2 id="1-2-å¯ç”¨å¿…è¦åŠŸèƒ½"><a href="#1-2-å¯ç”¨å¿…è¦åŠŸèƒ½" class="headerlink" title="1.2 å¯ç”¨å¿…è¦åŠŸèƒ½"></a>1.2 å¯ç”¨å¿…è¦åŠŸèƒ½</h2><p>æ‰“å¼€â€œæ§åˆ¶é¢æ¿â€â†’â€œç¨‹åºâ€â†’â€œç¨‹åºå’ŒåŠŸèƒ½â€â†’â€œå¯ç”¨æˆ–å…³é—­WindowsåŠŸèƒ½â€ï¼Œå‹¾é€‰ä»¥ä¸‹é€‰é¡¹å¹¶ç‚¹å‡»â€œç¡®å®šâ€ï¼Œç­‰å¾…ç³»ç»Ÿé…ç½®å®Œæˆåé‡å¯ç”µè„‘ï¼š</p><ul><li><p>Hyper-Vï¼ˆå…¨éƒ¨ç»„ä»¶ï¼‰</p></li><li><p>å®¹å™¨</p></li><li><p>Windowsè™šæ‹Ÿæœºç›‘æ§ç¨‹åºå¹³å°</p></li></ul><p>è‹¥ä¸ºWindows 11å®¶åº­ç‰ˆï¼Œéœ€å…ˆå®‰è£…WSL 2ï¼šä»¥ç®¡ç†å‘˜èº«ä»½æ‰“å¼€PowerShellï¼Œè¾“å…¥å‘½ä»¤ <code>wsl --install</code>ï¼Œé‡å¯ç”µè„‘åå®ŒæˆWSL 2å®‰è£…ã€‚</p><h1 id="äºŒã€ä¸‹è½½Dockerå®‰è£…ç¨‹åº"><a href="#äºŒã€ä¸‹è½½Dockerå®‰è£…ç¨‹åº" class="headerlink" title="äºŒã€ä¸‹è½½Dockerå®‰è£…ç¨‹åº"></a>äºŒã€ä¸‹è½½Dockerå®‰è£…ç¨‹åº</h1><p>è®¿é—®Dockerå®˜æ–¹ç½‘ç«™ï¼ˆ<a href="https://www.docker.com/products/docker-desktop/">https://www.docker.com/products/docker-desktop/</a>ï¼‰ï¼Œç‚¹å‡»â€œDownload for Windowsâ€ä¸‹è½½æœ€æ–°ç‰ˆDocker Desktopå®‰è£…åŒ…ï¼ˆ.exeæ–‡ä»¶ï¼‰ï¼Œä¿å­˜è‡³éCç›˜çš„ä¸´æ—¶æ–‡ä»¶å¤¹ï¼ˆå¦‚D:\Tempï¼‰ã€‚</p><h1 id="ä¸‰ã€ä¿®æ”¹å®‰è£…ä½ç½®ï¼ˆå·²æœ‰å®‰è£…ç¨‹åºæ—¶ï¼‰"><a href="#ä¸‰ã€ä¿®æ”¹å®‰è£…ä½ç½®ï¼ˆå·²æœ‰å®‰è£…ç¨‹åºæ—¶ï¼‰" class="headerlink" title="ä¸‰ã€ä¿®æ”¹å®‰è£…ä½ç½®ï¼ˆå·²æœ‰å®‰è£…ç¨‹åºæ—¶ï¼‰"></a>ä¸‰ã€ä¿®æ”¹å®‰è£…ä½ç½®ï¼ˆå·²æœ‰å®‰è£…ç¨‹åºæ—¶ï¼‰</h1><h2 id="3-1-è§£å‹å®‰è£…ç¨‹åºï¼ˆå¯é€‰ï¼‰"><a href="#3-1-è§£å‹å®‰è£…ç¨‹åºï¼ˆå¯é€‰ï¼‰" class="headerlink" title="3.1 è§£å‹å®‰è£…ç¨‹åºï¼ˆå¯é€‰ï¼‰"></a>3.1 è§£å‹å®‰è£…ç¨‹åºï¼ˆå¯é€‰ï¼‰</h2><p>è‹¥å·²ä¸‹è½½Dockerå®‰è£…åŒ…ï¼Œå¯é€šè¿‡ä»¥ä¸‹æ–¹å¼æŸ¥çœ‹å®‰è£…æ–‡ä»¶ç»“æ„ï¼ˆéå¿…éœ€æ­¥éª¤ï¼‰ï¼š</p><ol><li><p>ä»¥ç®¡ç†å‘˜èº«ä»½æ‰“å¼€PowerShellï¼Œåˆ‡æ¢è‡³å®‰è£…åŒ…æ‰€åœ¨ç›®å½•ï¼Œä¾‹å¦‚ï¼š<code>cd D:\Temp</code>ã€‚</p></li><li><p>è¾“å…¥å‘½ä»¤è§£å‹å®‰è£…åŒ…ï¼š<code>Docker Desktop Installer.exe extract --destination D:\DockerTemp</code>ï¼Œå°†å®‰è£…æ–‡ä»¶æå–è‡³D:\DockerTempæ–‡ä»¶å¤¹ã€‚</p></li></ol><h2 id="3-2-é€šè¿‡å‘½ä»¤è¡ŒæŒ‡å®šå®‰è£…è·¯å¾„"><a href="#3-2-é€šè¿‡å‘½ä»¤è¡ŒæŒ‡å®šå®‰è£…è·¯å¾„" class="headerlink" title="3.2 é€šè¿‡å‘½ä»¤è¡ŒæŒ‡å®šå®‰è£…è·¯å¾„"></a>3.2 é€šè¿‡å‘½ä»¤è¡ŒæŒ‡å®šå®‰è£…è·¯å¾„</h2><p>è¿™æ˜¯ä¿®æ”¹Dockerå®‰è£…ä½ç½®çš„æ ¸å¿ƒæ­¥éª¤ï¼Œéœ€é€šè¿‡å‘½ä»¤è¡Œå‚æ•°æŒ‡å®šéCç›˜å®‰è£…ç›®å½•ï¼š</p><ol><li><p>ä»¥<strong>ç®¡ç†å‘˜èº«ä»½</strong>æ‰“å¼€PowerShellï¼Œåˆ‡æ¢è‡³Dockerå®‰è£…åŒ…æ‰€åœ¨ç›®å½•ï¼ˆå¦‚D:\Tempï¼‰ã€‚</p></li><li><p>è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œå°†å®‰è£…ä½ç½®æŒ‡å®šä¸ºéCç›˜è·¯å¾„ï¼ˆä»¥D:\Dockerä¸ºä¾‹ï¼‰ï¼š<br><code>.\Docker Desktop Installer.exe install --installation-dir=D:\Docker --windows-containers=false --wsl2=true</code></p></li><li><p>å‘½ä»¤å‚æ•°è¯´æ˜ï¼š</p><pre><code> `--installation-dir=D:\Docker`ï¼šæŒ‡å®šDockerä¸»ç¨‹åºå®‰è£…ç›®å½•ï¼ˆéCç›˜è·¯å¾„ï¼‰ã€‚</code></pre></li><li><p><code>--windows-containers=false</code>ï¼šé»˜è®¤å¯ç”¨Linuxå®¹å™¨ï¼ˆå¦‚éœ€Windowså®¹å™¨å¯æ”¹ä¸ºtrueï¼‰ã€‚</p></li><li><p><code>--wsl2=true</code>ï¼šå¼ºåˆ¶ä½¿ç”¨WSL 2ä½œä¸ºå®¹å™¨è¿è¡Œæ—¶ï¼ˆæ¨èï¼‰ã€‚</p></li><li><p>æ‰§è¡Œå‘½ä»¤åï¼Œç­‰å¾…å®‰è£…è¿›åº¦å®Œæˆï¼ŒæœŸé—´å¯èƒ½ä¼šæç¤ºé‡å¯ç”µè„‘ï¼Œç‚¹å‡»â€œç¡®å®šâ€å³å¯ã€‚</p></li></ol><div class="tip warning faa-horizontal animated-hover"><p>è‹¥ä¹‹å‰å·²å®‰è£…è¿‡Dockerå¹¶é»˜è®¤åœ¨Cç›˜ï¼Œéœ€å…ˆå¸è½½æ—§ç‰ˆæœ¬ï¼šæ‰“å¼€â€œè®¾ç½®â€â†’â€œåº”ç”¨â€â†’â€œåº”ç”¨å’ŒåŠŸèƒ½â€ï¼Œæ‰¾åˆ°â€œDocker Desktopâ€ï¼Œç‚¹å‡»â€œå¸è½½â€ï¼Œå¹¶åˆ é™¤æ®‹ç•™æ–‡ä»¶åå†æ‰§è¡Œä¸Šè¿°å‘½ä»¤ã€‚</p></div><h1 id="å››ã€éªŒè¯å®‰è£…ç»“æœ"><a href="#å››ã€éªŒè¯å®‰è£…ç»“æœ" class="headerlink" title="å››ã€éªŒè¯å®‰è£…ç»“æœ"></a>å››ã€éªŒè¯å®‰è£…ç»“æœ</h1><h2 id="4-1-å¯åŠ¨Docker-Desktop"><a href="#4-1-å¯åŠ¨Docker-Desktop" class="headerlink" title="4.1 å¯åŠ¨Docker Desktop"></a>4.1 å¯åŠ¨Docker Desktop</h2><p>å®‰è£…å®Œæˆåï¼Œåœ¨å¼€å§‹èœå•ä¸­æ‰¾åˆ°â€œDocker Desktopâ€å¹¶å¯åŠ¨ï¼Œé¦–æ¬¡å¯åŠ¨å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿæ—¶é—´ï¼ˆåˆå§‹åŒ–WSL 2ç¯å¢ƒï¼‰ã€‚å¯åŠ¨æˆåŠŸåï¼Œä»»åŠ¡æ å³ä¸‹è§’ä¼šæ˜¾ç¤ºDockerå›¾æ ‡ï¼ˆè“è‰²é²¸é±¼å›¾æ ‡ï¼‰ã€‚</p><h2 id="4-2-æ£€æŸ¥å®‰è£…è·¯å¾„"><a href="#4-2-æ£€æŸ¥å®‰è£…è·¯å¾„" class="headerlink" title="4.2 æ£€æŸ¥å®‰è£…è·¯å¾„"></a>4.2 æ£€æŸ¥å®‰è£…è·¯å¾„</h2><p>æ‰“å¼€æ–‡ä»¶èµ„æºç®¡ç†å™¨ï¼Œå¯¼èˆªè‡³ä¹‹å‰æŒ‡å®šçš„å®‰è£…ç›®å½•ï¼ˆå¦‚D:\Dockerï¼‰ï¼Œå¯çœ‹åˆ°Dockerçš„ä¸»ç¨‹åºæ–‡ä»¶åŠç›¸å…³ç»„ä»¶ï¼Œç¡®è®¤å®‰è£…ä½ç½®æ­£ç¡®ã€‚</p><h2 id="4-3-æµ‹è¯•DockeråŠŸèƒ½"><a href="#4-3-æµ‹è¯•DockeråŠŸèƒ½" class="headerlink" title="4.3 æµ‹è¯•DockeråŠŸèƒ½"></a>4.3 æµ‹è¯•DockeråŠŸèƒ½</h2><p>ä»¥ç®¡ç†å‘˜èº«ä»½æ‰“å¼€PowerShellï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤æµ‹è¯•Dockeræ˜¯å¦æ­£å¸¸å·¥ä½œï¼š</p><ol><li><p>æŸ¥çœ‹Dockerç‰ˆæœ¬ï¼š<code>docker --version</code>ï¼Œè‹¥è¾“å‡ºç±»ä¼¼â€œDocker version 26.1.4, build 5650f9bâ€åˆ™è¯´æ˜ç‰ˆæœ¬æŸ¥è¯¢æ­£å¸¸ã€‚</p></li><li><p>è¿è¡ŒHello Worldé•œåƒï¼š<code>docker run hello-world</code>ï¼Œè‹¥è¾“å‡ºâ€œHello from Docker!â€ç­‰ä¿¡æ¯ï¼Œè¯´æ˜Dockerå·²æˆåŠŸæ‹‰å–å¹¶è¿è¡Œé•œåƒï¼ŒåŠŸèƒ½æ­£å¸¸ã€‚</p></li></ol><h1 id="äº”ã€åç»­é…ç½®ï¼ˆå¯é€‰ï¼‰"><a href="#äº”ã€åç»­é…ç½®ï¼ˆå¯é€‰ï¼‰" class="headerlink" title="äº”ã€åç»­é…ç½®ï¼ˆå¯é€‰ï¼‰"></a>äº”ã€åç»­é…ç½®ï¼ˆå¯é€‰ï¼‰</h1><h2 id="5-1-ä¿®æ”¹é•œåƒå­˜å‚¨ä½ç½®"><a href="#5-1-ä¿®æ”¹é•œåƒå­˜å‚¨ä½ç½®" class="headerlink" title="5.1 ä¿®æ”¹é•œåƒå­˜å‚¨ä½ç½®"></a>5.1 ä¿®æ”¹é•œåƒå­˜å‚¨ä½ç½®</h2><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒDockeré•œåƒå­˜å‚¨åœ¨WSL 2åˆ†å‘ç‰ˆçš„è™šæ‹Ÿç£ç›˜ä¸­ï¼ˆé€šå¸¸ä½äºCç›˜ï¼‰ï¼Œå¯é€šè¿‡ä»¥ä¸‹æ­¥éª¤è¿ç§»è‡³éCç›˜ï¼š</p><ol><li><p>å…³é—­Docker Desktopï¼šå³é”®ä»»åŠ¡æ Dockerå›¾æ ‡ï¼Œç‚¹å‡»â€œQuit Docker Desktopâ€ã€‚</p></li><li><p>å¯¼å‡ºWSL 2åˆ†å‘ç‰ˆï¼šåœ¨PowerShellä¸­è¾“å…¥<code>wsl --export docker-desktop-data D:\Docker\wsl\data\docker-desktop-data.tar</code>ã€‚</p></li><li><p>æ³¨é”€ç°æœ‰åˆ†å‘ç‰ˆï¼š<code>wsl --unregister docker-desktop-data</code>ã€‚</p></li><li><p>é‡æ–°å¯¼å…¥åˆ†å‘ç‰ˆè‡³éCç›˜ï¼š<code>wsl --import docker-desktop-data D:\Docker\wsl\data D:\Docker\wsl\data\docker-desktop-data.tar --version 2</code>ã€‚</p></li><li><p>é‡å¯Docker Desktopï¼Œé•œåƒå­˜å‚¨ä½ç½®å³è¿ç§»è‡³D:\Docker\wsl\dataã€‚</p></li></ol><h2 id="5-2-é…ç½®å›½å†…é•œåƒæº"><a href="#5-2-é…ç½®å›½å†…é•œåƒæº" class="headerlink" title="5.2 é…ç½®å›½å†…é•œåƒæº"></a>5.2 é…ç½®å›½å†…é•œåƒæº</h2><p>ä¸ºåŠ å¿«é•œåƒæ‹‰å–é€Ÿåº¦ï¼Œå¯é…ç½®å›½å†…é•œåƒæºï¼šæ‰“å¼€Docker Desktopï¼Œç‚¹å‡»â€œSettingsâ€â†’â€œDocker Engineâ€ï¼Œåœ¨JSONé…ç½®ä¸­æ·»åŠ é•œåƒæºï¼Œä¾‹å¦‚ï¼š</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;registry-mirrors&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;https://docker.1ms.run&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;https://docker-0.unsee.tech&quot;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>ç‚¹å‡»â€œApply &amp; Restartâ€ä¿å­˜é…ç½®å¹¶é‡å¯Dockerã€‚</p><h1 id="å…­ã€å¸¸è§é—®é¢˜è§£å†³"><a href="#å…­ã€å¸¸è§é—®é¢˜è§£å†³" class="headerlink" title="å…­ã€å¸¸è§é—®é¢˜è§£å†³"></a>å…­ã€å¸¸è§é—®é¢˜è§£å†³</h1><ul><li><p><strong>é—®é¢˜1ï¼šå®‰è£…æ—¶æç¤ºâ€œHyper-Væœªå¯ç”¨â€</strong>ï¼šé‡æ–°æ£€æŸ¥â€œå¯ç”¨æˆ–å…³é—­WindowsåŠŸèƒ½â€ä¸­Hyper-Vç»„ä»¶æ˜¯å¦å…¨éƒ¨å‹¾é€‰ï¼Œè‹¥å·²å‹¾é€‰ä»æŠ¥é”™ï¼Œå¯èƒ½æ˜¯BIOSä¸­è™šæ‹ŸåŒ–æœªå¯ç”¨ï¼Œéœ€é‡å¯ç”µè„‘è¿›å…¥BIOSå¼€å¯VT-x/AMD-Vã€‚</p></li><li><p><strong>é—®é¢˜2ï¼šDockerå¯åŠ¨å¡åœ¨â€œStartingâ€¦â€</strong>ï¼šå…³é—­Dockeråï¼Œåœ¨PowerShellä¸­è¾“å…¥<code>wsl --shutdown</code>å…³é—­WSL 2ï¼Œå†é‡æ–°å¯åŠ¨Dockerã€‚</p></li><li><p><strong>é—®é¢˜3ï¼šå‘½ä»¤è¡Œè¾“å…¥dockerå‘½ä»¤æç¤ºâ€œcommand not foundâ€</strong>ï¼šæ£€æŸ¥ç³»ç»Ÿç¯å¢ƒå˜é‡PATHä¸­æ˜¯å¦åŒ…å«Dockerå®‰è£…ç›®å½•ï¼ˆå¦‚D:\Docker\resources\binï¼‰ï¼Œè‹¥æœªåŒ…å«éœ€æ‰‹åŠ¨æ·»åŠ åé‡å¯PowerShellã€‚</p></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Windows-11ä¸‹å®‰è£…Dockerå¹¶ä¿®æ”¹å®‰è£…ä½ç½®è‡³éCç›˜æ•™ç¨‹&quot;&gt;&lt;a href=&quot;#Windows-11ä¸‹å®‰è£…Dockerå¹¶ä¿®æ”¹å®‰è£…ä½ç½®è‡³éCç›˜æ•™ç¨‹&quot; class=&quot;headerlink&quot; title=&quot;Windows 11ä¸‹å®‰è£…Dockerå¹¶ä¿®æ”¹å®‰è£…ä½ç½®è‡³é</summary>
      
    
    
    
    
    <category term="docker" scheme="https://nmcb666.vip/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>å¿«æ’ä¸å½’å¹¶æ’åº</title>
    <link href="https://nmcb666.vip/posts/4e7c2b21.html"/>
    <id>https://nmcb666.vip/posts/4e7c2b21.html</id>
    <published>2025-09-23T22:03:13.000Z</published>
    <updated>2025-12-06T11:22:35.705Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å¿«é€Ÿæ’åºä¸å½’å¹¶æ’åºï¼šä¸¤ç§é«˜æ•ˆæ’åºç®—æ³•çš„æ·±åº¦è§£æ"><a href="#å¿«é€Ÿæ’åºä¸å½’å¹¶æ’åºï¼šä¸¤ç§é«˜æ•ˆæ’åºç®—æ³•çš„æ·±åº¦è§£æ" class="headerlink" title="å¿«é€Ÿæ’åºä¸å½’å¹¶æ’åºï¼šä¸¤ç§é«˜æ•ˆæ’åºç®—æ³•çš„æ·±åº¦è§£æ"></a>å¿«é€Ÿæ’åºä¸å½’å¹¶æ’åºï¼šä¸¤ç§é«˜æ•ˆæ’åºç®—æ³•çš„æ·±åº¦è§£æ</h1><p>æ’åºç®—æ³•æ˜¯è®¡ç®—æœºç§‘å­¦ä¸­çš„åŸºç¡€å†…å®¹ï¼Œåœ¨æ—¥å¸¸å¼€å‘ä¸­æœ‰ç€å¹¿æ³›åº”ç”¨ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨ä¸¤ç§ç»å…¸çš„é«˜æ•ˆæ’åºç®—æ³•ï¼šå¿«é€Ÿæ’åºå’Œå½’å¹¶æ’åºï¼Œåˆ†æå®ƒä»¬çš„å·¥ä½œåŸç†ã€å®ç°æ–¹å¼ã€æ—¶é—´å¤æ‚åº¦ä»¥åŠé€‚ç”¨åœºæ™¯ã€‚</p><h2 id="å¿«é€Ÿæ’åº-Quick-Sort"><a href="#å¿«é€Ÿæ’åº-Quick-Sort" class="headerlink" title="å¿«é€Ÿæ’åº (Quick Sort)"></a>å¿«é€Ÿæ’åº (Quick Sort)</h2><p>å¿«é€Ÿæ’åºç”±è®¡ç®—æœºç§‘å­¦å®¶Tony Hoareäº1960å¹´æå‡ºï¼Œæ˜¯ä¸€ç§åˆ†æ²»æ³•ç­–ç•¥çš„æ’åºç®—æ³•ã€‚å®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯â€åˆ†è€Œæ²»ä¹‹â€ï¼Œé€šè¿‡é€‰æ‹©ä¸€ä¸ªâ€åŸºå‡†â€å…ƒç´ ï¼Œå°†æ•°ç»„åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ‰€æœ‰å…ƒç´ éƒ½å°äºåŸºå‡†ï¼Œå¦ä¸€éƒ¨åˆ†æ‰€æœ‰å…ƒç´ éƒ½å¤§äºåŸºå‡†ï¼Œç„¶åé€’å½’åœ°å¯¹è¿™ä¸¤éƒ¨åˆ†è¿›è¡Œæ’åºã€‚</p><h3 id="å¿«é€Ÿæ’åºçš„å®ç°"><a href="#å¿«é€Ÿæ’åºçš„å®ç°" class="headerlink" title="å¿«é€Ÿæ’åºçš„å®ç°"></a>å¿«é€Ÿæ’åºçš„å®ç°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">quick_sort</span>(<span class="params">arr</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    å¿«é€Ÿæ’åºç®—æ³•å®ç°</span></span><br><span class="line"><span class="string">    :param arr: éœ€è¦æ’åºçš„åˆ—è¡¨</span></span><br><span class="line"><span class="string">    :return: æ’åºåçš„åˆ—è¡¨</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># åŸºæœ¬æƒ…å†µï¼šå¦‚æœåˆ—è¡¨é•¿åº¦å°äºç­‰äº1ï¼Œåˆ™å·²ç»æ˜¯æ’åºå¥½çš„</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(arr) &lt;= <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> arr</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># é€‰æ‹©åŸºå‡†å…ƒç´ ï¼ˆè¿™é‡Œé€‰æ‹©ä¸­é—´å…ƒç´ ï¼‰</span></span><br><span class="line">    pivot = arr[<span class="built_in">len</span>(arr) // <span class="number">2</span>]</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># åˆ†åŒºï¼šå°äºåŸºå‡†ã€ç­‰äºåŸºå‡†ã€å¤§äºåŸºå‡†</span></span><br><span class="line">    left = [x <span class="keyword">for</span> x <span class="keyword">in</span> arr <span class="keyword">if</span> x &lt; pivot]</span><br><span class="line">    middle = [x <span class="keyword">for</span> x <span class="keyword">in</span> arr <span class="keyword">if</span> x == pivot]</span><br><span class="line">    right = [x <span class="keyword">for</span> x <span class="keyword">in</span> arr <span class="keyword">if</span> x &gt; pivot]</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># é€’å½’æ’åºå¹¶åˆå¹¶ç»“æœ</span></span><br><span class="line">    <span class="keyword">return</span> quick_sort(left) + middle + quick_sort(right)</span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„å®ç°é‡‡ç”¨äº†åˆ—è¡¨æ¨å¯¼å¼ï¼Œä½¿ä»£ç æ›´åŠ ç®€æ´ã€‚å®é™…åº”ç”¨ä¸­ï¼Œä¸ºäº†å‡å°‘å†…å­˜å¼€é”€ï¼Œæ›´å¸¸è§çš„æ˜¯é‡‡ç”¨åŸåœ°(in-place)åˆ†åŒºçš„æ–¹å¼ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">quick_sort_in_place</span>(<span class="params">arr, low=<span class="literal">None</span>, high=<span class="literal">None</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    åŸåœ°å¿«é€Ÿæ’åºå®ç°</span></span><br><span class="line"><span class="string">    :param arr: éœ€è¦æ’åºçš„åˆ—è¡¨</span></span><br><span class="line"><span class="string">    :param low: æ’åºèµ·å§‹ç´¢å¼•</span></span><br><span class="line"><span class="string">    :param high: æ’åºç»“æŸç´¢å¼•</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># åˆå§‹åŒ–lowå’Œhighå‚æ•°</span></span><br><span class="line">    <span class="keyword">if</span> low <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        low = <span class="number">0</span></span><br><span class="line">    <span class="keyword">if</span> high <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        high = <span class="built_in">len</span>(arr) - <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># åŸºæœ¬æƒ…å†µï¼šå¦‚æœèµ·å§‹ç´¢å¼•å¤§äºç­‰äºç»“æŸç´¢å¼•ï¼Œåˆ™æ— éœ€æ’åº</span></span><br><span class="line">    <span class="keyword">if</span> low &gt;= high:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># åˆ†åŒºæ“ä½œï¼Œè¿”å›åŸºå‡†å…ƒç´ çš„æœ€ç»ˆä½ç½®</span></span><br><span class="line">    pivot_index = partition(arr, low, high)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># é€’å½’æ’åºåŸºå‡†å…ƒç´ å·¦å³ä¸¤éƒ¨åˆ†</span></span><br><span class="line">    quick_sort_in_place(arr, low, pivot_index - <span class="number">1</span>)</span><br><span class="line">    quick_sort_in_place(arr, pivot_index + <span class="number">1</span>, high)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">partition</span>(<span class="params">arr, low, high</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    åˆ†åŒºæ“ä½œ</span></span><br><span class="line"><span class="string">    :param arr: è¦åˆ†åŒºçš„åˆ—è¡¨</span></span><br><span class="line"><span class="string">    :param low: åˆ†åŒºèµ·å§‹ç´¢å¼•</span></span><br><span class="line"><span class="string">    :param high: åˆ†åŒºç»“æŸç´¢å¼•</span></span><br><span class="line"><span class="string">    :return: åŸºå‡†å…ƒç´ çš„æœ€ç»ˆä½ç½®</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># é€‰æ‹©æœ€å³è¾¹çš„å…ƒç´ ä½œä¸ºåŸºå‡†</span></span><br><span class="line">    pivot = arr[high]</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># iæ˜¯å°äºåŸºå‡†åŒºåŸŸçš„è¾¹ç•Œ</span></span><br><span class="line">    i = low - <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># éå†æ•°ç»„ï¼Œå°†å°äºåŸºå‡†çš„å…ƒç´ æ”¾åˆ°å·¦è¾¹</span></span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(low, high):</span><br><span class="line">        <span class="keyword">if</span> arr[j] &lt;= pivot:</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">            arr[i], arr[j] = arr[j], arr[i]</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å°†åŸºå‡†å…ƒç´ æ”¾åˆ°æ­£ç¡®çš„ä½ç½®</span></span><br><span class="line">    arr[i + <span class="number">1</span>], arr[high] = arr[high], arr[i + <span class="number">1</span>]</span><br><span class="line">    <span class="keyword">return</span> i + <span class="number">1</span></span><br></pre></td></tr></table></figure><h3 id="å¿«é€Ÿæ’åºçš„ç‰¹æ€§"><a href="#å¿«é€Ÿæ’åºçš„ç‰¹æ€§" class="headerlink" title="å¿«é€Ÿæ’åºçš„ç‰¹æ€§"></a>å¿«é€Ÿæ’åºçš„ç‰¹æ€§</h3><ol><li><p><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼š</p><ul><li>å¹³å‡æƒ…å†µï¼šO(n log n)</li><li>æœ€åæƒ…å†µï¼šO(nÂ²)ï¼ˆå½“è¾“å…¥æ•°ç»„å·²ç»æ’åºæˆ–æ¥è¿‘æ’åºæ—¶ï¼‰</li><li>æœ€å¥½æƒ…å†µï¼šO(n log n)</li></ul></li><li><p><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼š</p><ul><li>é€’å½’å®ç°ï¼šO(log n) ~ O(n)ï¼ˆå–å†³äºé€’å½’æ·±åº¦ï¼‰</li><li>åŸåœ°å®ç°ï¼šO(log n)ï¼ˆä¸»è¦æ˜¯é€’å½’è°ƒç”¨æ ˆçš„å¼€é”€ï¼‰</li></ul></li><li><p><strong>ç¨³å®šæ€§</strong>ï¼šä¸ç¨³å®šæ’åºï¼ˆç›¸ç­‰å…ƒç´ çš„ç›¸å¯¹é¡ºåºå¯èƒ½æ”¹å˜ï¼‰</p></li><li><p><strong>ç‰¹ç‚¹</strong>ï¼š</p><ul><li>å®é™…åº”ç”¨ä¸­é€šå¸¸æ¯”å…¶ä»–O(n log n)ç®—æ³•å¿«</li><li>ç¼“å­˜å‹å¥½ï¼Œå› ä¸ºå®ƒå…·æœ‰è‰¯å¥½çš„å±€éƒ¨æ€§</li><li>å¯¹å·²ç»æ’åºçš„æ•°æ®æ€§èƒ½è¾ƒå·®ï¼Œå¯ä»¥é€šè¿‡éšæœºé€‰æ‹©åŸºå‡†å…ƒç´ æ¥æ”¹å–„</li><li>ä¸é€‚åˆå¯¹é“¾è¡¨è¿›è¡Œæ’åº</li></ul></li></ol><h2 id="å½’å¹¶æ’åº-Merge-Sort"><a href="#å½’å¹¶æ’åº-Merge-Sort" class="headerlink" title="å½’å¹¶æ’åº (Merge Sort)"></a>å½’å¹¶æ’åº (Merge Sort)</h2><p>å½’å¹¶æ’åºæ˜¯å¦ä¸€ç§åŸºäºåˆ†æ²»æ³•çš„æ’åºç®—æ³•ï¼Œç”±John von Neumannäº1945å¹´æå‡ºã€‚å®ƒå°†æ•°ç»„åˆ†æˆä¸¤ä¸ª halvesï¼Œåˆ†åˆ«å¯¹å®ƒä»¬è¿›è¡Œæ’åºï¼Œç„¶åå°†æ’åºå¥½çš„ä¸¤åŠåˆå¹¶åœ¨ä¸€èµ·ã€‚</p><h3 id="å½’å¹¶æ’åºçš„å®ç°"><a href="#å½’å¹¶æ’åºçš„å®ç°" class="headerlink" title="å½’å¹¶æ’åºçš„å®ç°"></a>å½’å¹¶æ’åºçš„å®ç°</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">merge_sort</span>(<span class="params">arr</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    å½’å¹¶æ’åºç®—æ³•å®ç°</span></span><br><span class="line"><span class="string">    :param arr: éœ€è¦æ’åºçš„åˆ—è¡¨</span></span><br><span class="line"><span class="string">    :return: æ’åºåçš„åˆ—è¡¨</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># åŸºæœ¬æƒ…å†µï¼šå¦‚æœåˆ—è¡¨é•¿åº¦å°äºç­‰äº1ï¼Œåˆ™å·²ç»æ˜¯æ’åºå¥½çš„</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(arr) &lt;= <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> arr</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å°†åˆ—è¡¨åˆ†æˆä¸¤åŠ</span></span><br><span class="line">    mid = <span class="built_in">len</span>(arr) // <span class="number">2</span></span><br><span class="line">    left = merge_sort(arr[:mid])</span><br><span class="line">    right = merge_sort(arr[mid:])</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># åˆå¹¶ä¸¤ä¸ªå·²æ’åºçš„å­åˆ—è¡¨</span></span><br><span class="line">    <span class="keyword">return</span> merge(left, right)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">merge</span>(<span class="params">left, right</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    åˆå¹¶ä¸¤ä¸ªå·²æ’åºçš„åˆ—è¡¨</span></span><br><span class="line"><span class="string">    :param left: ç¬¬ä¸€ä¸ªå·²æ’åºåˆ—è¡¨</span></span><br><span class="line"><span class="string">    :param right: ç¬¬äºŒä¸ªå·²æ’åºåˆ—è¡¨</span></span><br><span class="line"><span class="string">    :return: åˆå¹¶åçš„æ’åºåˆ—è¡¨</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    result = []</span><br><span class="line">    i = j = <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æ¯”è¾ƒä¸¤ä¸ªåˆ—è¡¨çš„å…ƒç´ ï¼ŒæŒ‰é¡ºåºæ·»åŠ åˆ°ç»“æœä¸­</span></span><br><span class="line">    <span class="keyword">while</span> i &lt; <span class="built_in">len</span>(left) <span class="keyword">and</span> j &lt; <span class="built_in">len</span>(right):</span><br><span class="line">        <span class="keyword">if</span> left[i] &lt;= right[j]:</span><br><span class="line">            result.append(left[i])</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            result.append(right[j])</span><br><span class="line">            j += <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># æ·»åŠ å‰©ä½™å…ƒç´ </span></span><br><span class="line">    result.extend(left[i:])</span><br><span class="line">    result.extend(right[j:])</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure><p>å½’å¹¶æ’åºä¹Ÿå¯ä»¥å®ç°ä¸ºåŸåœ°æ’åºï¼Œä½†å®ç°è¾ƒä¸ºå¤æ‚ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">merge_sort_in_place</span>(<span class="params">arr, left=<span class="literal">None</span>, right=<span class="literal">None</span></span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    åŸåœ°å½’å¹¶æ’åºå®ç°</span></span><br><span class="line"><span class="string">    :param arr: éœ€è¦æ’åºçš„åˆ—è¡¨</span></span><br><span class="line"><span class="string">    :param left: æ’åºèµ·å§‹ç´¢å¼•</span></span><br><span class="line"><span class="string">    :param right: æ’åºç»“æŸç´¢å¼•</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> left <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        left = <span class="number">0</span></span><br><span class="line">    <span class="keyword">if</span> right <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        right = <span class="built_in">len</span>(arr) - <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># åŸºæœ¬æƒ…å†µï¼šå¦‚æœèµ·å§‹ç´¢å¼•å¤§äºç­‰äºç»“æŸç´¢å¼•ï¼Œåˆ™æ— éœ€æ’åº</span></span><br><span class="line">    <span class="keyword">if</span> left &lt; right:</span><br><span class="line">        <span class="comment"># æ‰¾åˆ°ä¸­é—´ç‚¹</span></span><br><span class="line">        mid = left + (right - left) // <span class="number">2</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># é€’å½’æ’åºå·¦åŠéƒ¨åˆ†å’Œå³åŠéƒ¨åˆ†</span></span><br><span class="line">        merge_sort_in_place(arr, left, mid)</span><br><span class="line">        merge_sort_in_place(arr, mid + <span class="number">1</span>, right)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># åˆå¹¶å·²æ’åºçš„ä¸¤éƒ¨åˆ†</span></span><br><span class="line">        merge_in_place(arr, left, mid, right)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">merge_in_place</span>(<span class="params">arr, left, mid, right</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    åŸåœ°åˆå¹¶ä¸¤ä¸ªå·²æ’åºçš„å­æ•°ç»„</span></span><br><span class="line"><span class="string">    :param arr: åŒ…å«ä¸¤ä¸ªå·²æ’åºå­æ•°ç»„çš„æ•°ç»„</span></span><br><span class="line"><span class="string">    :param left: ç¬¬ä¸€ä¸ªå­æ•°ç»„çš„èµ·å§‹ç´¢å¼•</span></span><br><span class="line"><span class="string">    :param mid: ç¬¬ä¸€ä¸ªå­æ•°ç»„çš„ç»“æŸç´¢å¼•</span></span><br><span class="line"><span class="string">    :param right: ç¬¬äºŒä¸ªå­æ•°ç»„çš„ç»“æŸç´¢å¼•</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># è®¡ç®—ä¸¤ä¸ªå­æ•°ç»„çš„é•¿åº¦</span></span><br><span class="line">    n1 = mid - left + <span class="number">1</span></span><br><span class="line">    n2 = right - mid</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># åˆ›å»ºä¸´æ—¶æ•°ç»„</span></span><br><span class="line">    L = [<span class="number">0</span>] * n1</span><br><span class="line">    R = [<span class="number">0</span>] * n2</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å¤åˆ¶æ•°æ®åˆ°ä¸´æ—¶æ•°ç»„</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n1):</span><br><span class="line">        L[i] = arr[left + i]</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(n2):</span><br><span class="line">        R[j] = arr[mid + <span class="number">1</span> + j]</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># åŸåœ°åˆå¹¶ä¸´æ—¶æ•°ç»„åˆ°åŸæ•°ç»„</span></span><br><span class="line">    i = j = <span class="number">0</span></span><br><span class="line">    k = left</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> i &lt; n1 <span class="keyword">and</span> j &lt; n2:</span><br><span class="line">        <span class="keyword">if</span> L[i] &lt;= R[j]:</span><br><span class="line">            arr[k] = L[i]</span><br><span class="line">            i += <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            arr[k] = R[j]</span><br><span class="line">            j += <span class="number">1</span></span><br><span class="line">        k += <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># å¤åˆ¶å‰©ä½™å…ƒç´ </span></span><br><span class="line">    <span class="keyword">while</span> i &lt; n1:</span><br><span class="line">        arr[k] = L[i]</span><br><span class="line">        i += <span class="number">1</span></span><br><span class="line">        k += <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> j &lt; n2:</span><br><span class="line">        arr[k] = R[j]</span><br><span class="line">        j += <span class="number">1</span></span><br><span class="line">        k += <span class="number">1</span></span><br></pre></td></tr></table></figure><h3 id="å½’å¹¶æ’åºçš„ç‰¹æ€§"><a href="#å½’å¹¶æ’åºçš„ç‰¹æ€§" class="headerlink" title="å½’å¹¶æ’åºçš„ç‰¹æ€§"></a>å½’å¹¶æ’åºçš„ç‰¹æ€§</h3><ol><li><p><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼š</p><ul><li>å¹³å‡æƒ…å†µï¼šO(n log n)</li><li>æœ€åæƒ…å†µï¼šO(n log n)</li><li>æœ€å¥½æƒ…å†µï¼šO(n log n)</li></ul></li><li><p><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼š</p><ul><li>æ ‡å‡†å®ç°ï¼šO(n)ï¼ˆéœ€è¦é¢å¤–çš„å­˜å‚¨ç©ºé—´ï¼‰</li><li>åŸåœ°å®ç°ï¼šO(log n)ï¼ˆä¸»è¦æ˜¯é€’å½’è°ƒç”¨æ ˆçš„å¼€é”€ï¼‰</li></ul></li><li><p><strong>ç¨³å®šæ€§</strong>ï¼šç¨³å®šæ’åºï¼ˆç›¸ç­‰å…ƒç´ çš„ç›¸å¯¹é¡ºåºä¿æŒä¸å˜ï¼‰</p></li><li><p><strong>ç‰¹ç‚¹</strong>ï¼š</p><ul><li>æ€§èƒ½ç¨³å®šï¼Œä¸å—è¾“å…¥æ•°æ®åˆ†å¸ƒå½±å“</li><li>é€‚åˆå¯¹é“¾è¡¨è¿›è¡Œæ’åº</li><li>éœ€è¦é¢å¤–çš„å­˜å‚¨ç©ºé—´ï¼ˆé™¤éä½¿ç”¨å¤æ‚çš„åŸåœ°å®ç°ï¼‰</li><li>å¹¶è¡Œæ€§å¥½ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°å¹¶è¡ŒåŒ–å¤„ç†</li></ul></li></ol><h2 id="å¿«é€Ÿæ’åºä¸å½’å¹¶æ’åºçš„å¯¹æ¯”"><a href="#å¿«é€Ÿæ’åºä¸å½’å¹¶æ’åºçš„å¯¹æ¯”" class="headerlink" title="å¿«é€Ÿæ’åºä¸å½’å¹¶æ’åºçš„å¯¹æ¯”"></a>å¿«é€Ÿæ’åºä¸å½’å¹¶æ’åºçš„å¯¹æ¯”</h2><div class="table-container"><table><thead><tr><th>ç‰¹æ€§</th><th>å¿«é€Ÿæ’åº</th><th>å½’å¹¶æ’åº</th></tr></thead><tbody><tr><td>å¹³å‡æ—¶é—´å¤æ‚åº¦</td><td>O(n log n)</td><td>O(n log n)</td></tr><tr><td>æœ€åæ—¶é—´å¤æ‚åº¦</td><td>O(nÂ²)</td><td>O(n log n)</td></tr><tr><td>ç©ºé—´å¤æ‚åº¦</td><td>O(log n) ~ O(n)</td><td>O(n) æˆ– O(log n)</td></tr><tr><td>ç¨³å®šæ€§</td><td>ä¸ç¨³å®š</td><td>ç¨³å®š</td></tr><tr><td>åŸåœ°æ’åº</td><td>å¯ä»¥</td><td>å¯ä»¥ï¼Œä½†å®ç°å¤æ‚</td></tr><tr><td>å¯¹ç¼“å­˜å‹å¥½æ€§</td><td>å¥½</td><td>ä¸€èˆ¬</td></tr><tr><td>å¯¹å·²æ’åºæ•°æ®</td><td>æ€§èƒ½å·®</td><td>æ€§èƒ½ç¨³å®š</td></tr><tr><td>å¹¶è¡Œæ€§</td><td>ä¸€èˆ¬</td><td>å¥½</td></tr><tr><td>å®ç°å¤æ‚åº¦</td><td>è¾ƒç®€å•</td><td>è¾ƒå¤æ‚</td></tr></tbody></table></div><h2 id="æ€»ç»“ä¸å»ºè®®"><a href="#æ€»ç»“ä¸å»ºè®®" class="headerlink" title="æ€»ç»“ä¸å»ºè®®"></a>æ€»ç»“ä¸å»ºè®®</h2><div class="tip cogs"><ul><li><p><strong>å¿«é€Ÿæ’åº</strong>é€šå¸¸åœ¨å®é™…åº”ç”¨ä¸­è¡¨ç°æ›´å¥½ï¼Œå› ä¸ºå®ƒçš„ç¼“å­˜åˆ©ç”¨ç‡é«˜ï¼Œå¹¶ä¸”ä¸éœ€è¦é¢å¤–çš„å¤§é‡å†…å­˜ã€‚é€‚åˆå¤§å¤šæ•°ä¸€èˆ¬æƒ…å†µçš„æ’åºéœ€æ±‚ã€‚</p></li><li><p><strong>å½’å¹¶æ’åº</strong>çš„ä¼˜åŠ¿åœ¨äºå…¶ç¨³å®šæ€§å’Œå¯é¢„æµ‹çš„O(n log n)æ—¶é—´å¤æ‚åº¦ï¼Œé€‚åˆå¯¹æ’åºç¨³å®šæ€§æœ‰è¦æ±‚çš„åœºæ™¯ï¼Œæˆ–è€…å¤„ç†é“¾è¡¨æ’åºã€‚</p></li></ul></div><p>åœ¨é€‰æ‹©æ’åºç®—æ³•æ—¶ï¼Œåº”æ ¹æ®å…·ä½“çš„åº”ç”¨åœºæ™¯ã€æ•°æ®ç‰¹å¾å’Œæ€§èƒ½è¦æ±‚è¿›è¡Œé€‰æ‹©ã€‚åœ¨è®¸å¤šæ ‡å‡†åº“ä¸­ï¼Œä¼šç»“åˆä¸¤ç§ç®—æ³•çš„ä¼˜ç‚¹ï¼Œä¾‹å¦‚Javaçš„<code>Arrays.sort()</code>å¯¹äºåŸå§‹ç±»å‹ä½¿ç”¨åŒè½´å¿«é€Ÿæ’åºï¼Œå¯¹äºå¯¹è±¡ç±»å‹ä½¿ç”¨å½’å¹¶æ’åºï¼ˆJava 7åŠä¹‹å‰ï¼‰æˆ–TimSortï¼ˆJava 8åŠä¹‹åï¼‰ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å¿«é€Ÿæ’åºä¸å½’å¹¶æ’åºï¼šä¸¤ç§é«˜æ•ˆæ’åºç®—æ³•çš„æ·±åº¦è§£æ&quot;&gt;&lt;a href=&quot;#å¿«é€Ÿæ’åºä¸å½’å¹¶æ’åºï¼šä¸¤ç§é«˜æ•ˆæ’åºç®—æ³•çš„æ·±åº¦è§£æ&quot; class=&quot;headerlink&quot; title=&quot;å¿«é€Ÿæ’åºä¸å½’å¹¶æ’åºï¼šä¸¤ç§é«˜æ•ˆæ’åºç®—æ³•çš„æ·±åº¦è§£æ&quot;&gt;&lt;/a&gt;å¿«é€Ÿæ’åºä¸å½’å¹¶æ’åºï¼šä¸¤ç§é«˜æ•ˆæ’åºç®—</summary>
      
    
    
    
    
    <category term="ç®—æ³•" scheme="https://nmcb666.vip/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>å…³äºçˆ¬å–è´´å§çš„ä¸¤ç§ç½‘é¡µå·®å¼‚</title>
    <link href="https://nmcb666.vip/posts/cf38f81c.html"/>
    <id>https://nmcb666.vip/posts/cf38f81c.html</id>
    <published>2025-09-19T21:16:00.000Z</published>
    <updated>2025-12-06T11:22:35.705Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ç™¾åº¦è´´å§çˆ¬å–æ—¶ä¸¤ç§ç½‘é¡µç»“æ„çš„å·®å¼‚"><a href="#ç™¾åº¦è´´å§çˆ¬å–æ—¶ä¸¤ç§ç½‘é¡µç»“æ„çš„å·®å¼‚" class="headerlink" title="ç™¾åº¦è´´å§çˆ¬å–æ—¶ä¸¤ç§ç½‘é¡µç»“æ„çš„å·®å¼‚"></a>ç™¾åº¦è´´å§çˆ¬å–æ—¶ä¸¤ç§ç½‘é¡µç»“æ„çš„å·®å¼‚</h1><p>ç™¾åº¦è´´å§ä½œä¸ºå›½å†…æå…·å½±å“åŠ›çš„ä¸­æ–‡ç¤¾åŒºï¼Œå…¶æµ·é‡çš„ç”¨æˆ·ç”Ÿæˆå†…å®¹ï¼ˆUGCï¼‰æ˜¯è¿›è¡Œå¸‚åœºè°ƒç ”ã€æƒ…æ„Ÿåˆ†æã€çƒ­ç‚¹è¿½è¸ªçš„å®è´µæ•°æ®èµ„æºã€‚ä½†åœ¨å®é™…çˆ¬å–è¿‡ç¨‹ä¸­ï¼Œå¾ˆå¤šå¼€å‘è€…ä¼šé‡åˆ°â€œæ˜æ˜XPathè§„åˆ™æ­£ç¡®å´çˆ¬ä¸åˆ°æ•°æ®â€çš„é—®é¢˜ï¼Œå…¶æ ¸å¿ƒåŸå› åœ¨äºç™¾åº¦è´´å§å­˜åœ¨ä¸¤ç§å·®å¼‚åŒ–çš„å‰ç«¯æ¸²æŸ“ç»“æ„ã€‚</p><h2 id="ä¸€ã€å‰ç½®çŸ¥è¯†"><a href="#ä¸€ã€å‰ç½®çŸ¥è¯†" class="headerlink" title="ä¸€ã€å‰ç½®çŸ¥è¯†"></a>ä¸€ã€å‰ç½®çŸ¥è¯†</h2><h3 id="1-1-è´´å§URLç»“æ„åˆ†æ"><a href="#1-1-è´´å§URLç»“æ„åˆ†æ" class="headerlink" title="1.1 è´´å§URLç»“æ„åˆ†æ"></a>1.1 è´´å§URLç»“æ„åˆ†æ</h3><p>è´´å§çš„å¸–å­URLéµå¾ªå›ºå®šæ ¼å¼ï¼ŒæŒæ¡åå¯æ‰¹é‡æ„é€ çˆ¬å–é“¾æ¥ï¼š</p><ul><li><p><strong>å•é¡µå¸–å­URL</strong>ï¼š<code>https://tieba.baidu.com/p/[å¸–å­ID]</code>ï¼ˆé»˜è®¤æ˜¾ç¤ºç¬¬ä¸€é¡µï¼‰</p></li><li><p><strong>åˆ†é¡µå¸–å­URL</strong>ï¼š<code>https://tieba.baidu.com/p/[å¸–å­ID]?pn=[é¡µç ]</code>ï¼ˆpnå‚æ•°æŒ‡å®šé¡µç ï¼Œå¦‚pn=2è¡¨ç¤ºç¬¬äºŒé¡µï¼‰</p></li></ul><p>ä¾‹å¦‚ï¼šå¸–å­<code>https://tieba.baidu.com/p/789012345?pn=3</code>è¡¨ç¤ºIDä¸º789012345çš„å¸–å­çš„ç¬¬ä¸‰é¡µå†…å®¹ã€‚</p><h2 id="äºŒã€ä¸¤ç§ç½‘é¡µç»“æ„çš„æ·±åº¦å¯¹æ¯”"><a href="#äºŒã€ä¸¤ç§ç½‘é¡µç»“æ„çš„æ·±åº¦å¯¹æ¯”" class="headerlink" title="äºŒã€ä¸¤ç§ç½‘é¡µç»“æ„çš„æ·±åº¦å¯¹æ¯”"></a>äºŒã€ä¸¤ç§ç½‘é¡µç»“æ„çš„æ·±åº¦å¯¹æ¯”</h2><p>é€šè¿‡Chromeå¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰æŸ¥çœ‹ç½‘é¡µæºç ï¼Œæˆ‘ä»¬å‘ç°ä¸¤ç§ç»“æ„çš„æ ¸å¿ƒå·®å¼‚é›†ä¸­åœ¨<strong>å¸–å­å†…å®¹å®¹å™¨</strong>å’Œ<strong>å‘å¸ƒæ—¶é—´èŠ‚ç‚¹</strong>ï¼Œä»¥ä¸‹æ˜¯å…·ä½“å¯¹æ¯”ï¼š</p><h3 id="2-1-ç»“æ„ä¸€ï¼šä¼ ç»Ÿç‰ˆï¼ˆæ— clearfixåç¼€ï¼‰"><a href="#2-1-ç»“æ„ä¸€ï¼šä¼ ç»Ÿç‰ˆï¼ˆæ— clearfixåç¼€ï¼‰" class="headerlink" title="2.1 ç»“æ„ä¸€ï¼šä¼ ç»Ÿç‰ˆï¼ˆæ— clearfixåç¼€ï¼‰"></a>2.1 ç»“æ„ä¸€ï¼šä¼ ç»Ÿç‰ˆï¼ˆæ— clearfixåç¼€ï¼‰</h3><p>é€šè¿‡â€œæ£€æŸ¥â€åŠŸèƒ½å®šä½åˆ°å¸–å­å†…å®¹å’Œå‘å¸ƒæ—¶é—´èŠ‚ç‚¹ï¼Œå…¶HTMLç»“æ„å¦‚ä¸‹ï¼š</p><div class="img-wrap"><div class="img-bg"><img class="img" src="https://java-ai-nskk.oss-cn-beijing.aliyuncs.com/myblog/blogImg/1.png" alt="ç¤ºä¾‹å›¾ç‰‡"/></div><span class="image-caption">ç¤ºä¾‹å›¾ç‰‡</span></div><div class="img-wrap"><div class="img-bg"><img class="img" src="https://java-ai-nskk.oss-cn-beijing.aliyuncs.com/myblog/blogImg/2.png" alt="ç¤ºä¾‹å›¾ç‰‡"/></div><span class="image-caption">ç¤ºä¾‹å›¾ç‰‡</span></div><p>å¯¹åº”çš„XPathè§£æè§„åˆ™ï¼š</p><ul><li><p>å›å¤å†…å®¹ï¼š<code>content_list = html.xpath(&#39;//cc/div[@class=&quot;d_post_content j_d_post_content &quot;]&#39;)</code><br>ä¹‹åå†å¾ªç¯è·å–è¯„è®ºå†…å®¹ï¼š<code>content_list = [&#39;&#39;.join(i.xpath(&#39;.//text()&#39;)) for i in content_list]</code></p></li><li><p>å‘å¸ƒæ—¶é—´ï¼š<code>create_time = html.xpath(&#39;//div/div[@class=&quot;core_reply_tail clearfix&quot;]&#39;)</code><br>ä¹‹åå†å¾ªç¯è·å–é‡Œé¢çš„æ—¶é—´ï¼š<code>create_time = [i.xpath(&#39;.//span[@class=&quot;tail-info&quot;]/text()&#39;)[-1] for i in create_time]</code>ï¼ˆå–æœ€åä¸€ä¸ªtail-infoçš„æ–‡æœ¬ï¼‰</p></li></ul><h3 id="2-2-ç»“æ„äºŒï¼šæ–°ç‰ˆï¼ˆå«clearfixåç¼€ï¼‰"><a href="#2-2-ç»“æ„äºŒï¼šæ–°ç‰ˆï¼ˆå«clearfixåç¼€ï¼‰" class="headerlink" title="2.2 ç»“æ„äºŒï¼šæ–°ç‰ˆï¼ˆå«clearfixåç¼€ï¼‰"></a>2.2 ç»“æ„äºŒï¼šæ–°ç‰ˆï¼ˆå«clearfixåç¼€ï¼‰</h3><p>å…¶HTMLç»“æ„è°ƒæ•´äº†classå±æ€§å’ŒèŠ‚ç‚¹å±‚çº§ï¼š</p><p><img src="https://java-ai-nskk.oss-cn-beijing.aliyuncs.com/myblog/blogImg/3.png" alt="code"><br><img src="https://java-ai-nskk.oss-cn-beijing.aliyuncs.com/myblog/blogImg/4.png" alt="code"></p><p>å¯¹åº”çš„XPathè§£æè§„åˆ™ï¼š</p><ul><li><p>å›å¤å†…å®¹ï¼š<code>content_list = html.xpath(&#39;//cc/div[@class=&quot;d_post_content j_d_post_content  clearfix&quot;]&#39;)</code><br>ä¹‹åå†å¾ªç¯è·å–è¯„è®ºå†…å®¹ï¼š<code>content_list = [&#39;&#39;.join(i.xpath(&#39;.//text()&#39;)) for i in content_list]</code>ï¼ˆæ³¨æ„ä¸¤ä¸ªç©ºæ ¼ï¼‰</p></li><li><p>å‘å¸ƒæ—¶é—´ï¼š<code>create_time = html.xpath(&#39;//div/div[@class=&quot;core_reply_tail &quot;]&#39;)</code>ï¼ˆ<br>ä¹‹åå†å¾ªç¯è·å–é‡Œé¢çš„æ—¶é—´ï¼š<code>create_time = [i.xpath(&#39;.//ul[@class=&quot;p_tail&quot;]/li[last()]/span/text()&#39;)[-1] for i in create_time]</code>å–p_tailæœ€åä¸€ä¸ªliçš„spanæ–‡æœ¬ï¼‰</p></li></ul><p><strong>å…³é”®æé†’</strong>ï¼šXPathä¸­classå±æ€§çš„åŒ¹é…æ˜¯<strong>ç²¾ç¡®åŒ¹é…</strong>ï¼Œç©ºæ ¼å’Œåç¼€çš„å·®å¼‚ä¼šå¯¼è‡´è§£æå¤±è´¥ã€‚åœ¨ç¼–å†™è§„åˆ™æ—¶ï¼Œå¿…é¡»å®Œå…¨å¤åˆ¶ç½‘é¡µæºç ä¸­çš„classå€¼ã€‚</p><h2 id="ä¸‰ã€ç¤ºä¾‹ä»£ç "><a href="#ä¸‰ã€ç¤ºä¾‹ä»£ç " class="headerlink" title="ä¸‰ã€ç¤ºä¾‹ä»£ç "></a>ä¸‰ã€ç¤ºä¾‹ä»£ç </h2><p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment"># æå–å¸–å­è¯„è®ºæ•°æ®ç¬¬ä¸€ç§</span></span><br><span class="line">data_fields = html.xpath(<span class="string">&#x27;//*[@id=&quot;j_p_postlist&quot;]/div/@data-field&#x27;</span>)</span><br><span class="line">author_list = html.xpath(<span class="string">&#x27;//div[@id=&quot;j_p_postlist&quot;]/div/div[@class=&quot;d_author&quot;]/ul/li[@class=&quot;d_name&quot;]/a/text()&#x27;</span>)</span><br><span class="line">content_list = html.xpath(<span class="string">&#x27;//cc/div[@class=&quot;d_post_content j_d_post_content &quot;]&#x27;</span>)</span><br><span class="line">content_list = [<span class="string">&#x27;&#x27;</span>.join(i.xpath(<span class="string">&#x27;.//text()&#x27;</span>)) <span class="keyword">for</span> i <span class="keyword">in</span> content_list]</span><br><span class="line">create_time = html.xpath(<span class="string">&#x27;//div/div[@class=&quot;core_reply_tail clearfix&quot;]&#x27;</span>)</span><br><span class="line">create_time = [i.xpath(<span class="string">&#x27;.//span[@class=&quot;tail-info&quot;]/text()&#x27;</span>)[-<span class="number">1</span>] <span class="keyword">for</span> i <span class="keyword">in</span> create_time]</span><br><span class="line"><span class="comment"># æå–å¸–å­è¯„è®ºæ•°æ®ç¬¬äºŒç§</span></span><br><span class="line">data_fields = html.xpath(<span class="string">&#x27;//*[@id=&quot;j_p_postlist&quot;]/div/@data-field&#x27;</span>)</span><br><span class="line">author_list = html.xpath(<span class="string">&#x27;//div[@id=&quot;j_p_postlist&quot;]/div/div[@class=&quot;d_author&quot;]/ul/li[@class=&quot;d_name&quot;]/a/text()&#x27;</span>)</span><br><span class="line">content_list = html.xpath(<span class="string">&#x27;//cc/div[@class=&quot;d_post_content j_d_post_content  clearfix&quot;]&#x27;</span>)</span><br><span class="line">content_list = [<span class="string">&#x27;&#x27;</span>.join(i.xpath(<span class="string">&#x27;.//text()&#x27;</span>)) <span class="keyword">for</span> i <span class="keyword">in</span> content_list]</span><br><span class="line">create_time = html.xpath(<span class="string">&#x27;//div/div[@class=&quot;core_reply_tail &quot;]&#x27;</span>)</span><br><span class="line">create_time_list = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> create_time:</span><br><span class="line">    time_elements = i.xpath(<span class="string">&#x27;.//ul[@class=&quot;p_tail&quot;]/li[last()]/span/text()&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> time_elements:</span><br><span class="line">        create_time_list.append(time_elements[<span class="number">0</span>])</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        create_time_list.append(<span class="string">&#x27;æœªçŸ¥&#x27;</span>)</span><br><span class="line">create_time = create_time_list</span><br></pre></td></tr></table></figure><h2 id="å››ã€å…³äºçˆ¬å–è´´å§åˆ—è¡¨"><a href="#å››ã€å…³äºçˆ¬å–è´´å§åˆ—è¡¨" class="headerlink" title="å››ã€å…³äºçˆ¬å–è´´å§åˆ—è¡¨"></a>å››ã€å…³äºçˆ¬å–è´´å§åˆ—è¡¨</h2><h3 id="1-é—®é¢˜åˆ†æ"><a href="#1-é—®é¢˜åˆ†æ" class="headerlink" title="1.é—®é¢˜åˆ†æ"></a>1.é—®é¢˜åˆ†æ</h3><p>è´´å§åˆ—è¡¨é¡µé¢å¦‚ä¸‹æ‰€ç¤º<br><img src="https://java-ai-nskk.oss-cn-beijing.aliyuncs.com/myblog/blogImg/5.png" alt="code"><br>ç°åœ¨æˆ‘ä»¬æƒ³è¦è·å–åˆ—è¡¨é¡µçš„è´´å­åç§°ï¼Œå¸–å­ä½œè€…ï¼Œå¸–å­é“¾æ¥ï¼Œå¸–å­æ—¶é—´<br>åŸæ¥çš„ä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æå–æ ‡é¢˜ã€é“¾æ¥ã€å‘å¸–äººå’Œæ—¶é—´</span></span><br><span class="line">        title_list = html.xpath(<span class="string">&#x27;//div[@class=&quot;threadlist_title pull_left j_th_tit &quot;]/a[1]/@title&#x27;</span>)</span><br><span class="line">        link_list = html.xpath(<span class="string">&#x27;//div[@class=&quot;threadlist_title pull_left j_th_tit &quot;]/a[1]/@href&#x27;</span>)</span><br><span class="line">        creator_list = html.xpath(<span class="string">&#x27;//div[@class=&quot;threadlist_author pull_right&quot;]/span[@class=&quot;tb_icon_author &quot;]/@title&#x27;</span>)</span><br><span class="line">        create_time_list = html.xpath(<span class="string">&#x27;//div[@class=&quot;threadlist_author pull_right&quot;]/span[@class=&quot;pull-right is_show_create_time&quot;]/text()&#x27;</span>)</span><br></pre></td></tr></table></figure><br>çœ‹ä¸Šå»ä¼¼ä¹æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ ï¼Œä½†æ˜¯è¿è¡Œä»£ç çš„æ—¶å€™ï¼Œå‘ç°çˆ¬å–çš„å¸–å­æœ‰äº›æ ‡é¢˜è·Ÿæ—¶é—´å¯¹ä¸ä¸Šè¿™ä¼šå¯¼è‡´ä¸€äº›é—®é¢˜ã€‚<br>æ‰€ä»¥è¿™åˆ°åº•æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ<br>æˆ‘ä»¬å¯ä»¥æ‰“å¼€f12æŸ¥çœ‹ç½‘é¡µæºä»£ç ï¼ŒæŸ¥çœ‹åˆ—è¡¨é¡µé¢çš„htmlç»“æ„ï¼Œé€šè¿‡è§‚å¯Ÿå¯ä»¥å‘ç°ï¼Œä¸€äº›å¸–å­çš„æ ‡é¢˜ï¼Œé“¾æ¥ï¼Œå‘å¸–äººçš„htmlç»“æ„è·Ÿå¤§éƒ¨åˆ†è¿˜ä¸ä¸€æ ·ã€‚<br>ä¾‹å¦‚æ™®é€šçš„æ ‡é¢˜é¡µé¢ç»“æ„å¦‚ä¸‹ï¼š<br><img src="https://java-ai-nskk.oss-cn-beijing.aliyuncs.com/myblog/blogImg/6.png" alt="code"><br>ä½†æ˜¯æŸäº›å¸–å­æ ‡é¢˜çš„htmlç»“æ„å¦‚ä¸‹ï¼š<br><img src="https://java-ai-nskk.oss-cn-beijing.aliyuncs.com/myblog/blogImg/7.png" alt="code"><br>å¯ä»¥å‘ç°å°‘éƒ¨åˆ†è´´å­çš„æ ‡é¢˜æ¯”æ™®é€šçš„å¤šäº†member_thread_title_frs è¿™ä¸€æ®µæ–‡å­— å¯¼è‡´è·å–ä¸åˆ°ä¸€äº›å¸–å­æ ‡é¢˜ï¼Œæ‰€ä»¥ä¹Ÿå°±é€ æˆäº†ä¹‹åçš„æ—¶é—´ä¸ä¸€è‡´çš„é—®é¢˜ã€‚</p><h3 id="2-è§£å†³æ–¹æ³•"><a href="#2-è§£å†³æ–¹æ³•" class="headerlink" title="2.è§£å†³æ–¹æ³•"></a>2.è§£å†³æ–¹æ³•</h3><p>è§£å†³æ–¹æ³•å¾ˆç®€å•åªéœ€è¦åœ¨å¤šåŒ¹é…é‚£å°‘éƒ¨åˆ†çš„å†…å®¹å³å¯ã€‚<br>å¯ä»¥æŠŠåŸæ¥çš„æ­£åˆ™è¡¨è¾¾å¼æ›¿æ¢ä¸º<code>//div[contains(@class,&quot;threadlist_title&quot;) and contains(@class,&quot;j_th_tit&quot;)]/a[1]/@title</code>ã€‚<br>è¿™æ ·å°±èƒ½åŒ¹é…åªè¦æœ‰threadlist_title pull_left j_th_tit çš„å†…å®¹äº†ã€‚<br>ä½†æ˜¯æ³¨æ„è¿™é‡Œçš„ä½œè€…åç§°ï¼Œä¸€ä¸ªå¸–å­ä¼šæœ‰ä¸¤ä¸ªä½œè€…åç§°ã€‚ç¬¬ä¸€ä¸ªæ˜¯å¸–å­ä½œè€…ï¼Œç¬¬äºŒä¸ªæ˜¯æœ€åè¯„è®ºçš„äººçš„åç§°ã€‚è¿™é‡Œæˆ‘ä»¬åªéœ€è¦è·å–ç¬¬ä¸€ä¸ªä½œè€…åç§°å³å¯ã€‚<br>äºæ˜¯å…³äºä½œè€…åç§°çš„æ­£åˆ™è¡¨è¾¾å¼ç”¨orå³å¯ã€‚<br>ä¿®æ”¹çš„å®Œæ•´ä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æå–æ ‡é¢˜ã€é“¾æ¥ã€å‘å¸–äººå’Œæ—¶é—´</span></span><br><span class="line">title_list = html.xpath(<span class="string">&#x27;//div[contains(@class,&quot;threadlist_title&quot;) and contains(@class,&quot;j_th_tit&quot;)]/a[1]/@title&#x27;</span>)</span><br><span class="line">link_list = html.xpath(<span class="string">&#x27;//div[contains(@class,&quot;threadlist_title&quot;) and contains(@class,&quot;j_th_tit&quot;)]/a[1]/@href&#x27;</span>)</span><br><span class="line"><span class="comment"># ä¿®æ”¹åçš„ä½œè€…åŒ¹é…è§„åˆ™ï¼ŒåªåŒ¹é…æŒ‡å®šçš„ä¸¤ç§å½¢å¼</span></span><br><span class="line">creator_list = html.xpath(<span class="string">&#x27;//div[@class=&quot;threadlist_author pull_right&quot;]/span[@class=&quot;tb_icon_author &quot; or @class=&quot;tb_icon_author no_icon_author&quot;]/@title&#x27;</span>)</span><br><span class="line">create_time_list = html.xpath(<span class="string">&#x27;//div[@class=&quot;threadlist_author pull_right&quot;]/span[@class=&quot;pull-right is_show_create_time&quot;]/text()&#x27;</span>)</span><br></pre></td></tr></table></figure><br>è¿™æ ·ä¿®æ”¹ä¹‹åå°±å¯ä»¥åŒ¹é…åˆ°æ­£ç¡®çš„å®Œæ•´çš„æ•°æ®äº†ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ç™¾åº¦è´´å§çˆ¬å–æ—¶ä¸¤ç§ç½‘é¡µç»“æ„çš„å·®å¼‚&quot;&gt;&lt;a href=&quot;#ç™¾åº¦è´´å§çˆ¬å–æ—¶ä¸¤ç§ç½‘é¡µç»“æ„çš„å·®å¼‚&quot; class=&quot;headerlink&quot; title=&quot;ç™¾åº¦è´´å§çˆ¬å–æ—¶ä¸¤ç§ç½‘é¡µç»“æ„çš„å·®å¼‚&quot;&gt;&lt;/a&gt;ç™¾åº¦è´´å§çˆ¬å–æ—¶ä¸¤ç§ç½‘é¡µç»“æ„çš„å·®å¼‚&lt;/h1&gt;&lt;p&gt;ç™¾åº¦è´´å§ä½œä¸ºå›½å†…æå…·å½±å“åŠ›çš„</summary>
      
    
    
    
    
    <category term="çˆ¬è™«" scheme="https://nmcb666.vip/tags/%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>çˆ¬å–å¾®åšç§»åŠ¨ç«¯è¯„è®º</title>
    <link href="https://nmcb666.vip/posts/eb47d163.html"/>
    <id>https://nmcb666.vip/posts/eb47d163.html</id>
    <published>2025-09-19T16:58:21.000Z</published>
    <updated>2025-12-06T11:22:35.705Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Pythonçˆ¬å–å¾®åšç§»åŠ¨ç«¯è¯„è®ºå®Œæ•´æ•™ç¨‹ï¼ˆåŸºç¡€-å¸¸è§é—®é¢˜ï¼‰"><a href="#Pythonçˆ¬å–å¾®åšç§»åŠ¨ç«¯è¯„è®ºå®Œæ•´æ•™ç¨‹ï¼ˆåŸºç¡€-å¸¸è§é—®é¢˜ï¼‰" class="headerlink" title="Pythonçˆ¬å–å¾®åšç§»åŠ¨ç«¯è¯„è®ºå®Œæ•´æ•™ç¨‹ï¼ˆåŸºç¡€+å¸¸è§é—®é¢˜ï¼‰"></a>Pythonçˆ¬å–å¾®åšç§»åŠ¨ç«¯è¯„è®ºå®Œæ•´æ•™ç¨‹ï¼ˆåŸºç¡€+å¸¸è§é—®é¢˜ï¼‰</h1><p>åœ¨æ•°æ®é‡‡é›†é¢†åŸŸï¼Œå¾®åšä½œä¸ºå›½å†…ä¸»æµçš„ç¤¾äº¤åª’ä½“å¹³å°ï¼Œå…¶è¯„è®ºæ•°æ®è•´å«ç€ä¸°å¯Œçš„ç”¨æˆ·è§‚ç‚¹å’Œèˆ†è®ºå€¾å‘ã€‚ç›¸è¾ƒäºPCç«¯ï¼Œå¾®åšç§»åŠ¨ç«¯æ¥å£æ›´ç®€æ´ã€åçˆ¬æªæ–½ç›¸å¯¹å®½æ¾ï¼Œæ˜¯è·å–è¯„è®ºæ•°æ®çš„ä¼˜é€‰æ–¹æ¡ˆã€‚æœ¬æ–‡å°†ä»¥<strong>Python</strong>ä¸ºå·¥å…·ï¼Œä»ç¯å¢ƒæ­å»ºåˆ°ä»£ç å®ç°ï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ çˆ¬å–å¾®åšç§»åŠ¨ç«¯è¯„è®ºï¼Œå¹¶è§£ç­”è¿‡ç¨‹ä¸­å¯èƒ½é‡åˆ°çš„å¸¸è§é—®é¢˜ã€‚</p><hr><h2 id="ä¸€ã€åŸºç¡€æ•™ç¨‹ï¼šä»é›¶å®ç°å¾®åšè¯„è®ºçˆ¬å–"><a href="#ä¸€ã€åŸºç¡€æ•™ç¨‹ï¼šä»é›¶å®ç°å¾®åšè¯„è®ºçˆ¬å–" class="headerlink" title="ä¸€ã€åŸºç¡€æ•™ç¨‹ï¼šä»é›¶å®ç°å¾®åšè¯„è®ºçˆ¬å–"></a>ä¸€ã€åŸºç¡€æ•™ç¨‹ï¼šä»é›¶å®ç°å¾®åšè¯„è®ºçˆ¬å–</h2><h3 id="1-1-ç¯å¢ƒå‡†å¤‡"><a href="#1-1-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="1.1 ç¯å¢ƒå‡†å¤‡"></a>1.1 ç¯å¢ƒå‡†å¤‡</h3><p>é¦–å…ˆéœ€è¦æ­å»ºPythonçˆ¬è™«ç¯å¢ƒï¼Œæ ¸å¿ƒä¾èµ–åº“å¦‚ä¸‹ï¼š</p><ul><li><p><strong>requests</strong>ï¼šå‘é€HTTPè¯·æ±‚ï¼Œè·å–æ¥å£æ•°æ®</p></li><li><p><strong>json</strong>ï¼šè§£ææ¥å£è¿”å›çš„JSONæ•°æ®ï¼ˆPythonå†…ç½®ï¼Œæ— éœ€å®‰è£…ï¼‰</p></li><li><p><strong>pandas</strong>ï¼šæ•°æ®å­˜å‚¨ä¸å¯¼å‡ºï¼ˆå¯é€‰ï¼Œç”¨äºç”ŸæˆExcelæ–‡ä»¶ï¼‰</p></li><li><p><strong>time</strong>ï¼šè®¾ç½®è¯·æ±‚é—´éš”ï¼Œé¿å…è¢«åçˆ¬ï¼ˆPythonå†…ç½®ï¼‰</p></li></ul><p>å®‰è£…å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">pip install requests pandas</span><br></pre></td></tr></table></figure><h3 id="1-2-æ ¸å¿ƒåŸç†ï¼šæ‰¾åˆ°è¯„è®ºæ¥å£"><a href="#1-2-æ ¸å¿ƒåŸç†ï¼šæ‰¾åˆ°è¯„è®ºæ¥å£" class="headerlink" title="1.2 æ ¸å¿ƒåŸç†ï¼šæ‰¾åˆ°è¯„è®ºæ¥å£"></a>1.2 æ ¸å¿ƒåŸç†ï¼šæ‰¾åˆ°è¯„è®ºæ¥å£</h3><p>å¾®åšç§»åŠ¨ç«¯è¯„è®ºé€šè¿‡AJAXå¼‚æ­¥åŠ è½½ï¼Œæˆ‘ä»¬éœ€è¦å…ˆæ‰¾åˆ°çœŸå®çš„è¯„è®ºæ¥å£ã€‚æ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li><p>æ‰“å¼€æ‰‹æœºæµè§ˆå™¨ï¼ˆæˆ–ç”µè„‘æµè§ˆå™¨åˆ‡æ¢åˆ°<strong>ç§»åŠ¨ç«¯æ¨¡å¼</strong>ï¼‰ï¼Œç™»å½•å¾®åšè´¦å·ï¼Œæ‰¾åˆ°ç›®æ ‡å¾®åšï¼ˆä¾‹å¦‚ï¼š<a href="https://m.weibo.cn/detail/4900000000000000">https://m.weibo.cn/detail/4900000000000000</a>ï¼‰</p></li><li><p>æŒ‰F12æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œåˆ‡æ¢åˆ°<strong>Network</strong>æ ‡ç­¾ï¼Œå‹¾é€‰<strong>XHR</strong>ï¼ˆç­›é€‰AJAXè¯·æ±‚ï¼‰</p></li><li><p>ä¸‹æ‹‰é¡µé¢åŠ è½½è¯„è®ºï¼Œæ­¤æ—¶ä¼šçœ‹åˆ°åä¸º<strong>comment</strong>çš„è¯·æ±‚ï¼Œç‚¹å‡»è¯¥è¯·æ±‚æŸ¥çœ‹è¯¦æƒ…</p></li><li><p>åœ¨<strong>Request URL</strong>ä¸­å¯ä»¥çœ‹åˆ°è¯„è®ºæ¥å£åœ°å€ï¼Œåœ¨<strong>Response</strong>ä¸­å¯ä»¥çœ‹åˆ°JSONæ ¼å¼çš„è¯„è®ºæ•°æ®</p></li></ol><div class="note primary modern"><p>å…¸å‹çš„å¾®åšè¯„è®ºæ¥å£æ ¼å¼ï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">https://m.weibo.cn/comments/hotflow?id=å¾®åšID&amp;mid=å¾®åšID&amp;max_id=ä¸‹ä¸€é¡µæ ‡è¯†&amp;max_id_type=0</span><br></pre></td></tr></table></figure></div><p>å‚æ•°è¯´æ˜ï¼š</p><ul><li><p><strong>id/mid</strong>ï¼šç›®æ ‡å¾®åšçš„IDï¼ˆä»å¾®åšè¯¦æƒ…é¡µURLä¸­è·å–ï¼Œä¾‹å¦‚URLæœ«å°¾çš„æ•°å­—ä¸²ï¼‰</p></li><li><p><strong>max_id</strong>ï¼šåˆ†é¡µæ ‡è¯†ï¼Œåˆå§‹ä¸º0ï¼Œåç»­é¡µé¢çš„max_idä»å½“å‰å“åº”ä¸­è·å–</p></li><li><p><strong>max_id_type</strong>ï¼šå›ºå®šä¸º0å³å¯</p></li></ul><h3 id="1-3-ä»£ç å®ç°æ­¥éª¤"><a href="#1-3-ä»£ç å®ç°æ­¥éª¤" class="headerlink" title="1.3 ä»£ç å®ç°æ­¥éª¤"></a>1.3 ä»£ç å®ç°æ­¥éª¤</h3><h4 id="æ­¥éª¤1ï¼šè·å–è¯·æ±‚å¤´ï¼ˆHeadersï¼‰"><a href="#æ­¥éª¤1ï¼šè·å–è¯·æ±‚å¤´ï¼ˆHeadersï¼‰" class="headerlink" title="æ­¥éª¤1ï¼šè·å–è¯·æ±‚å¤´ï¼ˆHeadersï¼‰"></a>æ­¥éª¤1ï¼šè·å–è¯·æ±‚å¤´ï¼ˆHeadersï¼‰</h4><p>ä¸ºäº†æ¨¡æ‹ŸçœŸå®ç”¨æˆ·è¯·æ±‚ï¼Œéœ€è¦åœ¨è¯·æ±‚ä¸­æ·»åŠ Headersï¼Œæ ¸å¿ƒå‚æ•°åŒ…æ‹¬<strong>User-Agent</strong>å’Œ<strong>Cookie</strong>ï¼š</p><ul><li><p><strong>User-Agent</strong>ï¼šæ ‡è¯†æµè§ˆå™¨ç±»å‹ï¼Œç§»åŠ¨ç«¯UAç¤ºä¾‹ï¼š<code>Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Mobile/15E148 Safari/604.1</code></p></li><li><p><strong>Cookie</strong>ï¼šåŒ…å«ç™»å½•çŠ¶æ€ä¿¡æ¯ï¼Œä»æµè§ˆå™¨å¼€å‘è€…å·¥å…·çš„Request Headersä¸­å¤åˆ¶ï¼ˆç™»å½•åæ‰èƒ½è·å–æ›´å¤šè¯„è®ºï¼‰</p></li></ul><h4 id="æ­¥éª¤2ï¼šå‘é€è¯·æ±‚å¹¶è§£ææ•°æ®"><a href="#æ­¥éª¤2ï¼šå‘é€è¯·æ±‚å¹¶è§£ææ•°æ®" class="headerlink" title="æ­¥éª¤2ï¼šå‘é€è¯·æ±‚å¹¶è§£ææ•°æ®"></a>æ­¥éª¤2ï¼šå‘é€è¯·æ±‚å¹¶è§£ææ•°æ®</h4><p>ç¼–å†™ä»£ç å‘é€GETè¯·æ±‚ï¼Œè§£æJSONå“åº”ä¸­çš„è¯„è®ºå†…å®¹ï¼ˆç”¨æˆ·åã€è¯„è®ºæ—¶é—´ã€è¯„è®ºå†…å®¹ç­‰ï¼‰ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½®ä¿¡æ¯</span></span><br><span class="line">weibo_id = <span class="string">&quot;4900000000000000&quot;</span>  <span class="comment"># ç›®æ ‡å¾®åšID</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&quot;User-Agent&quot;</span>: <span class="string">&quot;Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/15.0 Mobile/15E148 Safari/604.1&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Cookie&quot;</span>: <span class="string">&quot;ä½ çš„Cookieä¿¡æ¯&quot;</span>  <span class="comment"># æ›¿æ¢ä¸ºè‡ªå·±çš„Cookie</span></span><br><span class="line">&#125;</span><br><span class="line">comments = []  <span class="comment"># å­˜å‚¨è¯„è®ºæ•°æ®</span></span><br><span class="line">max_id = <span class="number">0</span>  <span class="comment"># åˆå§‹åˆ†é¡µæ ‡è¯†</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="comment"># æ„å»ºè¯·æ±‚URL</span></span><br><span class="line">    url = <span class="string">f&quot;https://m.weibo.cn/comments/hotflow?id=<span class="subst">&#123;weibo_id&#125;</span>&amp;mid=<span class="subst">&#123;weibo_id&#125;</span>&amp;max_id=<span class="subst">&#123;max_id&#125;</span>&amp;max_id_type=0&quot;</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        response = requests.get(url, headers=headers, timeout=<span class="number">10</span>)</span><br><span class="line">        response.raise_for_status()  <span class="comment"># è‹¥çŠ¶æ€ç ä¸æ˜¯200ï¼ŒæŠ›å‡ºå¼‚å¸¸</span></span><br><span class="line">        data = json.loads(response.text)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># æå–è¯„è®ºåˆ—è¡¨</span></span><br><span class="line">        comment_list = data.get(<span class="string">&quot;data&quot;</span>, &#123;&#125;).get(<span class="string">&quot;data&quot;</span>, [])</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> comment_list:  <span class="comment"># æ²¡æœ‰æ›´å¤šè¯„è®ºæ—¶é€€å‡ºå¾ªç¯</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;å·²è·å–æ‰€æœ‰è¯„è®º&quot;</span>)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># è§£ææ¯æ¡è¯„è®º</span></span><br><span class="line">        <span class="keyword">for</span> comment <span class="keyword">in</span> comment_list:</span><br><span class="line">            item = &#123;</span><br><span class="line">                <span class="string">&quot;ç”¨æˆ·å&quot;</span>: comment.get(<span class="string">&quot;user&quot;</span>, &#123;&#125;).get(<span class="string">&quot;screen_name&quot;</span>, <span class="string">&quot;&quot;</span>),</span><br><span class="line">                <span class="string">&quot;ç”¨æˆ·ID&quot;</span>: comment.get(<span class="string">&quot;user&quot;</span>, &#123;&#125;).get(<span class="string">&quot;id&quot;</span>, <span class="string">&quot;&quot;</span>),</span><br><span class="line">                <span class="string">&quot;è¯„è®ºæ—¶é—´&quot;</span>: comment.get(<span class="string">&quot;created_at&quot;</span>, <span class="string">&quot;&quot;</span>),</span><br><span class="line">                <span class="string">&quot;è¯„è®ºå†…å®¹&quot;</span>: comment.get(<span class="string">&quot;text&quot;</span>, <span class="string">&quot;&quot;</span>),</span><br><span class="line">                <span class="string">&quot;ç‚¹èµæ•°&quot;</span>: comment.get(<span class="string">&quot;like_count&quot;</span>, <span class="number">0</span>),</span><br><span class="line">                <span class="string">&quot;å›å¤æ•°&quot;</span>: comment.get(<span class="string">&quot;reply_count&quot;</span>, <span class="number">0</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            comments.append(item)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;å·²è·å–<span class="subst">&#123;<span class="built_in">len</span>(comments)&#125;</span>æ¡è¯„è®º&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment"># æ›´æ–°ä¸‹ä¸€é¡µçš„max_id</span></span><br><span class="line">        max_id = data.get(<span class="string">&quot;data&quot;</span>, &#123;&#125;).get(<span class="string">&quot;max_id&quot;</span>, <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">if</span> max_id == <span class="number">0</span>:  <span class="comment"># æ²¡æœ‰ä¸‹ä¸€é¡µæ—¶é€€å‡º</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># è®¾ç½®è¯·æ±‚é—´éš”ï¼Œé¿å…è¢«å°IP</span></span><br><span class="line">        time.sleep(<span class="number">2</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;è¯·æ±‚å‡ºé”™ï¼š<span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤3ï¼šæ•°æ®å­˜å‚¨"><a href="#æ­¥éª¤3ï¼šæ•°æ®å­˜å‚¨" class="headerlink" title="æ­¥éª¤3ï¼šæ•°æ®å­˜å‚¨"></a>æ­¥éª¤3ï¼šæ•°æ®å­˜å‚¨</h4><p>å°†çˆ¬å–åˆ°çš„è¯„è®ºæ•°æ®å¯¼å‡ºä¸ºExcelæ–‡ä»¶ï¼Œæ–¹ä¾¿åç»­åˆ†æï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># è½¬æ¢ä¸ºDataFrameå¹¶å¯¼å‡º</span></span><br><span class="line">df = pd.DataFrame(comments)</span><br><span class="line">df.to_excel(<span class="string">&quot;å¾®åšè¯„è®º.xlsx&quot;</span>, index=<span class="literal">False</span>, engine=<span class="string">&quot;openpyxl&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;è¯„è®ºæ•°æ®å·²ä¿å­˜åˆ°å¾®åšè¯„è®º.xlsx&quot;</span>)</span><br></pre></td></tr></table></figure><hr><h2 id="äºŒã€å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ"><a href="#äºŒã€å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ" class="headerlink" title="äºŒã€å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ"></a>äºŒã€å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ</h2><h3 id="2-1-é—®é¢˜1ï¼šè¯·æ±‚è¿”å›403-401é”™è¯¯"><a href="#2-1-é—®é¢˜1ï¼šè¯·æ±‚è¿”å›403-401é”™è¯¯" class="headerlink" title="2.1 é—®é¢˜1ï¼šè¯·æ±‚è¿”å›403/401é”™è¯¯"></a>2.1 é—®é¢˜1ï¼šè¯·æ±‚è¿”å›403/401é”™è¯¯</h3><p><strong>åŸå› </strong>ï¼šHeaderså‚æ•°ä¸å®Œæ•´æˆ–Cookieå¤±æ•ˆï¼ŒæœåŠ¡å™¨è¯†åˆ«ä¸ºçˆ¬è™«è¯·æ±‚ã€‚</p><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><ul><li><p>æ£€æŸ¥Cookieæ˜¯å¦æ­£ç¡®ï¼Œé‡æ–°ç™»å½•å¾®åšåå¤åˆ¶æœ€æ–°çš„Cookie</p></li><li><p>è¡¥å……Headersä¸­çš„å…¶ä»–å‚æ•°ï¼ˆå¦‚<strong>Referer</strong>ï¼šè®¾ç½®ä¸ºç›®æ ‡å¾®åšè¯¦æƒ…é¡µURLï¼‰</p></li><li><p>ç¡®ä¿User-Agentæ˜¯ç§»åŠ¨ç«¯æ ¼å¼ï¼Œé¿å…ä½¿ç”¨PCç«¯UA</p></li></ul><h3 id="2-2-é—®é¢˜2ï¼šåªèƒ½çˆ¬å–å‰20æ¡è¯„è®º"><a href="#2-2-é—®é¢˜2ï¼šåªèƒ½çˆ¬å–å‰20æ¡è¯„è®º" class="headerlink" title="2.2 é—®é¢˜2ï¼šåªèƒ½çˆ¬å–å‰20æ¡è¯„è®º"></a>2.2 é—®é¢˜2ï¼šåªèƒ½çˆ¬å–å‰20æ¡è¯„è®º</h3><p><strong>åŸå› </strong>ï¼šæœªæ­£ç¡®å¤„ç†åˆ†é¡µå‚æ•°max_idï¼Œæˆ–æœªç™»å½•å¯¼è‡´åªèƒ½è·å–å…¬å¼€è¯„è®ºã€‚</p><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><ul><li><p>ç¡®ä¿ç™»å½•çŠ¶æ€ï¼ˆCookieæœ‰æ•ˆï¼‰ï¼Œç™»å½•åå¯è·å–æ›´å¤šè¯„è®º</p></li><li><p>æ£€æŸ¥max_idæ˜¯å¦æ­£ç¡®ä»å“åº”ä¸­æå–ï¼Œé¿å…æ‰‹åŠ¨è®¾ç½®å›ºå®šå€¼</p></li><li><p>éƒ¨åˆ†å¾®åšå¯èƒ½é™åˆ¶è¯„è®ºæŸ¥çœ‹æƒé™ï¼Œå±äºæ­£å¸¸æƒ…å†µ</p></li></ul><h3 id="2-3-é—®é¢˜3ï¼šIPè¢«å°ç¦ï¼Œæ— æ³•å‘é€è¯·æ±‚"><a href="#2-3-é—®é¢˜3ï¼šIPè¢«å°ç¦ï¼Œæ— æ³•å‘é€è¯·æ±‚" class="headerlink" title="2.3 é—®é¢˜3ï¼šIPè¢«å°ç¦ï¼Œæ— æ³•å‘é€è¯·æ±‚"></a>2.3 é—®é¢˜3ï¼šIPè¢«å°ç¦ï¼Œæ— æ³•å‘é€è¯·æ±‚</h3><p><strong>åŸå› </strong>ï¼šè¯·æ±‚é¢‘ç‡è¿‡é«˜ï¼Œè§¦å‘å¾®åšåçˆ¬æœºåˆ¶ã€‚</p><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><ul><li><p>å¢åŠ è¯·æ±‚é—´éš”æ—¶é—´ï¼ˆå¦‚time.sleep(3-5ç§’)ï¼‰ï¼Œé¿å…é«˜é¢‘è¯·æ±‚</p></li><li><p>ä½¿ç”¨ä»£ç†IPæ± ï¼Œè½®æ¢IPåœ°å€å‘é€è¯·æ±‚ï¼ˆæ¨èä½¿ç”¨é«˜åŒ¿ä»£ç†ï¼‰</p></li><li><p>æš‚åœçˆ¬å–1-2å°æ—¶ï¼ŒIPå°ç¦é€šå¸¸æ˜¯ä¸´æ—¶çš„</p></li></ul><h3 id="2-4-é—®é¢˜4ï¼šè¯„è®ºå†…å®¹å«HTMLæ ‡ç­¾"><a href="#2-4-é—®é¢˜4ï¼šè¯„è®ºå†…å®¹å«HTMLæ ‡ç­¾" class="headerlink" title="2.4 é—®é¢˜4ï¼šè¯„è®ºå†…å®¹å«HTMLæ ‡ç­¾"></a>2.4 é—®é¢˜4ï¼šè¯„è®ºå†…å®¹å«HTMLæ ‡ç­¾</h3><p><strong>åŸå› </strong>ï¼šæ¥å£è¿”å›çš„textå­—æ®µåŒ…å«HTMLæ ¼å¼ï¼ˆå¦‚è¡¨æƒ…ã€è¯é¢˜é“¾æ¥ç­‰ï¼‰ã€‚</p><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šä½¿ç”¨<strong>BeautifulSoup</strong>æ¸…ç†HTMLæ ‡ç­¾ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¸…ç†è¯„è®ºå†…å®¹ä¸­çš„HTMLæ ‡ç­¾</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">clean_html</span>(<span class="params">text</span>):</span><br><span class="line">    soup = BeautifulSoup(text, <span class="string">&quot;html.parser&quot;</span>)</span><br><span class="line">    <span class="keyword">return</span> soup.get_text()</span><br><span class="line"></span><br><span class="line"><span class="comment"># åœ¨è§£æè¯„è®ºæ—¶è°ƒç”¨</span></span><br><span class="line"><span class="string">&quot;è¯„è®ºå†…å®¹&quot;</span>: clean_html(comment.get(<span class="string">&quot;text&quot;</span>, <span class="string">&quot;&quot;</span>)),</span><br></pre></td></tr></table></figure><h3 id="2-5-é—®é¢˜5ï¼šå“åº”æ•°æ®æ ¼å¼å¼‚å¸¸"><a href="#2-5-é—®é¢˜5ï¼šå“åº”æ•°æ®æ ¼å¼å¼‚å¸¸" class="headerlink" title="2.5 é—®é¢˜5ï¼šå“åº”æ•°æ®æ ¼å¼å¼‚å¸¸"></a>2.5 é—®é¢˜5ï¼šå“åº”æ•°æ®æ ¼å¼å¼‚å¸¸</h3><p><strong>åŸå› </strong>ï¼šæ¥å£å‚æ•°å˜åŒ–æˆ–å¾®åšæ›´æ–°åçˆ¬ç­–ç•¥ã€‚</p><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><ul><li><p>é‡æ–°é€šè¿‡æµè§ˆå™¨å¼€å‘è€…å·¥å…·æŠ“å–æœ€æ–°çš„è¯„è®ºæ¥å£ï¼Œç¡®è®¤å‚æ•°æ˜¯å¦å˜åŒ–</p></li><li><p>æ‰“å°response.textæŸ¥çœ‹åŸå§‹å“åº”ï¼Œåˆ†ææ•°æ®æ ¼å¼æ˜¯å¦ä¸é¢„æœŸä¸€è‡´</p></li><li><p>å…³æ³¨å¾®åšæ¥å£çš„å®˜æ–¹å˜åŒ–ï¼ˆè‹¥æœ‰ï¼‰ï¼ŒåŠæ—¶è°ƒæ•´ä»£ç </p></li></ul><h3 id="2-6-é—®é¢˜6ï¼šè¯·æ±‚ç¬¬ä¸€é¡µä¹‹åçš„æ•°æ®å“åº”ok-0"><a href="#2-6-é—®é¢˜6ï¼šè¯·æ±‚ç¬¬ä¸€é¡µä¹‹åçš„æ•°æ®å“åº”ok-0" class="headerlink" title="2.6 é—®é¢˜6ï¼šè¯·æ±‚ç¬¬ä¸€é¡µä¹‹åçš„æ•°æ®å“åº”ok{0}"></a>2.6 é—®é¢˜6ï¼šè¯·æ±‚ç¬¬ä¸€é¡µä¹‹åçš„æ•°æ®å“åº”ok{0}</h3><p><strong>åŸå› </strong>ï¼šè¯·æ±‚çš„Cookieå·²å¤±æ•ˆï¼Œéœ€è¦é‡æ–°ç™»å½•è·å–Cookieã€‚(å› ä¸ºå¾®åšéœ€è¦ç™»å½•æ‰èƒ½æŸ¥çœ‹æ›´å¤šè¯„è®º)</p><p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p><ul><li>ç™»å½•å¾®åšè´¦å·ï¼Œæ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼Œé€‰æ‹©Networké€‰é¡¹å¡ï¼Œç‚¹å‡»åˆ·æ–°æŒ‰é’®ã€‚</li><li>åœ¨Networké€‰é¡¹å¡ä¸­ï¼Œæ‰¾åˆ°å¯¹åº”çš„è¯·æ±‚ï¼ŒæŸ¥çœ‹å“åº”å¤´ï¼Œæ‰¾åˆ°Cookieå­—æ®µï¼Œå¤åˆ¶Cookieå€¼ã€‚</li><li>å°†Cookieå€¼æ›¿æ¢ä¸ºé…ç½®æ–‡ä»¶ä¸­çš„Cookieå­—æ®µã€‚</li><li>é‡æ–°è¿è¡Œä»£ç ï¼Œå³å¯è·å–æœ€æ–°æ•°æ®ã€‚</li></ul><hr><h2 id="ä¸‰ã€æ³¨æ„äº‹é¡¹"><a href="#ä¸‰ã€æ³¨æ„äº‹é¡¹" class="headerlink" title="ä¸‰ã€æ³¨æ„äº‹é¡¹"></a>ä¸‰ã€æ³¨æ„äº‹é¡¹</h2><ul><li><p><strong>åˆè§„æ€§</strong>ï¼šçˆ¬å–å¾®åšæ•°æ®éœ€éµå®ˆã€Šå¾®åšæœåŠ¡ä½¿ç”¨åè®®ã€‹ï¼Œä¸å¾—ç”¨äºå•†ä¸šç”¨é€”æˆ–æ¶æ„æ”»å‡»ï¼Œå»ºè®®ä»…ç”¨äºä¸ªäººå­¦ä¹ ç ”ç©¶</p></li><li><p><strong>ç™»å½•çŠ¶æ€</strong>ï¼šå°½é‡ä½¿ç”¨å°å·ç™»å½•ï¼Œé¿å…ä¸»å·å› çˆ¬è™«è¡Œä¸ºè¢«é™åˆ¶</p></li><li><p><strong>è¯·æ±‚é¢‘ç‡</strong>ï¼šä¿æŒä½è°ƒï¼Œé¿å…çŸ­æ—¶é—´å†…å‘é€å¤§é‡è¯·æ±‚ï¼Œå‹å¥½å¯¹å¾…æœåŠ¡å™¨</p></li><li><p><strong>æ•°æ®å¤‡ä»½</strong>ï¼šå®šæœŸä¿å­˜çˆ¬å–åˆ°çš„æ•°æ®ï¼Œé˜²æ­¢ç¨‹åºå¼‚å¸¸å¯¼è‡´æ•°æ®ä¸¢å¤±</p></li></ul><p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œä½ å¯ä»¥æˆåŠŸçˆ¬å–å¾®åšç§»åŠ¨ç«¯è¯„è®ºæ•°æ®ã€‚å¦‚æœé‡åˆ°å…¶ä»–é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€äº¤æµï¼</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Pythonçˆ¬å–å¾®åšç§»åŠ¨ç«¯è¯„è®ºå®Œæ•´æ•™ç¨‹ï¼ˆåŸºç¡€-å¸¸è§é—®é¢˜ï¼‰&quot;&gt;&lt;a href=&quot;#Pythonçˆ¬å–å¾®åšç§»åŠ¨ç«¯è¯„è®ºå®Œæ•´æ•™ç¨‹ï¼ˆåŸºç¡€-å¸¸è§é—®é¢˜ï¼‰&quot; class=&quot;headerlink&quot; title=&quot;Pythonçˆ¬å–å¾®åšç§»åŠ¨ç«¯è¯„è®ºå®Œæ•´æ•™ç¨‹ï¼ˆåŸºç¡€+å¸¸è§é—®é¢˜ï¼‰&quot;&gt;&lt;/a&gt;Py</summary>
      
    
    
    
    
    <category term="çˆ¬è™«" scheme="https://nmcb666.vip/tags/%E7%88%AC%E8%99%AB/"/>
    
  </entry>
  
  <entry>
    <title>å…³äºGitHub PagesåŠ è½½é™æ€æ–‡ä»¶å¤±è´¥</title>
    <link href="https://nmcb666.vip/posts/b1168866.html"/>
    <id>https://nmcb666.vip/posts/b1168866.html</id>
    <published>2025-09-17T23:50:28.000Z</published>
    <updated>2025-12-06T11:22:35.704Z</updated>
    
    <content type="html"><![CDATA[<h1 id="è§£å†³Github-Pagesä¸åŠ è½½Vueæ¡†æ¶é¡¹ç›®é™æ€æ–‡ä»¶é—®é¢˜"><a href="#è§£å†³Github-Pagesä¸åŠ è½½Vueæ¡†æ¶é¡¹ç›®é™æ€æ–‡ä»¶é—®é¢˜" class="headerlink" title="è§£å†³Github Pagesä¸åŠ è½½Vueæ¡†æ¶é¡¹ç›®é™æ€æ–‡ä»¶é—®é¢˜"></a>è§£å†³Github Pagesä¸åŠ è½½Vueæ¡†æ¶é¡¹ç›®é™æ€æ–‡ä»¶é—®é¢˜</h1><p>åœ¨ä½¿ç”¨Vueæ¡†æ¶å¼€å‘é¡¹ç›®å¹¶éƒ¨ç½²åˆ°Github Pagesæ—¶ï¼Œå¾ˆå¤šå¼€å‘è€…éƒ½ä¼šé‡åˆ°ä¸€ä¸ªå¤´ç–¼çš„é—®é¢˜ï¼šé¡µé¢èƒ½å¤Ÿæ­£å¸¸è®¿é—®ï¼Œä½†é¡¹ç›®ä¸­çš„JSã€CSSç­‰é™æ€æ–‡ä»¶å´æ— æ³•åŠ è½½ï¼Œå¯¼è‡´é¡µé¢æ ·å¼é”™ä¹±ã€åŠŸèƒ½å¤±æ•ˆã€‚å…¶å®è¿™ä¸ªé—®é¢˜çš„æ ¸å¿ƒåœ¨äºé™æ€æ–‡ä»¶çš„è·¯å¾„é…ç½®ä¸å½“ï¼Œæœ¬æ–‡å°†è¯¦ç»†ä»‹ç»å¦‚ä½•é€šè¿‡é…ç½®æ‰“åŒ…å·¥å…·çš„è·¯å¾„ä»¥åŠGithub Pagesè®¾ç½®æ¥è§£å†³è¿™ä¸€é—®é¢˜ï¼Œå¹¶åˆ†åˆ«ä»¥Viteå’ŒWebpackä¸¤ç§å¸¸ç”¨æ‰“åŒ…å·¥å…·è¿›è¡Œæ¼”ç¤ºã€‚</p><h2 id="ä¸€ã€é—®é¢˜åŸå› åˆ†æ"><a href="#ä¸€ã€é—®é¢˜åŸå› åˆ†æ" class="headerlink" title="ä¸€ã€é—®é¢˜åŸå› åˆ†æ"></a>ä¸€ã€é—®é¢˜åŸå› åˆ†æ</h2><p>Github Pageséƒ¨ç½²çš„é¡¹ç›®ï¼Œå…¶è®¿é—®è·¯å¾„é€šå¸¸æ˜¯ <code>https://[ç”¨æˆ·å].github.io/[é¡¹ç›®å]/</code>ï¼Œè€ŒVueé¡¹ç›®é»˜è®¤çš„é™æ€æ–‡ä»¶è·¯å¾„æ˜¯åŸºäºæ ¹ç›®å½•ï¼ˆ<code>/</code>ï¼‰çš„ã€‚å½“é¡¹ç›®éƒ¨ç½²åˆ°Github Pagesåï¼Œé™æ€æ–‡ä»¶ä¼šè¢«è¯·æ±‚ä»æ ¹ç›®å½•è·å–ï¼Œè€Œå®é™…é™æ€æ–‡ä»¶å´åœ¨<code>/[é¡¹ç›®å]/</code>ç›®å½•ä¸‹ï¼Œè¿™å°±å¯¼è‡´äº†è·¯å¾„ä¸åŒ¹é…ï¼Œé™æ€æ–‡ä»¶åŠ è½½å¤±è´¥ã€‚</p><h2 id="äºŒã€ä¸åŒæ‰“åŒ…å·¥å…·çš„é…ç½®æ–¹æ³•"><a href="#äºŒã€ä¸åŒæ‰“åŒ…å·¥å…·çš„é…ç½®æ–¹æ³•" class="headerlink" title="äºŒã€ä¸åŒæ‰“åŒ…å·¥å…·çš„é…ç½®æ–¹æ³•"></a>äºŒã€ä¸åŒæ‰“åŒ…å·¥å…·çš„é…ç½®æ–¹æ³•</h2><div class="note primary modern"><p>è§£å†³è¯¥é—®é¢˜çš„å…³é”®æ˜¯ä¿®æ”¹æ‰“åŒ…å·¥å…·çš„é™æ€æ–‡ä»¶å…¬å…±è·¯å¾„ï¼ˆpublicPathï¼‰ï¼Œä½¿å…¶æŒ‡å‘Github Pagesçš„é¡¹ç›®åœ°å€ã€‚</p></div><div class="tip success"><p>å¦‚æœä½ ä¸æƒ³æ‰“åŒ…ï¼Œç›´æ¥åœ¨æ ¹ç›®å½•ä¸‹æœ‰ä¸€ä¸ªindex.htmlé™æ€ç½‘é¡µæ–‡ä»¶ã€‚é‚£ä¹ˆå°†é‡Œé¢js,cssç­‰é™æ€æ–‡ä»¶çš„å¼•ç”¨è·¯å¾„å‰é¢åŠ ä¸Š<code>/[é¡¹ç›®å]/</code>å³å¯ã€‚ä¾‹å¦‚ï¼š/static/js/app.js â€”&gt; /[é¡¹ç›®å]/static/js/app.js å¦‚æœæˆåŠŸåˆ™æ— éœ€æ‰“åŒ…</p></div><p>ä¸‹é¢åˆ†åˆ«ä»‹ç»Viteå’ŒWebpackçš„é…ç½®æ­¥éª¤ã€‚</p><h3 id="2-1-Viteæ‰“åŒ…å·¥å…·é…ç½®"><a href="#2-1-Viteæ‰“åŒ…å·¥å…·é…ç½®" class="headerlink" title="2.1 Viteæ‰“åŒ…å·¥å…·é…ç½®"></a>2.1 Viteæ‰“åŒ…å·¥å…·é…ç½®</h3><p>Viteæ˜¯ç›®å‰Vueé¡¹ç›®å¸¸ç”¨çš„æ„å»ºå·¥å…·ï¼Œé…ç½®æ–¹å¼è¾ƒä¸ºç®€æ´ï¼Œåªéœ€ä¿®æ”¹é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„<code>vite.config.js</code>æ–‡ä»¶ã€‚</p><ol><li><p><strong>æ‰¾åˆ°vite.config.jsæ–‡ä»¶</strong>ï¼šè¯¥æ–‡ä»¶ä½äºVueé¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ï¼Œå¦‚æœæ²¡æœ‰åˆ™æ‰‹åŠ¨åˆ›å»ºã€‚</p></li><li><p><strong>é…ç½®publicPath</strong>ï¼šåœ¨<code>defineConfig</code>å¯¹è±¡ä¸­æ·»åŠ <code>base</code>å±æ€§ï¼ˆViteä¸­publicPathå¯¹åº”çš„æ˜¯baseï¼‰ï¼Œå…¶å€¼è®¾ç½®ä¸ºä½ çš„Github Pagesé¡¹ç›®åœ°å€ã€‚æ ¼å¼ä¸º <code>&#39;https://[ç”¨æˆ·å].github.io/[é¡¹ç›®å]/&#39;</code>ï¼Œä¾‹å¦‚å¦‚æœç”¨æˆ·åä¸º<code>testuser</code>ï¼Œé¡¹ç›®åä¸º<code>vue-demo</code>ï¼Œåˆ™é…ç½®ä¸º <code>base: &#39;https://testuser.github.io/vue-demo/&#39;</code>ã€‚</p></li><li><p><strong>è®¾ç½®æ‰“åŒ…è¾“å‡ºç›®å½•</strong>ï¼šé»˜è®¤æƒ…å†µä¸‹Viteæ‰“åŒ…è¾“å‡ºåˆ°<code>dist</code>ç›®å½•ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶æ”¹ä¸º<code>docs</code>ç›®å½•ï¼Œæ–¹ä¾¿åç»­Github Pagesé…ç½®ã€‚åœ¨<code>defineConfig</code>ä¸­æ·»åŠ <code>build</code>é€‰é¡¹ï¼Œè®¾ç½®<code>outDir: &#39;docs&#39;</code>ã€‚</p></li></ol><p>é…ç½®å®Œæˆåçš„<code>vite.config.js</code>æ–‡ä»¶ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"><span class="keyword">import</span> vue <span class="keyword">from</span> <span class="string">&#x27;@vitejs/plugin-vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">plugins</span>: [<span class="title function_">vue</span>()],</span><br><span class="line">  <span class="attr">base</span>: <span class="string">&#x27;https://testuser.github.io/vue-demo/&#x27;</span>, <span class="comment">// æ›¿æ¢ä¸ºä½ çš„é¡¹ç›®åœ°å€</span></span><br><span class="line">  <span class="attr">build</span>: &#123;</span><br><span class="line">    <span class="attr">outDir</span>: <span class="string">&#x27;docs&#x27;</span> <span class="comment">// æ‰“åŒ…è¾“å‡ºåˆ°docsç›®å½•</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>baseè·¯å¾„ä¸å”¯ä¸€ å¯è‡ªè¡Œåœ¨æµè§ˆå™¨æ§åˆ¶å°ä¸­æŸ¥çœ‹è¯·æ±‚è·¯å¾„  å°†è¯·æ±‚è·¯å¾„è°ƒæ•´ä¸º https://&lt;ä½ çš„åç§°&gt;.github.io/&lt;é¡¹ç›®åç§°&gt;/é™æ€æ–‡ä»¶è·¯å¾„ã€‚å³å¯<br>é…ç½®å®Œæˆåï¼Œæ‰§è¡Œ<code>npm run build</code>å‘½ä»¤è¿›è¡Œæ‰“åŒ…ï¼Œæ­¤æ—¶é¡¹ç›®æ ¹ç›®å½•ä¸‹ä¼šç”Ÿæˆ<code>docs</code>æ–‡ä»¶å¤¹ï¼Œé‡Œé¢åŒ…å«äº†æ‰“åŒ…åçš„é™æ€æ–‡ä»¶ã€‚</p><h3 id="2-2-Webpackæ‰“åŒ…å·¥å…·é…ç½®ï¼ˆVue-CLIé¡¹ç›®ï¼‰"><a href="#2-2-Webpackæ‰“åŒ…å·¥å…·é…ç½®ï¼ˆVue-CLIé¡¹ç›®ï¼‰" class="headerlink" title="2.2 Webpackæ‰“åŒ…å·¥å…·é…ç½®ï¼ˆVue CLIé¡¹ç›®ï¼‰"></a>2.2 Webpackæ‰“åŒ…å·¥å…·é…ç½®ï¼ˆVue CLIé¡¹ç›®ï¼‰</h3><p>å¦‚æœä½ çš„Vueé¡¹ç›®æ˜¯ä½¿ç”¨Vue CLIåˆ›å»ºçš„ï¼Œé‚£ä¹ˆä½¿ç”¨çš„æ‰“åŒ…å·¥å…·æ˜¯Webpackï¼Œéœ€è¦ä¿®æ”¹<code>vue.config.js</code>æ–‡ä»¶ã€‚</p><ol><li><p><strong>æ‰¾åˆ°vue.config.jsæ–‡ä»¶</strong>ï¼šè¯¥æ–‡ä»¶ä½äºVueé¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ï¼Œè‹¥ä¸å­˜åœ¨åˆ™æ‰‹åŠ¨åˆ›å»ºã€‚</p></li><li><p><strong>é…ç½®publicPath</strong>ï¼šåœ¨é…ç½®å¯¹è±¡ä¸­æ·»åŠ <code>publicPath</code>å±æ€§ï¼Œå€¼è®¾ç½®ä¸ºä½ çš„Github Pagesé¡¹ç›®åœ°å€ï¼Œæ ¼å¼ä¸Viteç›¸åŒï¼Œå³ <code>&#39;https://[ç”¨æˆ·å].github.io/[é¡¹ç›®å]/&#39;</code>ã€‚</p></li><li><p><strong>è®¾ç½®æ‰“åŒ…è¾“å‡ºç›®å½•</strong>ï¼šåŒæ ·å°†æ‰“åŒ…è¾“å‡ºç›®å½•æ”¹ä¸º<code>docs</code>ï¼Œåœ¨é…ç½®å¯¹è±¡ä¸­æ·»åŠ <code>outputDir: &#39;docs&#39;</code>ã€‚</p></li></ol><p>é…ç½®å®Œæˆåçš„<code>vue.config.js</code>æ–‡ä»¶ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">publicPath</span>: <span class="string">&#x27;https://testuser.github.io/vue-demo/&#x27;</span>, <span class="comment">// æ›¿æ¢ä¸ºä½ çš„é¡¹ç›®åœ°å€</span></span><br><span class="line">  <span class="attr">outputDir</span>: <span class="string">&#x27;docs&#x27;</span> <span class="comment">// æ‰“åŒ…è¾“å‡ºåˆ°docsç›®å½•</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œ<code>npm run build</code>å‘½ä»¤æ‰“åŒ…ï¼Œé¡¹ç›®æ ¹ç›®å½•ä¼šç”Ÿæˆ<code>docs</code>æ–‡ä»¶å¤¹ï¼ŒåŒ…å«æ‰“åŒ…åçš„é™æ€èµ„æºã€‚</p><h2 id="ä¸‰ã€Github-Pagesé…ç½®æ­¥éª¤"><a href="#ä¸‰ã€Github-Pagesé…ç½®æ­¥éª¤" class="headerlink" title="ä¸‰ã€Github Pagesé…ç½®æ­¥éª¤"></a>ä¸‰ã€Github Pagesé…ç½®æ­¥éª¤</h2><p>å®Œæˆæ‰“åŒ…å·¥å…·é…ç½®å¹¶ç”Ÿæˆ<code>docs</code>æ–‡ä»¶å¤¹åï¼Œéœ€è¦åœ¨Githubä»“åº“ä¸­è®¾ç½®Github Pagesçš„éƒ¨ç½²æºã€‚</p><ol><li><p><strong>æ¨é€ä»£ç åˆ°Githubä»“åº“</strong>ï¼šå°†åŒ…å«<code>docs</code>æ–‡ä»¶å¤¹çš„é¡¹ç›®ä»£ç æ¨é€åˆ°Githubä»“åº“çš„<code>main</code>åˆ†æ”¯ï¼ˆæˆ–ä½ ä½¿ç”¨çš„ä¸»åˆ†æ”¯ï¼‰ã€‚</p></li><li><p><strong>è¿›å…¥ä»“åº“è®¾ç½®</strong>ï¼šæ‰“å¼€ä½ çš„Githubé¡¹ç›®ä»“åº“ï¼Œç‚¹å‡»å³ä¸Šè§’çš„<code>Settings</code>é€‰é¡¹ã€‚</p></li><li><p><strong>æ‰¾åˆ°Github Pagesè®¾ç½®</strong>ï¼šåœ¨å·¦ä¾§å¯¼èˆªæ ä¸­æ‰¾åˆ°<code>Pages</code>é€‰é¡¹å¹¶ç‚¹å‡»è¿›å…¥ã€‚</p></li><li><p><strong>è®¾ç½®éƒ¨ç½²æº</strong>ï¼šåœ¨<code>Build and deployment</code>ä¸‹çš„<code>Source</code>é€‰é¡¹ä¸­ï¼Œé€‰æ‹©<code>Deploy from a branch</code>ã€‚ç„¶ååœ¨<code>Branch</code>é€‰é¡¹ä¸­ï¼Œé€‰æ‹©<code>main</code>åˆ†æ”¯ï¼Œå¹¶åœ¨åé¢çš„æ–‡ä»¶å¤¹é€‰æ‹©æ¡†ä¸­é€‰æ‹©<code>/docs</code>ï¼Œç‚¹å‡»<code>Save</code>ä¿å­˜è®¾ç½®ã€‚</p></li></ol><p>è®¾ç½®å®Œæˆåï¼ŒGithub Pagesä¼šè‡ªåŠ¨éƒ¨ç½²ä½ çš„é¡¹ç›®ï¼Œé€šå¸¸å‡ åˆ†é’Ÿåå³å¯é€šè¿‡<code>https://[ç”¨æˆ·å].github.io/[é¡¹ç›®å]/</code>è®¿é—®ï¼Œæ­¤æ—¶JSã€CSSç­‰é™æ€æ–‡ä»¶å°±èƒ½æ­£å¸¸åŠ è½½äº†ã€‚</p><h2 id="å››ã€å¸¸è§é—®é¢˜æ’æŸ¥"><a href="#å››ã€å¸¸è§é—®é¢˜æ’æŸ¥" class="headerlink" title="å››ã€å¸¸è§é—®é¢˜æ’æŸ¥"></a>å››ã€å¸¸è§é—®é¢˜æ’æŸ¥</h2><ul><li><p><strong>publicPathé…ç½®é”™è¯¯</strong>ï¼šç¡®ä¿publicPathï¼ˆViteä¸­ä¸ºbaseï¼‰çš„è·¯å¾„æ­£ç¡®ï¼Œæœ«å°¾å¿…é¡»åŠ ä¸Š<code>/</code>ï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´éƒ¨åˆ†é™æ€æ–‡ä»¶è·¯å¾„æ‹¼æ¥é”™è¯¯ã€‚</p></li><li><p><strong>docsæ–‡ä»¶å¤¹æœªæ¨é€</strong>ï¼šæ£€æŸ¥æ˜¯å¦å°†æ‰“åŒ…ç”Ÿæˆçš„<code>docs</code>æ–‡ä»¶å¤¹æ¨é€åˆ°äº†Githubä»“åº“ï¼Œè‹¥æœªæ¨é€åˆ™éœ€è¦æ‰§è¡Œ<code>git add docs</code>ã€<code>git commit -m &quot;add docs&quot;</code>ã€<code>git push</code>å‘½ä»¤ã€‚</p></li><li><p><strong>åˆ†æ”¯æˆ–æ–‡ä»¶å¤¹é€‰æ‹©é”™è¯¯</strong>ï¼šç¡®è®¤Github Pagesè®¾ç½®ä¸­é€‰æ‹©çš„åˆ†æ”¯æ˜¯<code>main</code>ï¼ˆæˆ–ä½ çš„é¡¹ç›®ä¸»åˆ†æ”¯ï¼‰ï¼Œæ–‡ä»¶å¤¹æ˜¯<code>/docs</code>ã€‚</p></li></ul><h2 id="äº”ã€"><a href="#äº”ã€" class="headerlink" title="äº”ã€"></a>äº”ã€<wavy>é¢å¤–æ³¨æ„</wavy></h2><div class="tip warning faa-horizontal animated-hover"><p>github pages é»˜è®¤æ˜¯ä½¿ç”¨jekyllä½œä¸ºé™æ€æ–‡ä»¶å¤„ç†å¼•æ“ï¼Œè¿™ä¸ªä¼šé»˜è®¤åˆ é™¤é™æ€æ–‡ä»¶åçš„ä¸‹åˆ’çº¿_å¯¼è‡´é™æ€æ–‡ä»¶æ— æ³•åŠ è½½ã€‚</p></div><p>è§£å†³æ–¹æ³•ï¼šå³åœ¨è·Ÿç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º.nojekyllçš„æ–‡ä»¶å³å¯å–æ¶ˆjekyll<br>å…³äºjekyllçš„è¯¦ç»†ä»‹ç»å¯ä»¥å‚è€ƒï¼š<a href="https://jekyllcn.com/docs/home/">https://jekyllcn.com/docs/home/</a></p><p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œå°±èƒ½é¡ºåˆ©è§£å†³Github Pagesä¸åŠ è½½Vueé¡¹ç›®é™æ€æ–‡ä»¶çš„é—®é¢˜ã€‚æ ¸å¿ƒåœ¨äºæ­£ç¡®é…ç½®æ‰“åŒ…å·¥å…·çš„publicPathè·¯å¾„ï¼Œå¹¶å°†æ‰“åŒ…æ–‡ä»¶è¾“å‡ºåˆ°docsç›®å½•ï¼Œå†é…åˆGithub Pagesçš„éƒ¨ç½²æºè®¾ç½®ï¼Œå³å¯å®ç°é¡¹ç›®çš„æ­£å¸¸è®¿é—®ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;è§£å†³Github-Pagesä¸åŠ è½½Vueæ¡†æ¶é¡¹ç›®é™æ€æ–‡ä»¶é—®é¢˜&quot;&gt;&lt;a href=&quot;#è§£å†³Github-Pagesä¸åŠ è½½Vueæ¡†æ¶é¡¹ç›®é™æ€æ–‡ä»¶é—®é¢˜&quot; class=&quot;headerlink&quot; title=&quot;è§£å†³Github Pagesä¸åŠ è½½Vueæ¡†æ¶é¡¹ç›®é™æ€æ–‡ä»¶é—®é¢˜&quot;&gt;</summary>
      
    
    
    
    
    <category term="hexo" scheme="https://nmcb666.vip/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>è®¡ç®—æœºä¸æ•°å­¦çš„é‚£äº›äº‹</title>
    <link href="https://nmcb666.vip/posts/f8b7ba6f.html"/>
    <id>https://nmcb666.vip/posts/f8b7ba6f.html</id>
    <published>2025-09-16T14:12:43.000Z</published>
    <updated>2025-12-06T11:22:35.705Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å­¦è®¡ç®—æœºä¸€å®šè¦æ•°å­¦å¥½å—ï¼Ÿä¸åŒå²—ä½éœ€æ±‚å¤§ä¸åŒ"><a href="#å­¦è®¡ç®—æœºä¸€å®šè¦æ•°å­¦å¥½å—ï¼Ÿä¸åŒå²—ä½éœ€æ±‚å¤§ä¸åŒ" class="headerlink" title="å­¦è®¡ç®—æœºä¸€å®šè¦æ•°å­¦å¥½å—ï¼Ÿä¸åŒå²—ä½éœ€æ±‚å¤§ä¸åŒ"></a>å­¦è®¡ç®—æœºä¸€å®šè¦æ•°å­¦å¥½å—ï¼Ÿä¸åŒå²—ä½éœ€æ±‚å¤§ä¸åŒ</h1><p>â€œæˆ‘æ•°å­¦ä¸å¥½ï¼Œæ˜¯ä¸æ˜¯å­¦ä¸äº†è®¡ç®—æœºï¼Ÿâ€è¿™æ˜¯å¾ˆå¤šæƒ³å…¥è¡Œè®¡ç®—æœºé¢†åŸŸçš„äººéƒ½ä¼šé—®çš„é—®é¢˜ã€‚å…¶å®è¿™ä¸ªé—®é¢˜æ²¡æœ‰ç»å¯¹çš„ç­”æ¡ˆï¼Œæ ¸å¿ƒåœ¨äºä½ æƒ³ä»äº‹è®¡ç®—æœºé¢†åŸŸçš„å“ªä¸ªå²—ä½ã€‚åœ¨æˆ‘çœ‹æ¥ï¼Œ<strong>æ™®é€šå¼€å‘å²—å¯¹æ•°å­¦åŠŸåº•çš„è¦æ±‚å¹¶ä¸é«˜ï¼Œè€Œç®—æ³•å²—å’Œäººå·¥æ™ºèƒ½å²—åˆ™éœ€è¦æ‰å®ä¸”ç”šè‡³é«˜äºè®¡ç®—æœºçŸ¥è¯†æœ¬èº«çš„æ•°å­¦åŸºç¡€</strong>ã€‚ä»Šå¤©å°±æ¥è¯¦ç»†èŠèŠä¸åŒå²—ä½å¯¹æ•°å­¦çš„çœŸå®éœ€æ±‚ï¼Œå¸®å¤§å®¶æ¶ˆé™¤è®¤çŸ¥è¯¯åŒºã€‚</p><h2 id="ä¸€ã€æ™®é€šå¼€å‘å²—ï¼šæ•°å­¦æ˜¯â€œåŠ åˆ†é¡¹â€è€Œéâ€œå¿…éœ€å“â€"><a href="#ä¸€ã€æ™®é€šå¼€å‘å²—ï¼šæ•°å­¦æ˜¯â€œåŠ åˆ†é¡¹â€è€Œéâ€œå¿…éœ€å“â€" class="headerlink" title="ä¸€ã€æ™®é€šå¼€å‘å²—ï¼šæ•°å­¦æ˜¯â€œåŠ åˆ†é¡¹â€è€Œéâ€œå¿…éœ€å“â€"></a>ä¸€ã€æ™®é€šå¼€å‘å²—ï¼šæ•°å­¦æ˜¯â€œåŠ åˆ†é¡¹â€è€Œéâ€œå¿…éœ€å“â€</h2><p>æ™®é€šå¼€å‘å²—æ¶µç›–çš„èŒƒå›´å¾ˆå¹¿ï¼Œæ¯”å¦‚å‰ç«¯å¼€å‘ã€åç«¯å¼€å‘ã€ç§»åŠ¨ç«¯å¼€å‘ã€å…¨æ ˆå¼€å‘ç­‰ï¼Œè¿™äº›å²—ä½çš„æ ¸å¿ƒæ˜¯â€œå®ç°ä¸šåŠ¡éœ€æ±‚â€ï¼Œæ›´çœ‹é‡çš„æ˜¯ç¼–ç¨‹èƒ½åŠ›ã€é€»è¾‘æ€ç»´å’Œä¸šåŠ¡ç†è§£èƒ½åŠ›ï¼Œå¯¹æ•°å­¦çš„è¦æ±‚è¿œæ²¡æœ‰å¤§å®¶æƒ³è±¡ä¸­é‚£ä¹ˆé«˜ã€‚</p><p>ä»¥å‰ç«¯å¼€å‘ä¸ºä¾‹ï¼Œæ—¥å¸¸å·¥ä½œä¸»è¦æ˜¯ç”¨HTMLã€CSSã€JavaScriptæ„å»ºç”¨æˆ·ç•Œé¢ï¼Œå®ç°é¡µé¢äº¤äº’æ•ˆæœã€‚å³ä½¿æ˜¯ç”¨åˆ°Reactã€Vueç­‰æ¡†æ¶ï¼Œæ ¸å¿ƒä¹Ÿæ˜¯ç»„ä»¶åŒ–æ€æƒ³å’ŒçŠ¶æ€ç®¡ç†ï¼Œæ¶‰åŠåˆ°çš„æ•°å­¦çŸ¥è¯†å¯èƒ½æœ€å¤šå°±æ˜¯ç®€å•çš„å¸ƒå±€è®¡ç®—ï¼ˆæ¯”å¦‚ç”¨Flexæˆ–Gridå¸ƒå±€æ—¶çš„ç™¾åˆ†æ¯”ã€åƒç´ æ¢ç®—ï¼‰ï¼Œè¿åˆä¸­æ•°å­¦çŸ¥è¯†éƒ½èƒ½åº”å¯¹ã€‚åç«¯å¼€å‘è™½ç„¶ä¼šæ¥è§¦åˆ°æ•°æ®åº“ã€æœåŠ¡å™¨ç­‰ï¼Œä½†æ›´å¤šæ˜¯æŒæ¡ç¼–ç¨‹è¯­è¨€ï¼ˆå¦‚Javaã€Pythonã€Goï¼‰ã€æ¡†æ¶ï¼ˆå¦‚Springã€Djangoï¼‰å’Œæ•°æ®åº“ä¼˜åŒ–æŠ€å·§ï¼Œæ•°å­¦çŸ¥è¯†çš„åº”ç”¨åœºæ™¯å°‘ä¹‹åˆå°‘ã€‚</p><p>æˆ‘èº«è¾¹æœ‰ä¸å°‘åšæ™®é€šå¼€å‘çš„å­¦é•¿ï¼Œå¤§å­¦æ—¶æ•°å­¦æˆç»©å¹¶ä¸çªå‡ºï¼Œä½†å‡­å€Ÿæ‰å®çš„ç¼–ç¨‹åŸºç¡€å’Œä¸æ–­ç§¯ç´¯çš„ä¸šåŠ¡ç»éªŒï¼Œç…§æ ·èƒ½æˆä¸ºå›¢é˜Ÿé‡Œçš„éª¨å¹²ã€‚å½“ç„¶ï¼Œè¿™å¹¶ä¸æ˜¯è¯´æ•°å­¦å¯¹æ™®é€šå¼€å‘å²—æ¯«æ— ç”¨å¤„â€”â€”å¦‚æœæ‡‚ä¸€ç‚¹ç¦»æ•£æ•°å­¦ï¼Œåœ¨ç†è§£æ•°æ®ç»“æ„ï¼ˆå¦‚æ ‘ã€å›¾ï¼‰æ—¶ä¼šæ›´è½»æ¾ï¼›å¦‚æœæ‡‚ä¸€ç‚¹çº¿æ€§ä»£æ•°ï¼Œåœ¨å¤„ç†å›¾å½¢ç›¸å…³çš„å¼€å‘ä»»åŠ¡æ—¶å¯èƒ½ä¼šæ›´å¾—å¿ƒåº”æ‰‹ã€‚ä½†è¿™äº›éƒ½å±äºâ€œåŠ åˆ†é¡¹â€ï¼Œè€Œéâ€œå…¥é—¨å¿…å¤‡é¡¹â€ï¼Œä¸ä¼šæˆä¸ºé˜»ç¢ä½ å…¥è¡Œå’Œå‘å±•çš„ç»Šè„šçŸ³ã€‚</p><h2 id="äºŒã€ç®—æ³•å²—-amp-äººå·¥æ™ºèƒ½å²—ï¼šæ•°å­¦æ˜¯â€œåŸºçŸ³â€ï¼Œç”šè‡³æ¯”è®¡ç®—æœºçŸ¥è¯†æ›´é‡è¦"><a href="#äºŒã€ç®—æ³•å²—-amp-äººå·¥æ™ºèƒ½å²—ï¼šæ•°å­¦æ˜¯â€œåŸºçŸ³â€ï¼Œç”šè‡³æ¯”è®¡ç®—æœºçŸ¥è¯†æ›´é‡è¦" class="headerlink" title="äºŒã€ç®—æ³•å²—&amp;äººå·¥æ™ºèƒ½å²—ï¼šæ•°å­¦æ˜¯â€œåŸºçŸ³â€ï¼Œç”šè‡³æ¯”è®¡ç®—æœºçŸ¥è¯†æ›´é‡è¦"></a>äºŒã€ç®—æ³•å²—&amp;äººå·¥æ™ºèƒ½å²—ï¼šæ•°å­¦æ˜¯â€œåŸºçŸ³â€ï¼Œç”šè‡³æ¯”è®¡ç®—æœºçŸ¥è¯†æ›´é‡è¦</h2><p>ä¸æ™®é€šå¼€å‘å²—ä¸åŒï¼Œç®—æ³•å²—ï¼ˆå¦‚æœºå™¨å­¦ä¹ ç®—æ³•å·¥ç¨‹å¸ˆã€æ¨èç®—æ³•å·¥ç¨‹å¸ˆï¼‰å’Œäººå·¥æ™ºèƒ½å²—ï¼ˆå¦‚AIç ”ç©¶å‘˜ã€æ·±åº¦å­¦ä¹ å·¥ç¨‹å¸ˆï¼‰å¯¹æ•°å­¦çš„è¦æ±‚æé«˜ï¼Œæ•°å­¦çŸ¥è¯†æ˜¯å¼€å±•å·¥ä½œçš„æ ¸å¿ƒåŸºç¡€ï¼Œç”šè‡³åœ¨å¾ˆå¤šåœºæ™¯ä¸‹æ¯”å•çº¯çš„è®¡ç®—æœºçŸ¥è¯†æ›´é‡è¦ã€‚</p><p>è¿™äº›å²—ä½çš„å·¥ä½œæœ¬è´¨æ˜¯â€œè§£å†³å¤æ‚é—®é¢˜â€ï¼Œéœ€è¦é€šè¿‡æ•°å­¦æ¨¡å‹æ¥æŠ½è±¡ç°å®é—®é¢˜ï¼Œå¹¶è®¾è®¡é«˜æ•ˆçš„ç®—æ³•æ¥æ±‚è§£ã€‚è¿™å°±è¦æ±‚ä»ä¸šè€…å¿…é¡»æŒæ¡å¤šé—¨é«˜ç­‰æ•°å­¦çŸ¥è¯†ï¼š</p><ul><li><p><strong>çº¿æ€§ä»£æ•°</strong>ï¼šæ˜¯æœºå™¨å­¦ä¹ çš„åŸºç¡€ï¼Œæ¯”å¦‚æ•°æ®çš„è¡¨ç¤ºï¼ˆå‘é‡ã€çŸ©é˜µï¼‰ã€ç‰¹å¾å˜æ¢ï¼ˆçŸ©é˜µä¹˜æ³•ã€ç‰¹å¾å€¼åˆ†è§£ï¼‰ã€é™ç»´ç®—æ³•ï¼ˆPCAï¼‰ç­‰ï¼Œéƒ½ç¦»ä¸å¼€çº¿æ€§ä»£æ•°çš„çŸ¥è¯†ã€‚å¦‚æœä¸æ‡‚çŸ©é˜µè¿ç®—ï¼Œè¿æœ€ç®€å•çš„ç¥ç»ç½‘ç»œå‰å‘ä¼ æ’­éƒ½æ— æ³•ç†è§£ã€‚</p></li><li><p><strong>æ¦‚ç‡è®ºä¸æ•°ç†ç»Ÿè®¡</strong>ï¼šåœ¨å¤„ç†ä¸ç¡®å®šæ€§é—®é¢˜æ—¶è‡³å…³é‡è¦ï¼Œæ¯”å¦‚è´å¶æ–¯åˆ†ç±»å™¨ã€æ¦‚ç‡æ¨¡å‹ï¼ˆå¦‚éšé©¬å°”å¯å¤«æ¨¡å‹ï¼‰ã€æ¨¡å‹è¯„ä¼°æŒ‡æ ‡ï¼ˆå‡†ç¡®ç‡ã€å¬å›ç‡ã€ROCæ›²çº¿ï¼‰ç­‰ï¼Œéƒ½éœ€è¦æ¦‚ç‡è®ºå’Œç»Ÿè®¡å­¦çš„æ”¯æ’‘ã€‚</p></li><li><p><strong>å¾®ç§¯åˆ†</strong>ï¼šä¸»è¦ç”¨äºä¼˜åŒ–ç®—æ³•ï¼Œæ¯”å¦‚æœºå™¨å­¦ä¹ ä¸­çš„æ¢¯åº¦ä¸‹é™æ³•ï¼Œå°±æ˜¯é€šè¿‡æ±‚å¯¼æ¥æ‰¾åˆ°å‡½æ•°çš„æœ€å°å€¼ç‚¹ï¼Œä»è€Œæ›´æ–°æ¨¡å‹å‚æ•°ã€‚å¦‚æœä¸æ‡‚å¯¼æ•°ã€åå¯¼æ•°ï¼Œå°±æ— æ³•ç†è§£ä¼˜åŒ–ç®—æ³•çš„åŸç†ï¼Œæ›´è°ˆä¸ä¸Šè°ƒä¼˜æ¨¡å‹ã€‚</p></li><li><p><strong>ç¦»æ•£æ•°å­¦</strong>ï¼šåœ¨å›¾ç®—æ³•ã€ç»„åˆä¼˜åŒ–ç­‰é¢†åŸŸåº”ç”¨å¹¿æ³›ï¼Œæ¯”å¦‚æœ€çŸ­è·¯å¾„ç®—æ³•ï¼ˆDijkstraã€Floydï¼‰ã€å›¾ç¥ç»ç½‘ç»œï¼ˆGNNï¼‰ç­‰ï¼Œéƒ½éœ€è¦ç¦»æ•£æ•°å­¦çš„çŸ¥è¯†ä½œä¸ºé“ºå«ã€‚</p></li></ul><p>ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœä½ æƒ³åšæ·±åº¦å­¦ä¹ å·¥ç¨‹å¸ˆï¼Œæ­å»ºä¸€ä¸ªç¥ç»ç½‘ç»œæ¨¡å‹å¯èƒ½ç”¨TensorFlowæˆ–PyTorchå‡ è¡Œä»£ç å°±èƒ½å®ç°ï¼Œä½†è¦æƒ³è®©æ¨¡å‹è¾¾åˆ°æ›´å¥½çš„æ•ˆæœâ€”â€”æ¯”å¦‚è°ƒæ•´ç½‘ç»œç»“æ„ã€ä¼˜åŒ–æŸå¤±å‡½æ•°ã€è§£å†³è¿‡æ‹Ÿåˆé—®é¢˜ï¼Œå°±å¿…é¡»æ·±å…¥ç†è§£æ¨¡å‹èƒŒåçš„æ•°å­¦åŸç†ã€‚å¦‚æœæ•°å­¦åŸºç¡€è–„å¼±ï¼Œåªèƒ½åœç•™åœ¨â€œè°ƒå‚å·¥ç¨‹å¸ˆâ€çš„å±‚é¢ï¼Œæ— æ³•çœŸæ­£æˆä¸ºä¸€åä¼˜ç§€çš„ç®—æ³•æˆ–AIå·¥ç¨‹å¸ˆã€‚å¾ˆå¤šé¡¶å°–çš„AIç ”ç©¶å‘˜ï¼Œæœ¬èº«å°±æ˜¯æ•°å­¦ä¸“ä¸šå‡ºèº«ï¼Œå¯è§æ•°å­¦åœ¨è¿™ä¸ªé¢†åŸŸçš„é‡è¦æ€§ã€‚</p><h2 id="ä¸‰ã€æ€»ç»“ï¼šæ ¹æ®ç›®æ ‡å²—ä½ï¼Œåˆç†è§„åˆ’æ•°å­¦å­¦ä¹ "><a href="#ä¸‰ã€æ€»ç»“ï¼šæ ¹æ®ç›®æ ‡å²—ä½ï¼Œåˆç†è§„åˆ’æ•°å­¦å­¦ä¹ " class="headerlink" title="ä¸‰ã€æ€»ç»“ï¼šæ ¹æ®ç›®æ ‡å²—ä½ï¼Œåˆç†è§„åˆ’æ•°å­¦å­¦ä¹ "></a>ä¸‰ã€æ€»ç»“ï¼šæ ¹æ®ç›®æ ‡å²—ä½ï¼Œåˆç†è§„åˆ’æ•°å­¦å­¦ä¹ </h2><p>å›åˆ°æœ€åˆçš„é—®é¢˜â€œå­¦è®¡ç®—æœºä¸€å®šè¦æ•°å­¦å¥½å—ï¼Ÿâ€ï¼Œç­”æ¡ˆå·²ç»å¾ˆæ¸…æ™°äº†ï¼š</p><div class="tip warning faa-horizontal animated"><p>å¦‚æœä½ ç›®æ ‡æ˜¯æ™®é€šå¼€å‘å²—ï¼Œä¸ç”¨å› ä¸ºæ•°å­¦ä¸å¥½è€Œç„¦è™‘ï¼Œé‡ç‚¹æ”¾åœ¨æå‡ç¼–ç¨‹èƒ½åŠ›å’Œé€»è¾‘æ€ç»´ä¸Šï¼Œæ•°å­¦å¯ä»¥ä½œä¸ºåç»­æå‡çš„è¡¥å……ï¼›å¦‚æœä½ ç›®æ ‡æ˜¯ç®—æ³•å²—æˆ–äººå·¥æ™ºèƒ½å²—ï¼Œé‚£ä¹ˆä¸€å®šè¦æ‰“å¥½æ•°å­¦åŸºç¡€ï¼ŒæŠŠçº¿æ€§ä»£æ•°ã€æ¦‚ç‡è®ºã€å¾®ç§¯åˆ†ç­‰æ ¸å¿ƒçŸ¥è¯†å­¦æ‰å®ï¼Œè¿™æ¯”å•çº¯æŒæ¡ç¼–ç¨‹è¯­è¨€å’Œæ¡†æ¶æ›´é‡è¦ã€‚</p></div><p>è®¡ç®—æœºé¢†åŸŸåšå¤§ç²¾æ·±ï¼Œä¸åŒå²—ä½çš„éœ€æ±‚å·®å¼‚å¾ˆå¤§ã€‚å…³é”®æ˜¯æ˜ç¡®è‡ªå·±çš„èŒä¸šæ–¹å‘ï¼Œç„¶åæœ‰é’ˆå¯¹æ€§åœ°å­¦ä¹ ã€‚ä¸è¦è¢«â€œæ•°å­¦ä¸å¥½å°±ä¸èƒ½å­¦è®¡ç®—æœºâ€çš„è¯¯åŒºå“ä½ï¼Œä¹Ÿä¸è¦å¿½è§†ç®—æ³•å’ŒAIå²—å¯¹æ•°å­¦çš„é«˜è¦æ±‚ã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®å¤§å®¶æ›´æ¸…æ™°åœ°è®¤è¯†è®¡ç®—æœºä¸æ•°å­¦çš„å…³ç³»ï¼Œç¥å¤§å®¶åœ¨è®¡ç®—æœºçš„é“è·¯ä¸Šèµ°å¾—æ›´è¿œï¼</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å­¦è®¡ç®—æœºä¸€å®šè¦æ•°å­¦å¥½å—ï¼Ÿä¸åŒå²—ä½éœ€æ±‚å¤§ä¸åŒ&quot;&gt;&lt;a href=&quot;#å­¦è®¡ç®—æœºä¸€å®šè¦æ•°å­¦å¥½å—ï¼Ÿä¸åŒå²—ä½éœ€æ±‚å¤§ä¸åŒ&quot; class=&quot;headerlink&quot; title=&quot;å­¦è®¡ç®—æœºä¸€å®šè¦æ•°å­¦å¥½å—ï¼Ÿä¸åŒå²—ä½éœ€æ±‚å¤§ä¸åŒ&quot;&gt;&lt;/a&gt;å­¦è®¡ç®—æœºä¸€å®šè¦æ•°å­¦å¥½å—ï¼Ÿä¸åŒå²—ä½éœ€æ±‚å¤§ä¸åŒ&lt;/</summary>
      
    
    
    
    
    <category term="è®¡ç®—æœºæ‚è°ˆ" scheme="https://nmcb666.vip/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%9D%82%E8%B0%88/"/>
    
  </entry>
  
  <entry>
    <title>jsdelivrä¸å¯ç”¨æ›¿ä»£æ–¹æ¡ˆ</title>
    <link href="https://nmcb666.vip/posts/6acc4ad2.html"/>
    <id>https://nmcb666.vip/posts/6acc4ad2.html</id>
    <published>2025-09-16T09:57:48.000Z</published>
    <updated>2025-12-06T11:22:35.704Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Hexoåšå®¢æé€Ÿå®æˆ˜ï¼šcdn-jsdelivr-netä¸å¯ç”¨"><a href="#Hexoåšå®¢æé€Ÿå®æˆ˜ï¼šcdn-jsdelivr-netä¸å¯ç”¨" class="headerlink" title="Hexoåšå®¢æé€Ÿå®æˆ˜ï¼šcdn.jsdelivr.netä¸å¯ç”¨"></a>Hexoåšå®¢æé€Ÿå®æˆ˜ï¼šcdn.jsdelivr.netä¸å¯ç”¨</h1><p>å¯¹äºä½¿ç”¨Hexoæ­å»ºä¸ªäººåšå®¢çš„å¼€å‘è€…å’Œåšä¸»è€Œè¨€ï¼Œç½‘ç«™åŠ è½½é€Ÿåº¦ç›´æ¥å½±å“ç”¨æˆ·ä½“éªŒä¸å†…å®¹ä¼ æ’­æ•ˆæœã€‚ä¸å°‘ç”¨æˆ·åœ¨è¿è¥è¿‡ç¨‹ä¸­ä¼šå‘ç°ï¼Œåšå®¢æ‰“å¼€ç¼“æ…¢ã€æ ·å¼åŠ è½½å»¶è¿Ÿç”šè‡³éƒ¨åˆ†èµ„æºå¤±æ•ˆï¼Œæ’æŸ¥åå¾€å¾€èƒ½å®šä½åˆ°æ ¸å¿ƒé—®é¢˜â€”â€”é»˜è®¤ä¾èµ–çš„<code>cdn.jsdelivr.net</code>åœ¨å›½å†…ç½‘ç»œç¯å¢ƒä¸‹è¡¨ç°ä¸ä½³ã€‚æœ¬æ–‡å°†ä»é—®é¢˜æ ¹æºå‡ºå‘ï¼Œæä¾›ä¸€å¥—å®Œæ•´çš„CDNæ›¿æ¢æ–¹æ¡ˆï¼Œå¸®åŠ©ä½ å¿«é€Ÿè§£å†³Hexoåšå®¢é€Ÿåº¦éš¾é¢˜ã€‚</p><h2 id="ä¸€ã€ç°è±¡ä¸æ ¹æºï¼šä¸ºä»€ä¹ˆcdn-jsdelivr-netä¼šæ‹–æ…¢åšå®¢ï¼Ÿ"><a href="#ä¸€ã€ç°è±¡ä¸æ ¹æºï¼šä¸ºä»€ä¹ˆcdn-jsdelivr-netä¼šæ‹–æ…¢åšå®¢ï¼Ÿ" class="headerlink" title="ä¸€ã€ç°è±¡ä¸æ ¹æºï¼šä¸ºä»€ä¹ˆcdn.jsdelivr.netä¼šæ‹–æ…¢åšå®¢ï¼Ÿ"></a>ä¸€ã€ç°è±¡ä¸æ ¹æºï¼šä¸ºä»€ä¹ˆcdn.jsdelivr.netä¼šæ‹–æ…¢åšå®¢ï¼Ÿ</h2><p>åœ¨åˆ†æè§£å†³æ–¹æ¡ˆå‰ï¼Œæˆ‘ä»¬å…ˆæ˜ç¡®<code>cdn.jsdelivr.net</code>å¯¼è‡´Hexoåšå®¢é€Ÿåº¦æ…¢çš„æ ¸å¿ƒåŸå› ï¼Œé¿å…ç›²ç›®ä¼˜åŒ–ï¼š</p><h3 id="1-ç½‘ç»œç¯å¢ƒçš„å¤©ç„¶é™åˆ¶"><a href="#1-ç½‘ç»œç¯å¢ƒçš„å¤©ç„¶é™åˆ¶" class="headerlink" title="1. ç½‘ç»œç¯å¢ƒçš„å¤©ç„¶é™åˆ¶"></a>1. ç½‘ç»œç¯å¢ƒçš„å¤©ç„¶é™åˆ¶</h3><p><code>jsDelivr</code>ä½œä¸ºå…¨çƒé€šç”¨çš„å¼€æºCDNæœåŠ¡ï¼Œå…¶æ ¸å¿ƒèŠ‚ç‚¹ä¸»è¦åˆ†å¸ƒåœ¨åŒ—ç¾ã€æ¬§æ´²ç­‰æµ·å¤–åœ°åŒºã€‚å›½å†…ç”¨æˆ·è®¿é—®æ—¶ï¼Œæ•°æ®éœ€ç»è¿‡è·¨å¢ƒç½‘ç»œé“¾è·¯ä¼ è¾“ï¼Œå—å›½é™…å¸¦å®½ã€è·¯ç”±è·³è½¬ç­‰å› ç´ å½±å“ï¼Œå»¶è¿Ÿé€šå¸¸é«˜è¾¾100-800msï¼Œéƒ¨åˆ†åœ°åŒºç”šè‡³å‡ºç°æ•°æ®åŒ…ä¸¢å¤±ã€‚</p><h3 id="2-èµ„æºåŠ è½½çš„è¿é”ååº”"><a href="#2-èµ„æºåŠ è½½çš„è¿é”ååº”" class="headerlink" title="2. èµ„æºåŠ è½½çš„è¿é”ååº”"></a>2. èµ„æºåŠ è½½çš„è¿é”ååº”</h3><p>Hexoä¸»é¢˜ï¼ˆå¦‚Nextã€Butterflyã€Materyï¼‰é»˜è®¤ä¾èµ–<code>jsDelivr</code>åŠ è½½å¤§é‡å…³é”®èµ„æºï¼ŒåŒ…æ‹¬ï¼š</p><ul><li>æ ·å¼æ–‡ä»¶ï¼šCSSæ¡†æ¶ï¼ˆBootstrapï¼‰ã€å›¾æ ‡åº“ï¼ˆFont Awesomeï¼‰</li><li>è„šæœ¬æ–‡ä»¶ï¼šäº¤äº’æ’ä»¶ï¼ˆjQueryï¼‰ã€ä»£ç é«˜äº®ï¼ˆPrism.jsï¼‰ã€è¯„è®ºç³»ç»Ÿï¼ˆValineï¼‰</li><li>é™æ€èµ„æºï¼šå­—ä½“æ–‡ä»¶ã€ä¸»é¢˜å›¾ç‰‡ã€ç¬¬ä¸‰æ–¹ç»„ä»¶</li></ul><p>è¿™äº›èµ„æºè‹¥åŠ è½½å»¶è¿Ÿï¼Œä¼šå¯¼è‡´é¡µé¢â€œç™½å±æ—¶é—´â€å»¶é•¿ã€æ ·å¼é”™ä¹±ï¼Œç”šè‡³è§¦å‘æµè§ˆå™¨çš„â€œèµ„æºåŠ è½½è¶…æ—¶â€é”™è¯¯ã€‚</p><h3 id="3-å›½å†…é•œåƒçš„ä¼˜åŠ¿"><a href="#3-å›½å†…é•œåƒçš„ä¼˜åŠ¿" class="headerlink" title="3. å›½å†…é•œåƒçš„ä¼˜åŠ¿"></a>3. å›½å†…é•œåƒçš„ä¼˜åŠ¿</h3><p><code>cdn.jsdmirror.com</code>æ˜¯ä¸“ä¸ºå›½å†…ç”¨æˆ·æ­å»ºçš„<code>jsDelivr</code>é•œåƒæœåŠ¡ï¼Œå…·å¤‡ä¸‰å¤§æ ¸å¿ƒä¼˜åŠ¿ï¼š</p><ul><li><strong>èŠ‚ç‚¹è¦†ç›–å¹¿</strong>ï¼šåœ¨å›½å†…30+åŸå¸‚éƒ¨ç½²èŠ‚ç‚¹ï¼Œç”¨æˆ·è®¿é—®æ—¶è‡ªåŠ¨åŒ¹é…æœ€è¿‘èŠ‚ç‚¹ï¼Œå»¶è¿Ÿå¯é™è‡³50msä»¥å†…</li><li><strong>åŒæ­¥é€Ÿåº¦å¿«</strong>ï¼šå®æ—¶åŒæ­¥<code>jsDelivr</code>çš„GitHubä»“åº“ä¸npmåŒ…èµ„æºï¼Œèµ„æºæ›´æ–°æ— å»¶è¿Ÿ</li><li><strong>è®¿é—®ç¨³å®šæ€§é«˜</strong>ï¼šè§„é¿è·¨å¢ƒç½‘ç»œæ³¢åŠ¨ï¼Œæ”¯æŒHTTPSåŠ å¯†è®¿é—®ï¼Œå…¼å®¹æ‰€æœ‰ä¸»æµæµè§ˆå™¨</li></ul><h2 id="äºŒã€æ›¿æ¢å‰çš„å‡†å¤‡å·¥ä½œ"><a href="#äºŒã€æ›¿æ¢å‰çš„å‡†å¤‡å·¥ä½œ" class="headerlink" title="äºŒã€æ›¿æ¢å‰çš„å‡†å¤‡å·¥ä½œ"></a>äºŒã€æ›¿æ¢å‰çš„å‡†å¤‡å·¥ä½œ</h2><p>ä¸ºç¡®ä¿æ›¿æ¢è¿‡ç¨‹é¡ºåˆ©ï¼Œé¿å…æ“ä½œå¤±è¯¯å¯¼è‡´åšå®¢å¼‚å¸¸ï¼Œéœ€æå‰å®Œæˆä»¥ä¸‹å‡†å¤‡ï¼š</p><h3 id="1-æ ¸å¿ƒæ–‡ä»¶å¤‡ä»½"><a href="#1-æ ¸å¿ƒæ–‡ä»¶å¤‡ä»½" class="headerlink" title="1. æ ¸å¿ƒæ–‡ä»¶å¤‡ä»½"></a>1. æ ¸å¿ƒæ–‡ä»¶å¤‡ä»½</h3><ul><li>å¤‡ä»½Hexoæ ¹ç›®å½•ä¸‹çš„<code>_config.yml</code>ï¼ˆå…¨å±€é…ç½®æ–‡ä»¶ï¼‰</li><li>å¤‡ä»½ä¸»é¢˜ç›®å½•ï¼ˆå¦‚<code>themes/next</code>ã€<code>themes/butterfly</code>ï¼‰ï¼Œå»ºè®®å‹ç¼©ä¸ºZIPæ–‡ä»¶å­˜å‚¨</li><li>è‹¥ä½¿ç”¨Gitç®¡ç†åšå®¢ï¼Œå¯å…ˆæäº¤å½“å‰ç‰ˆæœ¬ï¼Œä¾¿äºåç»­å›æ»š</li></ul><h3 id="2-èµ„æºä¾èµ–æ’æŸ¥"><a href="#2-èµ„æºä¾èµ–æ’æŸ¥" class="headerlink" title="2. èµ„æºä¾èµ–æ’æŸ¥"></a>2. èµ„æºä¾èµ–æ’æŸ¥</h3><p>é€šè¿‡æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰å®šä½æ‰€æœ‰<code>jsDelivr</code>èµ„æºï¼š</p><ol><li>æ‰“å¼€åšå®¢é¡µé¢ï¼ŒæŒ‰F12æ‰“å¼€â€œå¼€å‘è€…å·¥å…·â€</li><li>åˆ‡æ¢è‡³â€œNetworkâ€æ ‡ç­¾ï¼Œåˆ·æ–°é¡µé¢</li><li>åœ¨æœç´¢æ¡†è¾“å…¥<code>cdn.jsdelivr.net</code>ï¼Œç­›é€‰å‡ºæ‰€æœ‰ä¾èµ–è¯¥CDNçš„èµ„æº</li><li>è®°å½•èµ„æºç±»å‹ï¼ˆCSS/JS/Fontï¼‰ã€é“¾æ¥åœ°å€åŠæ‰€åœ¨æ–‡ä»¶ï¼Œé¿å…æ›¿æ¢é—æ¼</li></ol><h3 id="3-æœ¬åœ°ç¯å¢ƒç¡®è®¤"><a href="#3-æœ¬åœ°ç¯å¢ƒç¡®è®¤" class="headerlink" title="3. æœ¬åœ°ç¯å¢ƒç¡®è®¤"></a>3. æœ¬åœ°ç¯å¢ƒç¡®è®¤</h3><p>ç¡®ä¿æœ¬åœ°å·²æ­å»ºå®Œæ•´çš„Hexoè¿è¡Œç¯å¢ƒï¼š</p><ul><li>æ£€æŸ¥Node.jsç‰ˆæœ¬ï¼ˆå»ºè®®v14+ï¼‰ï¼š<code>node -v</code></li><li>æ£€æŸ¥Hexo CLIç‰ˆæœ¬ï¼ˆå»ºè®®v6+ï¼‰ï¼š<code>hexo -v</code></li><li>æµ‹è¯•æœ¬åœ°æœåŠ¡å¯ç”¨æ€§ï¼šåœ¨æ ¹ç›®å½•æ‰§è¡Œ<code>hexo s</code>ï¼Œç¡®è®¤<code>http://localhost:4000</code>å¯æ­£å¸¸è®¿é—®</li></ul><h2 id="ä¸‰ã€åˆ†ä¸»é¢˜æ›¿æ¢æ•™ç¨‹ï¼ˆè¦†ç›–ä¸»æµä¸»é¢˜ï¼‰"><a href="#ä¸‰ã€åˆ†ä¸»é¢˜æ›¿æ¢æ•™ç¨‹ï¼ˆè¦†ç›–ä¸»æµä¸»é¢˜ï¼‰" class="headerlink" title="ä¸‰ã€åˆ†ä¸»é¢˜æ›¿æ¢æ•™ç¨‹ï¼ˆè¦†ç›–ä¸»æµä¸»é¢˜ï¼‰"></a>ä¸‰ã€åˆ†ä¸»é¢˜æ›¿æ¢æ•™ç¨‹ï¼ˆè¦†ç›–ä¸»æµä¸»é¢˜ï¼‰</h2><p>ä¸åŒHexoä¸»é¢˜çš„èµ„æºé…ç½®ä½ç½®å­˜åœ¨å·®å¼‚ï¼Œä»¥ä¸‹é’ˆå¯¹3ä¸ªæœ€å¸¸ç”¨ä¸»é¢˜ï¼Œæä¾› step-by-step æ›¿æ¢æŒ‡å—ï¼š</p><u>ä¸ºäº†æ–¹ä¾¿å¯ä»¥ç›´æ¥åœ¨ç¼–è¾‘å™¨ä¸­è¿›è¡Œå…¨å±€æ›¿æ¢ï¼Œå°†æ‰€æœ‰`cdn.jsdelivr.net`æ›¿æ¢ä¸º`cdn.jsdmirror.com`</u><emp>å¦‚æœç”Ÿæ•ˆï¼Œåˆ™æ— éœ€ä¸‹é¢çš„æ­¥éª¤</emp><h3 id="1-Nextä¸»é¢˜ï¼ˆv8-x-v9-xï¼‰"><a href="#1-Nextä¸»é¢˜ï¼ˆv8-x-v9-xï¼‰" class="headerlink" title="1. Nextä¸»é¢˜ï¼ˆv8.x - v9.xï¼‰"></a>1. Nextä¸»é¢˜ï¼ˆv8.x - v9.xï¼‰</h3><p>Nextä¸»é¢˜çš„CDNé…ç½®åˆ†æ•£åœ¨<strong>ä¸»é¢˜é…ç½®æ–‡ä»¶</strong>å’Œ<strong>å¸ƒå±€æ¨¡æ¿æ–‡ä»¶</strong>ä¸­ï¼Œéœ€åˆ†ä¸¤æ­¥æ›¿æ¢ï¼š</p><h4 id="æ­¥éª¤1ï¼šä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼ˆthemes-next-config-ymlï¼‰"><a href="#æ­¥éª¤1ï¼šä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼ˆthemes-next-config-ymlï¼‰" class="headerlink" title="æ­¥éª¤1ï¼šä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼ˆthemes/next/_config.ymlï¼‰"></a>æ­¥éª¤1ï¼šä¿®æ”¹ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼ˆthemes/next/_config.ymlï¼‰</h4><p>ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€è¯¥æ–‡ä»¶ï¼ŒæŒ‰<code>Ctrl+F</code>æœç´¢<code>cdn.jsdelivr.net</code>ï¼Œé€ä¸€æ›¿æ¢ä»¥ä¸‹èµ„æºï¼š</p><ul><li><strong>å­—ä½“å›¾æ ‡ï¼ˆFont Awesomeï¼‰</strong><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åŸé…ç½®</span></span><br><span class="line"><span class="attr">fontawesome:</span> <span class="string">//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css</span></span><br><span class="line"><span class="comment"># æ›¿æ¢å</span></span><br><span class="line"><span class="attr">fontawesome:</span> <span class="string">//cdn.jsdmirror.com/npm/font-awesome@4.7.0/css/font-awesome.min.css</span></span><br></pre></td></tr></table></figure></li><li><strong>ä»£ç é«˜äº®ï¼ˆPrism.jsï¼‰</strong><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åŸé…ç½®</span></span><br><span class="line"><span class="attr">prism:</span></span><br><span class="line">  <span class="attr">css:</span> <span class="string">//cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.min.css</span></span><br><span class="line"><span class="comment"># æ›¿æ¢å</span></span><br><span class="line"><span class="attr">prism:</span></span><br><span class="line">  <span class="attr">css:</span> <span class="string">//cdn.jsdmirror.com/npm/prismjs@1.29.0/themes/prism-tomorrow.min.css</span></span><br></pre></td></tr></table></figure></li><li><strong>è¯„è®ºç³»ç»Ÿï¼ˆValineï¼‰</strong><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åŸé…ç½®</span></span><br><span class="line"><span class="attr">valine:</span></span><br><span class="line">  <span class="attr">js:</span> <span class="string">//cdn.jsdelivr.net/npm/valine@1.4.18/dist/Valine.min.js</span></span><br><span class="line"><span class="comment"># æ›¿æ¢å</span></span><br><span class="line"><span class="attr">valine:</span></span><br><span class="line">  <span class="attr">js:</span> <span class="string">//cdn.jsdmirror.com/npm/valine@1.4.18/dist/Valine.min.js</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="æ­¥éª¤2ï¼šä¿®æ”¹å¸ƒå±€æ¨¡æ¿ä¸­çš„ç¡¬ç¼–ç èµ„æº"><a href="#æ­¥éª¤2ï¼šä¿®æ”¹å¸ƒå±€æ¨¡æ¿ä¸­çš„ç¡¬ç¼–ç èµ„æº" class="headerlink" title="æ­¥éª¤2ï¼šä¿®æ”¹å¸ƒå±€æ¨¡æ¿ä¸­çš„ç¡¬ç¼–ç èµ„æº"></a>æ­¥éª¤2ï¼šä¿®æ”¹å¸ƒå±€æ¨¡æ¿ä¸­çš„ç¡¬ç¼–ç èµ„æº</h4><p>è¿›å…¥<code>themes/next/layout</code>ç›®å½•ï¼Œæœç´¢æ‰€æœ‰æ–‡ä»¶ä¸­çš„<code>cdn.jsdelivr.net</code>ï¼š</p><ol><li>æ‰“å¼€<code>_partials/head.swig</code>ï¼Œæ›¿æ¢CSSèµ„æºå¼•ç”¨</li><li>æ‰“å¼€<code>_partials/footer.swig</code>ï¼Œæ›¿æ¢JSèµ„æºå¼•ç”¨</li><li>æ‰“å¼€<code>_third-party/comments/valine.swig</code>ï¼ˆè‹¥ä½¿ç”¨Valineï¼‰ï¼Œç¡®è®¤è¯„è®ºç»„ä»¶CDNå·²æ›¿æ¢</li></ol><h3 id="2-Butterflyä¸»é¢˜ï¼ˆv4-x-v5-xï¼‰"><a href="#2-Butterflyä¸»é¢˜ï¼ˆv4-x-v5-xï¼‰" class="headerlink" title="2. Butterflyä¸»é¢˜ï¼ˆv4.x - v5.xï¼‰"></a>2. Butterflyä¸»é¢˜ï¼ˆv4.x - v5.xï¼‰</h3><p>Butterflyä¸»é¢˜çš„CDNé…ç½®é«˜åº¦é›†ä¸­ï¼Œä¸»è¦åœ¨<strong>ä¸»é¢˜é…ç½®æ–‡ä»¶</strong>ä¸­ï¼š</p><h4 id="æ­¥éª¤1ï¼šä¿®æ”¹ä¸»é¢˜æ ¸å¿ƒCDNé…ç½®ï¼ˆthemes-butterfly-config-ymlï¼‰"><a href="#æ­¥éª¤1ï¼šä¿®æ”¹ä¸»é¢˜æ ¸å¿ƒCDNé…ç½®ï¼ˆthemes-butterfly-config-ymlï¼‰" class="headerlink" title="æ­¥éª¤1ï¼šä¿®æ”¹ä¸»é¢˜æ ¸å¿ƒCDNé…ç½®ï¼ˆthemes/butterfly/_config.ymlï¼‰"></a>æ­¥éª¤1ï¼šä¿®æ”¹ä¸»é¢˜æ ¸å¿ƒCDNé…ç½®ï¼ˆthemes/butterfly/_config.ymlï¼‰</h4><p>æ‰¾åˆ°<code>CDN</code>ç›¸å…³é…ç½®æ®µï¼Œæ›¿æ¢ä»¥ä¸‹å…³é”®èµ„æºï¼š</p><ul><li><strong>åŸºç¡€æ¡†æ¶ï¼ˆjQuery + Bootstrapï¼‰</strong><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åŸé…ç½®</span></span><br><span class="line"><span class="attr">jquery:</span> <span class="string">https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.min.js</span></span><br><span class="line"><span class="attr">bootstrap:</span> <span class="string">https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js</span></span><br><span class="line"><span class="comment"># æ›¿æ¢å</span></span><br><span class="line"><span class="attr">jquery:</span> <span class="string">https://cdn.jsdmirror.com/npm/jquery@3.6.4/dist/jquery.min.js</span></span><br><span class="line"><span class="attr">bootstrap:</span> <span class="string">https://cdn.jsdmirror.com/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js</span></span><br></pre></td></tr></table></figure></li><li><strong>å›¾æ ‡ä¸é«˜äº®</strong><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åŸé…ç½®</span></span><br><span class="line"><span class="attr">iconify:</span> <span class="string">https://cdn.jsdelivr.net/npm/iconify-icon@1.0.7/dist/iconify-icon.min.js</span></span><br><span class="line"><span class="attr">highlight:</span> <span class="string">https://cdn.jsdelivr.net/npm/highlight.js@11.8.0/styles/atom-one-dark.min.css</span></span><br><span class="line"><span class="comment"># æ›¿æ¢å</span></span><br><span class="line"><span class="attr">iconify:</span> <span class="string">https://cdn.jsdmirror.com/npm/iconify-icon@1.0.7/dist/iconify-icon.min.js</span></span><br><span class="line"><span class="attr">highlight:</span> <span class="string">https://cdn.jsdmirror.com/npm/highlight.js@11.8.0/styles/atom-one-dark.min.css</span></span><br></pre></td></tr></table></figure></li><li><strong>ç¬¬ä¸‰æ–¹æ’ä»¶ï¼ˆå¦‚é˜…è¯»è¿›åº¦ã€ç›®å½•ï¼‰</strong><br>ç»§ç»­å‘ä¸‹æœç´¢ï¼Œæ›¿æ¢<code>tocbot</code>ã€<code>nprogress</code>ç­‰æ’ä»¶çš„CDNé“¾æ¥ï¼Œç¡®ä¿æ— é—æ¼ã€‚</li></ul><h4 id="æ­¥éª¤2ï¼šæ£€æŸ¥è‡ªå®šä¹‰é¡µé¢èµ„æº"><a href="#æ­¥éª¤2ï¼šæ£€æŸ¥è‡ªå®šä¹‰é¡µé¢èµ„æº" class="headerlink" title="æ­¥éª¤2ï¼šæ£€æŸ¥è‡ªå®šä¹‰é¡µé¢èµ„æº"></a>æ­¥éª¤2ï¼šæ£€æŸ¥è‡ªå®šä¹‰é¡µé¢èµ„æº</h4><p>è‹¥åœ¨<code>source</code>ç›®å½•ä¸‹åˆ›å»ºäº†è‡ªå®šä¹‰é¡µé¢ï¼ˆå¦‚<code>about.md</code>ã€<code>links.md</code>ï¼‰ï¼Œéœ€æ‰“å¼€æ–‡ä»¶æ£€æŸ¥æ˜¯å¦æœ‰å†…åµŒçš„<code>jsDelivr</code>é“¾æ¥ï¼Œä¾‹å¦‚ï¼š<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- åŸé“¾æ¥ --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;!-- æ›¿æ¢å --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdmirror.com/npm/chart.js@4.4.8/dist/chart.umd.min.js&quot;</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p><h3 id="3-Materyä¸»é¢˜ï¼ˆv1-xï¼‰"><a href="#3-Materyä¸»é¢˜ï¼ˆv1-xï¼‰" class="headerlink" title="3. Materyä¸»é¢˜ï¼ˆv1.xï¼‰"></a>3. Materyä¸»é¢˜ï¼ˆv1.xï¼‰</h3><p>Materyä¸»é¢˜çš„èµ„æºé…ç½®åœ¨<strong>ä¸»é¢˜é…ç½®æ–‡ä»¶</strong>å’Œ<strong>HTMLæ¨¡æ¿</strong>ä¸­ï¼š</p><h4 id="æ­¥éª¤1ï¼šä¿®æ”¹ä¸»é¢˜é…ç½®ï¼ˆthemes-matery-config-ymlï¼‰"><a href="#æ­¥éª¤1ï¼šä¿®æ”¹ä¸»é¢˜é…ç½®ï¼ˆthemes-matery-config-ymlï¼‰" class="headerlink" title="æ­¥éª¤1ï¼šä¿®æ”¹ä¸»é¢˜é…ç½®ï¼ˆthemes/matery/_config.ymlï¼‰"></a>æ­¥éª¤1ï¼šä¿®æ”¹ä¸»é¢˜é…ç½®ï¼ˆthemes/matery/_config.ymlï¼‰</h4><p>æ›¿æ¢<code>CDN</code>éƒ¨åˆ†çš„èµ„æºï¼š<br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åŸé…ç½®</span></span><br><span class="line"><span class="attr">jquery:</span> <span class="string">https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js</span></span><br><span class="line"><span class="attr">layer:</span> <span class="string">https://cdn.jsdelivr.net/npm/layer@3.5.1/dist/layer.min.js</span></span><br><span class="line"><span class="comment"># æ›¿æ¢å</span></span><br><span class="line"><span class="attr">jquery:</span> <span class="string">https://cdn.jsdmirror.com/npm/jquery@3.5.1/dist/jquery.min.js</span></span><br><span class="line"><span class="attr">layer:</span> <span class="string">https://cdn.jsdmirror.com/npm/layer@3.5.1/dist/layer.min.js</span></span><br></pre></td></tr></table></figure></p><h4 id="æ­¥éª¤2ï¼šä¿®æ”¹HTMLæ¨¡æ¿ï¼ˆthemes-matery-layout-partialï¼‰"><a href="#æ­¥éª¤2ï¼šä¿®æ”¹HTMLæ¨¡æ¿ï¼ˆthemes-matery-layout-partialï¼‰" class="headerlink" title="æ­¥éª¤2ï¼šä¿®æ”¹HTMLæ¨¡æ¿ï¼ˆthemes/matery/layout/_partialï¼‰"></a>æ­¥éª¤2ï¼šä¿®æ”¹HTMLæ¨¡æ¿ï¼ˆthemes/matery/layout/_partialï¼‰</h4><p>æ‰“å¼€<code>head.html</code>å’Œ<code>footer.html</code>ï¼Œæ›¿æ¢æ¨¡æ¿ä¸­ç¡¬ç¼–ç çš„CDNé“¾æ¥ï¼Œä¾‹å¦‚ï¼š<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- åŸé“¾æ¥ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/mdui@0.4.3/dist/css/mdui.min.css&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- æ›¿æ¢å --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.jsdmirror.com/npm/mdui@0.4.3/dist/css/mdui.min.css&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h2 id="å››ã€æ›¿æ¢åçš„éªŒè¯ä¸æµ‹è¯•"><a href="#å››ã€æ›¿æ¢åçš„éªŒè¯ä¸æµ‹è¯•" class="headerlink" title="å››ã€æ›¿æ¢åçš„éªŒè¯ä¸æµ‹è¯•"></a>å››ã€æ›¿æ¢åçš„éªŒè¯ä¸æµ‹è¯•</h2><p>å®Œæˆæ›¿æ¢åï¼Œéœ€é€šè¿‡å¤šç»´åº¦æµ‹è¯•ç¡®ä¿åšå®¢æ­£å¸¸è¿è¡Œä¸”é€Ÿåº¦æå‡ï¼š</p><h3 id="1-æœ¬åœ°ç¯å¢ƒéªŒè¯"><a href="#1-æœ¬åœ°ç¯å¢ƒéªŒè¯" class="headerlink" title="1. æœ¬åœ°ç¯å¢ƒéªŒè¯"></a>1. æœ¬åœ°ç¯å¢ƒéªŒè¯</h3><p>åœ¨Hexoæ ¹ç›®å½•æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo clean  <span class="comment"># æ¸…é™¤ç¼“å­˜ï¼ˆå…³é”®æ­¥éª¤ï¼Œé¿å…æ—§èµ„æºå¹²æ‰°ï¼‰</span></span><br><span class="line">hexo s      <span class="comment"># å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨</span></span><br></pre></td></tr></table></figure><br>æ‰“å¼€æµè§ˆå™¨è®¿é—®<code>http://localhost:4000</code>ï¼Œè¿›è¡Œä»¥ä¸‹æ£€æŸ¥ï¼š</p><ul><li><strong>è§†è§‰æ£€æŸ¥</strong>ï¼šé¡µé¢æ ·å¼æ˜¯å¦å®Œæ•´ï¼ˆæ— é”™ä½ã€æ— ç¼ºå¤±å›¾æ ‡ï¼‰</li><li><strong>æ§åˆ¶å°æ£€æŸ¥</strong>ï¼šæŒ‰F12æ‰“å¼€â€œConsoleâ€æ ‡ç­¾ï¼Œç¡®è®¤æ— â€œ404 Not Foundâ€æˆ–â€œFailed to loadâ€é”™è¯¯</li><li><strong>ç½‘ç»œæ£€æŸ¥</strong>ï¼šåœ¨â€œNetworkâ€æ ‡ç­¾ä¸­æœç´¢<code>jsdmirror</code>ï¼Œç¡®è®¤æ‰€æœ‰èµ„æºå‡ä»è¯¥CDNåŠ è½½</li></ul><h3 id="2-çº¿ä¸Šéƒ¨ç½²ä¸é€Ÿåº¦æµ‹è¯•"><a href="#2-çº¿ä¸Šéƒ¨ç½²ä¸é€Ÿåº¦æµ‹è¯•" class="headerlink" title="2. çº¿ä¸Šéƒ¨ç½²ä¸é€Ÿåº¦æµ‹è¯•"></a>2. çº¿ä¸Šéƒ¨ç½²ä¸é€Ÿåº¦æµ‹è¯•</h3><p>è‹¥æœ¬åœ°éªŒè¯æ— é—®é¢˜ï¼Œéƒ¨ç½²åˆ°çº¿ä¸Šï¼ˆå¦‚GitHub Pagesã€Gitee Pagesã€Vercelï¼‰åï¼Œä½¿ç”¨ä»¥ä¸‹å·¥å…·æµ‹è¯•é€Ÿåº¦æå‡æ•ˆæœï¼š</p><h4 id="ï¼ˆ1ï¼‰åŸºç¡€é€Ÿåº¦æ£€æµ‹"><a href="#ï¼ˆ1ï¼‰åŸºç¡€é€Ÿåº¦æ£€æµ‹" class="headerlink" title="ï¼ˆ1ï¼‰åŸºç¡€é€Ÿåº¦æ£€æµ‹"></a>ï¼ˆ1ï¼‰åŸºç¡€é€Ÿåº¦æ£€æµ‹</h4><ul><li><strong>17CE</strong>ï¼šæ£€æµ‹å›½å†…å¤šåœ°åŒºèŠ‚ç‚¹çš„è®¿é—®å»¶è¿Ÿï¼Œå¯¹æ¯”æ›¿æ¢å‰åæ•°æ®</li><li><strong>Ping.pe</strong>ï¼šæµ‹è¯•å…¨çƒèŠ‚ç‚¹å“åº”é€Ÿåº¦ï¼Œç¡®ä¿æµ·å¤–ç”¨æˆ·è®¿é—®ä¸å—å½±å“</li></ul><h4 id="ï¼ˆ2ï¼‰æ€§èƒ½è¯„åˆ†å·¥å…·"><a href="#ï¼ˆ2ï¼‰æ€§èƒ½è¯„åˆ†å·¥å…·" class="headerlink" title="ï¼ˆ2ï¼‰æ€§èƒ½è¯„åˆ†å·¥å…·"></a>ï¼ˆ2ï¼‰æ€§èƒ½è¯„åˆ†å·¥å…·</h4><ul><li><strong>Google PageSpeed Insights</strong>ï¼šé‡ç‚¹å…³æ³¨â€œé¦–æ¬¡å†…å®¹ç»˜åˆ¶ï¼ˆFCPï¼‰â€å’Œâ€œæœ€å¤§å†…å®¹ç»˜åˆ¶ï¼ˆLCPï¼‰â€æŒ‡æ ‡ï¼Œæ›¿æ¢åé€šå¸¸å¯æå‡10-30åˆ†</li><li><strong>WebPageTest</strong>ï¼šç”Ÿæˆè¯¦ç»†çš„èµ„æºåŠ è½½ç€‘å¸ƒå›¾ï¼ŒæŸ¥çœ‹<code>jsdmirror</code>èµ„æºçš„åŠ è½½æ—¶é—´ï¼ˆç›®æ ‡ï¼šå•ä¸ªèµ„æºåŠ è½½æ—¶é—´&lt;100msï¼‰</li></ul><h2 id="äº”ã€è¿›é˜¶ä¼˜åŒ–ä¸é£é™©è§„é¿"><a href="#äº”ã€è¿›é˜¶ä¼˜åŒ–ä¸é£é™©è§„é¿" class="headerlink" title="äº”ã€è¿›é˜¶ä¼˜åŒ–ä¸é£é™©è§„é¿"></a>äº”ã€è¿›é˜¶ä¼˜åŒ–ä¸é£é™©è§„é¿</h2><h3 id="1-èµ„æºåŠ è½½ä¼˜åŒ–è¡¥å……"><a href="#1-èµ„æºåŠ è½½ä¼˜åŒ–è¡¥å……" class="headerlink" title="1. èµ„æºåŠ è½½ä¼˜åŒ–è¡¥å……"></a>1. èµ„æºåŠ è½½ä¼˜åŒ–è¡¥å……</h3><p>æ›¿æ¢CDNåï¼Œå¯ç»“åˆä»¥ä¸‹æªæ–½è¿›ä¸€æ­¥æå‡é€Ÿåº¦ï¼š</p><ul><li><strong>å¼€å¯Gzipå‹ç¼©</strong>ï¼šåœ¨GitHub Pagesä¸­å¯é€šè¿‡é…ç½®<code>_config.yml</code>å¯ç”¨ï¼Œæˆ–åœ¨Vercelä¸­ç›´æ¥å¼€å¯</li><li><strong>å›¾ç‰‡ä¼˜åŒ–</strong>ï¼šä½¿ç”¨<code>hexo-image-compressor</code>æ’ä»¶å‹ç¼©å›¾ç‰‡ï¼Œæˆ–è¿ç§»è‡³å›½å†…å›¾åºŠï¼ˆå¦‚é˜¿é‡Œäº‘OSSã€è…¾è®¯äº‘COSï¼‰</li><li><strong>å‡å°‘ç¬¬ä¸‰æ–¹æ’ä»¶</strong>ï¼šå¸è½½æ— ç”¨çš„è¯„è®ºã€ç»Ÿè®¡æ’ä»¶ï¼Œé™ä½èµ„æºè¯·æ±‚æ•°é‡</li></ul><h3 id="2-CDNæœåŠ¡é£é™©è§„é¿"><a href="#2-CDNæœåŠ¡é£é™©è§„é¿" class="headerlink" title="2. CDNæœåŠ¡é£é™©è§„é¿"></a>2. CDNæœåŠ¡é£é™©è§„é¿</h3><p><code>cdn.jsdmirror.com</code>ä½œä¸ºç¬¬ä¸‰æ–¹é•œåƒï¼Œè‹¥åç»­å‡ºç°æœåŠ¡ä¸ç¨³å®šï¼Œå¯åˆ‡æ¢è‡³å…¶ä»–å›½å†…<code>jsDelivr</code>é•œåƒï¼Œå¸¸ç”¨å¤‡é€‰ï¼š</p><ul><li><code>https://cdn.jsdelivr.fusesearch.net/</code></li><li><code>https://jsd.onmicrosoft.cn/</code></li><li><code>https://jsdelivr.b-cdn.net/</code></li></ul><p>åˆ‡æ¢æ—¶ä»…éœ€æ›¿æ¢â€œåŸŸåâ€ï¼Œä¿æŒèµ„æºè·¯å¾„å®Œå…¨ä¸€è‡´ï¼Œæ— éœ€ä¿®æ”¹å…¶ä»–é…ç½®ã€‚</p><h3 id="3-å®šæœŸæ£€æŸ¥ä¸æ›´æ–°"><a href="#3-å®šæœŸæ£€æŸ¥ä¸æ›´æ–°" class="headerlink" title="3. å®šæœŸæ£€æŸ¥ä¸æ›´æ–°"></a>3. å®šæœŸæ£€æŸ¥ä¸æ›´æ–°</h3><p>å»ºè®®æ¯3-6ä¸ªæœˆæ£€æŸ¥ä¸€æ¬¡CDNèµ„æºï¼š</p><ul><li>ç¡®è®¤ä½¿ç”¨çš„npmåŒ…/GitHubä»“åº“èµ„æºæ˜¯å¦æœ‰æ›´æ–°ï¼Œé¿å…ä½¿ç”¨è¿‡æ—¶ç‰ˆæœ¬å¯¼è‡´å®‰å…¨é£é™©</li><li>æµ‹è¯•å½“å‰CDNçš„å“åº”é€Ÿåº¦ï¼Œè‹¥å‡ºç°å»¶è¿Ÿå‡é«˜ï¼ŒåŠæ—¶åˆ‡æ¢è‡³å…¶ä»–é•œåƒ</li></ul><h2 id="å…­ã€æ€»ç»“"><a href="#å…­ã€æ€»ç»“" class="headerlink" title="å…­ã€æ€»ç»“"></a>å…­ã€æ€»ç»“</h2><p>é€šè¿‡å°†Hexoåšå®¢çš„<code>cdn.jsdelivr.net</code>æ›¿æ¢ä¸º<code>cdn.jsdmirror.com</code>ï¼Œå¯æœ‰æ•ˆè§£å†³å›½å†…ç½‘ç»œç¯å¢ƒä¸‹çš„èµ„æºåŠ è½½æ…¢é—®é¢˜ï¼Œé€šå¸¸èƒ½å¸¦æ¥30%-70%çš„åŠ è½½é€Ÿåº¦æå‡ã€‚æ•´ä¸ªè¿‡ç¨‹æ ¸å¿ƒåœ¨äºâ€œç²¾å‡†å®šä½èµ„æºä½ç½®+å®Œæ•´æ›¿æ¢åŸŸåâ€ï¼Œé…åˆæœ¬åœ°æµ‹è¯•ä¸çº¿ä¸ŠéªŒè¯ï¼Œå³å¯ç¡®ä¿åšå®¢ç¨³å®šè¿è¡Œã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Hexoåšå®¢æé€Ÿå®æˆ˜ï¼šcdn-jsdelivr-netä¸å¯ç”¨&quot;&gt;&lt;a href=&quot;#Hexoåšå®¢æé€Ÿå®æˆ˜ï¼šcdn-jsdelivr-netä¸å¯ç”¨&quot; class=&quot;headerlink&quot; title=&quot;Hexoåšå®¢æé€Ÿå®æˆ˜ï¼šcdn.jsdelivr.netä¸å¯ç”¨&quot;&gt;</summary>
      
    
    
    
    
    <category term="hexo" scheme="https://nmcb666.vip/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>å…³äºTaskå®šæ—¶ä»»åŠ¡çš„ä¸€äº›äº‹</title>
    <link href="https://nmcb666.vip/posts/12ed125b.html"/>
    <id>https://nmcb666.vip/posts/12ed125b.html</id>
    <published>2025-09-15T15:13:27.000Z</published>
    <updated>2025-12-06T11:22:35.705Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Spring-Boot-å®šæ—¶ä»»åŠ¡ï¼ˆTaskï¼‰ä½¿ç”¨æ•™ç¨‹ï¼šä»å…¥é—¨åˆ°ç²¾é€š"><a href="#Spring-Boot-å®šæ—¶ä»»åŠ¡ï¼ˆTaskï¼‰ä½¿ç”¨æ•™ç¨‹ï¼šä»å…¥é—¨åˆ°ç²¾é€š" class="headerlink" title="Spring Boot å®šæ—¶ä»»åŠ¡ï¼ˆTaskï¼‰ä½¿ç”¨æ•™ç¨‹ï¼šä»å…¥é—¨åˆ°ç²¾é€š"></a>Spring Boot å®šæ—¶ä»»åŠ¡ï¼ˆTaskï¼‰ä½¿ç”¨æ•™ç¨‹ï¼šä»å…¥é—¨åˆ°ç²¾é€š</h1><p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œå®šæ—¶ä»»åŠ¡æ˜¯ä¸€ä¸ªéå¸¸å¸¸è§çš„éœ€æ±‚ï¼Œæ¯”å¦‚å®šæ—¶å‘é€çŸ­ä¿¡ã€å®šæ—¶ç”ŸæˆæŠ¥è¡¨ã€å®šæ—¶æ¸…ç†ç¼“å­˜ç­‰ã€‚Spring Boot å†…ç½®äº† <code>spring-boot-starter</code> æ¨¡å—ï¼Œå…¶ä¸­å°±åŒ…å«äº†å¯¹å®šæ—¶ä»»åŠ¡çš„æ”¯æŒï¼Œæ— éœ€é¢å¤–å¼•å…¥å¤æ‚çš„ç¬¬ä¸‰æ–¹æ¡†æ¶ï¼ˆå¦‚ Quartzï¼‰ï¼Œå°±èƒ½å¿«é€Ÿå®ç°å®šæ—¶ä»»åŠ¡åŠŸèƒ½ã€‚æœ¬æ–‡å°†ä»åŸºç¡€åˆ°è¿›é˜¶ï¼Œè¯¦ç»†è®²è§£ Spring Boot å®šæ—¶ä»»åŠ¡çš„ä½¿ç”¨æ–¹æ³•ã€‚</p><h2 id="ä¸€ã€Spring-Boot-å®šæ—¶ä»»åŠ¡åŸºç¡€"><a href="#ä¸€ã€Spring-Boot-å®šæ—¶ä»»åŠ¡åŸºç¡€" class="headerlink" title="ä¸€ã€Spring Boot å®šæ—¶ä»»åŠ¡åŸºç¡€"></a>ä¸€ã€Spring Boot å®šæ—¶ä»»åŠ¡åŸºç¡€</h2><h3 id="1-1-ä»€ä¹ˆæ˜¯å®šæ—¶ä»»åŠ¡ï¼Ÿ"><a href="#1-1-ä»€ä¹ˆæ˜¯å®šæ—¶ä»»åŠ¡ï¼Ÿ" class="headerlink" title="1.1 ä»€ä¹ˆæ˜¯å®šæ—¶ä»»åŠ¡ï¼Ÿ"></a>1.1 ä»€ä¹ˆæ˜¯å®šæ—¶ä»»åŠ¡ï¼Ÿ</h3><p>å®šæ—¶ä»»åŠ¡æ˜¯æŒ‡åœ¨é¢„å®šçš„æ—¶é—´ç‚¹æˆ–æŒ‰ç…§å›ºå®šçš„æ—¶é—´é—´éš”è‡ªåŠ¨æ‰§è¡Œçš„ä»»åŠ¡ã€‚åœ¨ Java ç”Ÿæ€ä¸­ï¼Œå¸¸è§çš„å®šæ—¶ä»»åŠ¡å®ç°æ–¹å¼æœ‰ <code>Timer</code>ã€<code>ScheduledExecutorService</code>ã€Quartz ç­‰ï¼Œè€Œ Spring Boot æä¾›çš„ <code>@Scheduled</code> æ³¨è§£åˆ™æ˜¯å¯¹è¿™äº›åº•å±‚å®ç°çš„å°è£…ï¼Œç®€åŒ–äº†å¼€å‘æµç¨‹ã€‚</p><h3 id="1-2-å¯ç”¨å®šæ—¶ä»»åŠ¡"><a href="#1-2-å¯ç”¨å®šæ—¶ä»»åŠ¡" class="headerlink" title="1.2 å¯ç”¨å®šæ—¶ä»»åŠ¡"></a>1.2 å¯ç”¨å®šæ—¶ä»»åŠ¡</h3><p>Spring Boot ä¸­å¯ç”¨å®šæ—¶ä»»åŠ¡éå¸¸ç®€å•ï¼Œåªéœ€ä¸¤æ­¥ï¼š</p><ol><li><strong>æ·»åŠ ä¾èµ–</strong>ï¼šSpring Boot çš„ <code>spring-boot-starter</code> å·²ç»åŒ…å«äº†å®šæ—¶ä»»åŠ¡ç›¸å…³çš„ä¾èµ–ï¼Œæ— éœ€é¢å¤–å¼•å…¥ã€‚å¦‚æœæ˜¯ Maven é¡¹ç›®ï¼Œ<code>pom.xml</code> ä¸­é»˜è®¤çš„ <code>spring-boot-starter</code> å³å¯æ»¡è¶³éœ€æ±‚ï¼š</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><ol><li><strong>å¼€å¯å®šæ—¶ä»»åŠ¡æ³¨è§£</strong>ï¼šåœ¨ Spring Boot å¯åŠ¨ç±»ä¸Šæ·»åŠ  <code>@EnableScheduling</code> æ³¨è§£ï¼Œç”¨äºå¯ç”¨å®šæ—¶ä»»åŠ¡çš„è‡ªåŠ¨é…ç½®ï¼š</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.scheduling.annotation.EnableScheduling;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableScheduling</span> <span class="comment">// å¼€å¯å®šæ—¶ä»»åŠ¡</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TaskDemoApplication</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(TaskDemoApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="äºŒã€ç®€å•å®šæ—¶ä»»åŠ¡å®ç°"><a href="#äºŒã€ç®€å•å®šæ—¶ä»»åŠ¡å®ç°" class="headerlink" title="äºŒã€ç®€å•å®šæ—¶ä»»åŠ¡å®ç°"></a>äºŒã€ç®€å•å®šæ—¶ä»»åŠ¡å®ç°</h2><p>å¯ç”¨å®šæ—¶ä»»åŠ¡åï¼Œåªéœ€åœ¨éœ€è¦å®šæ—¶æ‰§è¡Œçš„æ–¹æ³•ä¸Šæ·»åŠ  <code>@Scheduled</code> æ³¨è§£ï¼Œå¹¶æŒ‡å®šä»»åŠ¡çš„æ‰§è¡Œæ—¶æœºå³å¯ã€‚<code>@Scheduled</code> æ³¨è§£æ”¯æŒå¤šç§å®šæ—¶æ–¹å¼ï¼Œä¸‹é¢ä»‹ç»æœ€å¸¸ç”¨çš„å‡ ç§ã€‚</p><h3 id="2-1-å›ºå®šå»¶è¿Ÿæ‰§è¡Œï¼ˆfixedDelayï¼‰"><a href="#2-1-å›ºå®šå»¶è¿Ÿæ‰§è¡Œï¼ˆfixedDelayï¼‰" class="headerlink" title="2.1 å›ºå®šå»¶è¿Ÿæ‰§è¡Œï¼ˆfixedDelayï¼‰"></a>2.1 å›ºå®šå»¶è¿Ÿæ‰§è¡Œï¼ˆfixedDelayï¼‰</h3><p><code>fixedDelay</code> è¡¨ç¤ºä¸Šä¸€æ¬¡ä»»åŠ¡æ‰§è¡Œå®Œæˆåï¼Œé—´éš”å›ºå®šæ—¶é—´å†æ‰§è¡Œä¸‹ä¸€æ¬¡ä»»åŠ¡ã€‚å•ä½ä¸ºæ¯«ç§’ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.scheduling.annotation.Scheduled;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span> <span class="comment">// äº¤ç»™ Spring ç®¡ç†</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SimpleTask</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¸Šä¸€æ¬¡ä»»åŠ¡æ‰§è¡Œå®Œæˆåï¼Œé—´éš” 3 ç§’æ‰§è¡Œä¸‹ä¸€æ¬¡</span></span><br><span class="line">    <span class="meta">@Scheduled(fixedDelay = 3000)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fixedDelayTask</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;å›ºå®šå»¶è¿Ÿä»»åŠ¡æ‰§è¡Œæ—¶é—´ï¼š&quot;</span> + LocalDateTime.now());</span><br><span class="line">        <span class="comment">// æ¨¡æ‹Ÿä»»åŠ¡æ‰§è¡Œè€—æ—¶</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœç¤ºä¾‹ï¼šä¸¤æ¬¡ä»»åŠ¡çš„é—´éš”æ—¶é—´ä¸º <code>3000ms + ä»»åŠ¡æ‰§è¡Œè€—æ—¶ï¼ˆ1000msï¼‰</code>ï¼Œå³çº¦ 4 ç§’ã€‚</p><h3 id="2-2-å›ºå®šé¢‘ç‡æ‰§è¡Œï¼ˆfixedRateï¼‰"><a href="#2-2-å›ºå®šé¢‘ç‡æ‰§è¡Œï¼ˆfixedRateï¼‰" class="headerlink" title="2.2 å›ºå®šé¢‘ç‡æ‰§è¡Œï¼ˆfixedRateï¼‰"></a>2.2 å›ºå®šé¢‘ç‡æ‰§è¡Œï¼ˆfixedRateï¼‰</h3><p><code>fixedRate</code> è¡¨ç¤ºæŒ‰ç…§å›ºå®šçš„é¢‘ç‡æ‰§è¡Œä»»åŠ¡ï¼Œæ— è®ºä¸Šä¸€æ¬¡ä»»åŠ¡æ˜¯å¦æ‰§è¡Œå®Œæˆã€‚å•ä½ä¸ºæ¯«ç§’ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// æ¯éš” 3 ç§’æ‰§è¡Œä¸€æ¬¡ï¼Œä¸ç®¡ä¸Šä¸€æ¬¡ä»»åŠ¡æ˜¯å¦å®Œæˆ</span></span><br><span class="line"><span class="meta">@Scheduled(fixedRate = 3000)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">fixedRateTask</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;å›ºå®šé¢‘ç‡ä»»åŠ¡æ‰§è¡Œæ—¶é—´ï¼š&quot;</span> + LocalDateTime.now());</span><br><span class="line">    <span class="comment">// æ¨¡æ‹Ÿä»»åŠ¡æ‰§è¡Œè€—æ—¶</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœç¤ºä¾‹ï¼šä¸¤æ¬¡ä»»åŠ¡çš„é—´éš”æ—¶é—´çº¦ä¸º 3 ç§’ï¼ˆå› ä¸ºä»»åŠ¡è€—æ—¶ 1 ç§’ï¼Œå°äºé¢‘ç‡é—´éš”ï¼‰ã€‚å¦‚æœä»»åŠ¡è€—æ—¶è¶…è¿‡é¢‘ç‡é—´éš”ï¼ˆå¦‚ä»»åŠ¡è€—æ—¶ 4 ç§’ï¼‰ï¼Œåˆ™ä¸Šä¸€æ¬¡ä»»åŠ¡æ‰§è¡Œå®Œæˆåä¼šç«‹å³æ‰§è¡Œä¸‹ä¸€æ¬¡ä»»åŠ¡ã€‚</p><h3 id="2-3-åˆå§‹å»¶è¿Ÿæ‰§è¡Œï¼ˆinitialDelayï¼‰"><a href="#2-3-åˆå§‹å»¶è¿Ÿæ‰§è¡Œï¼ˆinitialDelayï¼‰" class="headerlink" title="2.3 åˆå§‹å»¶è¿Ÿæ‰§è¡Œï¼ˆinitialDelayï¼‰"></a>2.3 åˆå§‹å»¶è¿Ÿæ‰§è¡Œï¼ˆinitialDelayï¼‰</h3><p><code>initialDelay</code> è¡¨ç¤ºä»»åŠ¡å¯åŠ¨åï¼Œå»¶è¿ŸæŒ‡å®šæ—¶é—´å†å¼€å§‹æ‰§è¡Œç¬¬ä¸€æ¬¡ä»»åŠ¡ï¼Œä¹‹åæŒ‰ç…§ <code>fixedDelay</code> æˆ– <code>fixedRate</code> æ‰§è¡Œã€‚å•ä½ä¸ºæ¯«ç§’ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// å¯åŠ¨åå»¶è¿Ÿ 5 ç§’æ‰§è¡Œç¬¬ä¸€æ¬¡ä»»åŠ¡ï¼Œä¹‹åæ¯éš” 3 ç§’æ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line"><span class="meta">@Scheduled(initialDelay = 5000, fixedRate = 3000)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">initialDelayTask</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;åˆå§‹å»¶è¿Ÿä»»åŠ¡æ‰§è¡Œæ—¶é—´ï¼š&quot;</span> + LocalDateTime.now());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœç¤ºä¾‹ï¼šåº”ç”¨å¯åŠ¨ 5 ç§’åï¼Œç¬¬ä¸€æ¬¡æ‰§è¡Œä»»åŠ¡ï¼Œä¹‹åæ¯ 3 ç§’æ‰§è¡Œä¸€æ¬¡ã€‚</p><h2 id="ä¸‰ã€Cron-è¡¨è¾¾å¼ï¼šçµæ´»çš„å®šæ—¶é…ç½®"><a href="#ä¸‰ã€Cron-è¡¨è¾¾å¼ï¼šçµæ´»çš„å®šæ—¶é…ç½®" class="headerlink" title="ä¸‰ã€Cron è¡¨è¾¾å¼ï¼šçµæ´»çš„å®šæ—¶é…ç½®"></a>ä¸‰ã€Cron è¡¨è¾¾å¼ï¼šçµæ´»çš„å®šæ—¶é…ç½®</h2><p>å¦‚æœéœ€è¦æ›´çµæ´»çš„å®šæ—¶è§„åˆ™ï¼ˆå¦‚æ¯å¤©å‡Œæ™¨ 2 ç‚¹æ‰§è¡Œã€æ¯å‘¨ä¸€ä¸Šåˆ 10 ç‚¹æ‰§è¡Œç­‰ï¼‰ï¼Œ<code>fixedDelay</code> å’Œ <code>fixedRate</code> å°±æ— æ³•æ»¡è¶³éœ€æ±‚äº†ï¼Œæ­¤æ—¶éœ€è¦ä½¿ç”¨ <strong>Cron è¡¨è¾¾å¼</strong>ã€‚</p><h3 id="3-1-Cron-è¡¨è¾¾å¼æ ¼å¼"><a href="#3-1-Cron-è¡¨è¾¾å¼æ ¼å¼" class="headerlink" title="3.1 Cron è¡¨è¾¾å¼æ ¼å¼"></a>3.1 Cron è¡¨è¾¾å¼æ ¼å¼</h3><p>Cron è¡¨è¾¾å¼æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç”± 6 æˆ– 7 ä¸ªå­—æ®µç»„æˆï¼Œå­—æ®µä¹‹é—´ç”¨ç©ºæ ¼åˆ†éš”ã€‚Spring Boot ä¸­çš„ Cron è¡¨è¾¾å¼æ”¯æŒ 6 ä¸ªå­—æ®µï¼ˆä¸æ”¯æŒå¹´ä»½ï¼‰ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</p><div class="callout">ç§’ åˆ† æ—¶ æ—¥ æœˆ æ˜ŸæœŸ</div><p>æ¯ä¸ªå­—æ®µçš„å–å€¼èŒƒå›´å’Œå…è®¸çš„ç‰¹æ®Šå­—ç¬¦å¦‚ä¸‹ï¼š</p><div class="table-container"><table><thead><tr><th>å­—æ®µ</th><th>å–å€¼èŒƒå›´</th><th>ç‰¹æ®Šå­—ç¬¦</th></tr></thead><tbody><tr><td>ç§’</td><td>0-59</td><td>, - * /</td></tr><tr><td>åˆ†</td><td>0-59</td><td>, - * /</td></tr><tr><td>æ—¶</td><td>0-23</td><td>, - * /</td></tr><tr><td>æ—¥</td><td>1-31</td><td>, - * / ? L W C</td></tr><tr><td>æœˆ</td><td>1-12 æˆ– JAN-DEC</td><td>, - * /</td></tr><tr><td>æ˜ŸæœŸ</td><td>1-7 æˆ– SUN-SATï¼ˆ1 è¡¨ç¤ºæ˜ŸæœŸæ—¥ï¼‰</td><td>, - * / ? L C #</td></tr></tbody></table></div><h3 id="3-2-å¸¸ç”¨ç‰¹æ®Šå­—ç¬¦è¯´æ˜"><a href="#3-2-å¸¸ç”¨ç‰¹æ®Šå­—ç¬¦è¯´æ˜" class="headerlink" title="3.2 å¸¸ç”¨ç‰¹æ®Šå­—ç¬¦è¯´æ˜"></a>3.2 å¸¸ç”¨ç‰¹æ®Šå­—ç¬¦è¯´æ˜</h3><ul><li><p><strong>*</strong>ï¼šè¡¨ç¤ºæ‰€æœ‰å¯èƒ½çš„å€¼ï¼Œä¾‹å¦‚â€œç§’â€å­—æ®µä¸º <code>*</code>ï¼Œè¡¨ç¤ºæ¯ç§’æ‰§è¡Œã€‚</p></li><li><p><strong>?</strong>ï¼šç”¨äºâ€œæ—¥â€å’Œâ€œæ˜ŸæœŸâ€å­—æ®µï¼Œè¡¨ç¤ºä¸æŒ‡å®šå…·ä½“å€¼ï¼Œé¿å…ä¸¤è€…å†²çªã€‚ä¾‹å¦‚æ¯æœˆ 10 æ—¥æ‰§è¡Œï¼Œä¸ç®¡æ˜¯æ˜ŸæœŸå‡ ï¼Œâ€œæ˜ŸæœŸâ€å­—æ®µå°±å¡« <code>?</code>ã€‚</p></li><li><p><strong>/</strong>ï¼šè¡¨ç¤ºå¢é‡ï¼Œä¾‹å¦‚â€œåˆ†â€å­—æ®µä¸º <code>0/5</code>ï¼Œè¡¨ç¤ºä» 0 åˆ†å¼€å§‹ï¼Œæ¯ 5 åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ã€‚</p></li><li><p><strong>-</strong>ï¼šè¡¨ç¤ºèŒƒå›´ï¼Œä¾‹å¦‚â€œæ—¶â€å­—æ®µä¸º <code>9-17</code>ï¼Œè¡¨ç¤º 9 ç‚¹åˆ° 17 ç‚¹ä¹‹é—´æ‰§è¡Œã€‚</p></li><li><p><strong>,</strong>ï¼šè¡¨ç¤ºå¤šä¸ªå€¼ï¼Œä¾‹å¦‚â€œæ˜ŸæœŸâ€å­—æ®µä¸º <code>1,3,5</code>ï¼Œè¡¨ç¤ºæ˜ŸæœŸæ—¥ã€æ˜ŸæœŸäºŒã€æ˜ŸæœŸå››æ‰§è¡Œã€‚</p></li><li><p><strong>L</strong>ï¼šè¡¨ç¤ºâ€œæœ€åâ€ï¼Œä¾‹å¦‚â€œæ—¥â€å­—æ®µä¸º <code>L</code>ï¼Œè¡¨ç¤ºæ¯æœˆæœ€åä¸€å¤©ï¼›â€œæ˜ŸæœŸâ€å­—æ®µä¸º <code>L</code>ï¼Œè¡¨ç¤ºæ˜ŸæœŸå…­ã€‚</p></li><li><p><strong>#</strong>ï¼šç”¨äºâ€œæ˜ŸæœŸâ€å­—æ®µï¼Œè¡¨ç¤ºæ¯æœˆçš„ç¬¬å‡ ä¸ªæ˜ŸæœŸå‡ ï¼Œä¾‹å¦‚ <code>6#3</code> è¡¨ç¤ºæ¯æœˆç¬¬ä¸‰ä¸ªæ˜ŸæœŸäº”ï¼ˆ6 è¡¨ç¤ºæ˜ŸæœŸäº”ï¼‰ã€‚</p></li></ul><h3 id="3-3-Cron-è¡¨è¾¾å¼ç¤ºä¾‹"><a href="#3-3-Cron-è¡¨è¾¾å¼ç¤ºä¾‹" class="headerlink" title="3.3 Cron è¡¨è¾¾å¼ç¤ºä¾‹"></a>3.3 Cron è¡¨è¾¾å¼ç¤ºä¾‹</h3><ul><li><p>æ¯ç§’æ‰§è¡Œï¼š<code>* * * * * ?</code></p></li><li><p>æ¯ 5 åˆ†é’Ÿæ‰§è¡Œï¼š<code>0 */5 * * * ?</code></p></li><li><p>æ¯å¤©å‡Œæ™¨ 2 ç‚¹æ‰§è¡Œï¼š<code>0 0 2 * * ?</code></p></li><li><p>æ¯æœˆ 10 æ—¥ä¸Šåˆ 10 ç‚¹æ‰§è¡Œï¼š<code>0 0 10 10 * ?</code></p></li><li><p>æ¯å‘¨ä¸€åˆ°å‘¨äº”ä¸‹åˆ 5 ç‚¹æ‰§è¡Œï¼š<code>0 0 17 ? * 2-6</code>ï¼ˆ2 è¡¨ç¤ºæ˜ŸæœŸä¸€ï¼Œ6 è¡¨ç¤ºæ˜ŸæœŸäº”ï¼‰</p></li><li><p>æ¯æœˆæœ€åä¸€å¤©æ™šä¸Š 11 ç‚¹æ‰§è¡Œï¼š<code>0 0 23 L * ?</code></p></li></ul><h3 id="3-4-åœ¨-Scheduled-ä¸­ä½¿ç”¨-Cron-è¡¨è¾¾å¼"><a href="#3-4-åœ¨-Scheduled-ä¸­ä½¿ç”¨-Cron-è¡¨è¾¾å¼" class="headerlink" title="3.4 åœ¨ @Scheduled ä¸­ä½¿ç”¨ Cron è¡¨è¾¾å¼"></a>3.4 åœ¨ @Scheduled ä¸­ä½¿ç”¨ Cron è¡¨è¾¾å¼</h3><p>åªéœ€å°† <code>@Scheduled</code> æ³¨è§£çš„ <code>cron</code> å±æ€§è®¾ç½®ä¸ºå¯¹åº”çš„è¡¨è¾¾å¼å³å¯ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// æ¯å¤©å‡Œæ™¨ 2 ç‚¹æ‰§è¡Œ</span></span><br><span class="line"><span class="meta">@Scheduled(cron = &quot;0 0 2 * * ?&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">cronTask</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;Cron ä»»åŠ¡æ‰§è¡Œæ—¶é—´ï¼š&quot;</span> + LocalDateTime.now());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å››ã€å®šæ—¶ä»»åŠ¡å‚æ•°å¤–éƒ¨åŒ–é…ç½®"><a href="#å››ã€å®šæ—¶ä»»åŠ¡å‚æ•°å¤–éƒ¨åŒ–é…ç½®" class="headerlink" title="å››ã€å®šæ—¶ä»»åŠ¡å‚æ•°å¤–éƒ¨åŒ–é…ç½®"></a>å››ã€å®šæ—¶ä»»åŠ¡å‚æ•°å¤–éƒ¨åŒ–é…ç½®</h2><p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œå®šæ—¶ä»»åŠ¡çš„æ‰§è¡Œè§„åˆ™å¯èƒ½éœ€è¦æ ¹æ®ç¯å¢ƒåŠ¨æ€è°ƒæ•´ï¼ˆå¦‚å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒçš„æ‰§è¡Œé¢‘ç‡ä¸åŒï¼‰ã€‚æ­¤æ—¶ï¼Œä¸å»ºè®®å°†å‚æ•°ç¡¬ç¼–ç åœ¨ <code>@Scheduled</code> æ³¨è§£ä¸­ï¼Œè€Œæ˜¯é€šè¿‡ <code>application.properties</code> æˆ– <code>application.yml</code> è¿›è¡Œå¤–éƒ¨åŒ–é…ç½®ã€‚</p><h3 id="4-1-ä½¿ç”¨-properties-æ–‡ä»¶é…ç½®"><a href="#4-1-ä½¿ç”¨-properties-æ–‡ä»¶é…ç½®" class="headerlink" title="4.1 ä½¿ç”¨ properties æ–‡ä»¶é…ç½®"></a>4.1 ä½¿ç”¨ properties æ–‡ä»¶é…ç½®</h3><p>åœ¨ <code>application.properties</code> ä¸­æ·»åŠ å®šæ—¶ä»»åŠ¡å‚æ•°ï¼š</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># å®šæ—¶ä»»åŠ¡å‚æ•°é…ç½®</span></span><br><span class="line"><span class="attr">task.fixedRate</span>=<span class="string">3000</span></span><br><span class="line"><span class="attr">task.cron</span>=<span class="string">0 0 2 * * ?</span></span><br></pre></td></tr></table></figure><p>åœ¨ä»£ç ä¸­é€šè¿‡ <code>$&#123;&#125;</code> å¼•ç”¨é…ç½®ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// å¼•ç”¨å¤–éƒ¨é…ç½®çš„ fixedRate</span></span><br><span class="line"><span class="meta">@Scheduled(fixedRateString = &quot;$&#123;task.fixedRate&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">externalFixedRateTask</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;å¤–éƒ¨é…ç½®å›ºå®šé¢‘ç‡ä»»åŠ¡æ‰§è¡Œæ—¶é—´ï¼š&quot;</span> + LocalDateTime.now());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼•ç”¨å¤–éƒ¨é…ç½®çš„ cron è¡¨è¾¾å¼</span></span><br><span class="line"><span class="meta">@Scheduled(cron = &quot;$&#123;task.cron&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">externalCronTask</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;å¤–éƒ¨é…ç½® Cron ä»»åŠ¡æ‰§è¡Œæ—¶é—´ï¼š&quot;</span> + LocalDateTime.now());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„ï¼šå¯¹äºæ•°å€¼ç±»å‹çš„å‚æ•°ï¼ˆå¦‚ <code>fixedRate</code>ã€<code>fixedDelay</code>ï¼‰ï¼Œéœ€è¦ä½¿ç”¨ <code>fixedRateString</code>ã€<code>fixedDelayString</code> å±æ€§æ¥å¼•ç”¨å­—ç¬¦ä¸²ç±»å‹çš„é…ç½®å€¼ã€‚</p><h2 id="äº”ã€å®šæ—¶ä»»åŠ¡çš„é«˜çº§ç‰¹æ€§"><a href="#äº”ã€å®šæ—¶ä»»åŠ¡çš„é«˜çº§ç‰¹æ€§" class="headerlink" title="äº”ã€å®šæ—¶ä»»åŠ¡çš„é«˜çº§ç‰¹æ€§"></a>äº”ã€å®šæ—¶ä»»åŠ¡çš„é«˜çº§ç‰¹æ€§</h2><h3 id="5-1-å®šæ—¶ä»»åŠ¡çº¿ç¨‹æ± é…ç½®"><a href="#5-1-å®šæ—¶ä»»åŠ¡çº¿ç¨‹æ± é…ç½®" class="headerlink" title="5.1 å®šæ—¶ä»»åŠ¡çº¿ç¨‹æ± é…ç½®"></a>5.1 å®šæ—¶ä»»åŠ¡çº¿ç¨‹æ± é…ç½®</h3><p>Spring Boot å®šæ—¶ä»»åŠ¡é»˜è®¤ä½¿ç”¨å•çº¿ç¨‹æ‰§è¡Œï¼Œå¦‚æœå¤šä¸ªä»»åŠ¡åŒæ—¶è§¦å‘ï¼Œä¼šå‡ºç°ä»»åŠ¡æ’é˜Ÿçš„æƒ…å†µã€‚ä¸ºäº†æé«˜ä»»åŠ¡æ‰§è¡Œæ•ˆç‡ï¼Œå¯ä»¥é…ç½®å®šæ—¶ä»»åŠ¡çº¿ç¨‹æ± ã€‚</p><p>é€šè¿‡å®ç° <code>SchedulingConfigurer</code> æ¥å£æ¥é…ç½®çº¿ç¨‹æ± ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.scheduling.annotation.SchedulingConfigurer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.scheduling.concurrent.ThreadPoolTaskScheduler;</span><br><span class="line"><span class="keyword">import</span> org.springframework.scheduling.config.ScheduledTaskRegistrar;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ScheduledConfig</span> <span class="keyword">implements</span> <span class="title class_">SchedulingConfigurer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">configureTasks</span><span class="params">(ScheduledTaskRegistrar taskRegistrar)</span> &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºçº¿ç¨‹æ± ï¼Œæ ¸å¿ƒçº¿ç¨‹æ•°ä¸º 5</span></span><br><span class="line">        <span class="type">ThreadPoolTaskScheduler</span> <span class="variable">scheduler</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadPoolTaskScheduler</span>();</span><br><span class="line">        scheduler.setPoolSize(<span class="number">5</span>);</span><br><span class="line">        scheduler.setThreadNamePrefix(<span class="string">&quot;scheduled-task-&quot;</span>); <span class="comment">// çº¿ç¨‹åå‰ç¼€</span></span><br><span class="line">        scheduler.initialize();</span><br><span class="line">        </span><br><span class="line">        taskRegistrar.setTaskScheduler(scheduler);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é…ç½®åï¼Œå®šæ—¶ä»»åŠ¡ä¼šé€šè¿‡çº¿ç¨‹æ± ä¸­çš„çº¿ç¨‹å¹¶è¡Œæ‰§è¡Œï¼Œé¿å…å•çº¿ç¨‹ç“¶é¢ˆã€‚</p><h3 id="5-2-åŠ¨æ€è°ƒæ•´å®šæ—¶ä»»åŠ¡"><a href="#5-2-åŠ¨æ€è°ƒæ•´å®šæ—¶ä»»åŠ¡" class="headerlink" title="5.2 åŠ¨æ€è°ƒæ•´å®šæ—¶ä»»åŠ¡"></a>5.2 åŠ¨æ€è°ƒæ•´å®šæ—¶ä»»åŠ¡</h3><p>å¦‚æœéœ€è¦åœ¨åº”ç”¨è¿è¡Œè¿‡ç¨‹ä¸­åŠ¨æ€ä¿®æ”¹å®šæ—¶ä»»åŠ¡çš„æ‰§è¡Œè§„åˆ™ï¼ˆå¦‚ä¿®æ”¹ Cron è¡¨è¾¾å¼ï¼‰ï¼Œå¯ä»¥é€šè¿‡ <code>ScheduledTaskRegistrar</code> å’Œ <code>Trigger</code> æ¥å£å®ç°ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.scheduling.annotation.EnableScheduling;</span><br><span class="line"><span class="keyword">import</span> org.springframework.scheduling.annotation.SchedulingConfigurer;</span><br><span class="line"><span class="keyword">import</span> org.springframework.scheduling.config.ScheduledTaskRegistrar;</span><br><span class="line"><span class="keyword">import</span> org.springframework.scheduling.support.CronTrigger;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableScheduling</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DynamicTaskConfig</span> <span class="keyword">implements</span> <span class="title class_">SchedulingConfigurer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä»é…ç½®æ–‡ä»¶ä¸­è¯»å– Cron è¡¨è¾¾å¼ï¼Œæ”¯æŒåŠ¨æ€åˆ·æ–°</span></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;task.dynamic.cron&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String cronExpression;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">configureTasks</span><span class="params">(ScheduledTaskRegistrar taskRegistrar)</span> &#123;</span><br><span class="line">        <span class="comment">// åŠ¨æ€æ³¨å†Œå®šæ—¶ä»»åŠ¡</span></span><br><span class="line">        taskRegistrar.addTriggerTask(</span><br><span class="line">            () -&gt; System.out.println(<span class="string">&quot;åŠ¨æ€å®šæ—¶ä»»åŠ¡æ‰§è¡Œæ—¶é—´ï¼š&quot;</span> + LocalDateTime.now()),</span><br><span class="line">            triggerContext -&gt; &#123;</span><br><span class="line">                <span class="comment">// æ¯æ¬¡æ‰§è¡Œå‰é‡æ–°è¯»å– Cron è¡¨è¾¾å¼ï¼Œå®ç°åŠ¨æ€è°ƒæ•´</span></span><br><span class="line">                <span class="type">CronTrigger</span> <span class="variable">trigger</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CronTrigger</span>(cronExpression);</span><br><span class="line">                <span class="keyword">return</span> trigger.nextExecutionTime(triggerContext);</span><br><span class="line">            &#125;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æä¾›æ–¹æ³•ä¿®æ”¹ cronExpression</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCronExpression</span><span class="params">(String cronExpression)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.cronExpression = cronExpression;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡è°ƒç”¨ <code>setCronExpression</code> æ–¹æ³•ï¼Œå¯ä»¥åœ¨åº”ç”¨è¿è¡Œæ—¶ä¿®æ”¹ä»»åŠ¡çš„æ‰§è¡Œè§„åˆ™ã€‚å¦‚æœç»“åˆé…ç½®ä¸­å¿ƒï¼ˆå¦‚ Nacosã€Apolloï¼‰ï¼Œè¿˜èƒ½å®ç°é…ç½®çš„åŠ¨æ€æ¨é€ã€‚</p><h2 id="å…­ã€æ³¨æ„äº‹é¡¹"><a href="#å…­ã€æ³¨æ„äº‹é¡¹" class="headerlink" title="å…­ã€æ³¨æ„äº‹é¡¹"></a>å…­ã€æ³¨æ„äº‹é¡¹</h2><ul><li><p><strong>ä»»åŠ¡æ‰§è¡Œæ—¶é•¿</strong>ï¼šå¦‚æœä»»åŠ¡æ‰§è¡Œæ—¶é•¿è¶…è¿‡äº†å®šæ—¶é¢‘ç‡ï¼Œä¼šå¯¼è‡´ä»»åŠ¡å †ç§¯ã€‚å»ºè®®é€šè¿‡çº¿ç¨‹æ± é…ç½®æˆ–ä¼˜åŒ–ä»»åŠ¡é€»è¾‘æ¥é¿å…ã€‚</p></li><li><p><strong>å¼‚å¸¸å¤„ç†</strong>ï¼šå®šæ—¶ä»»åŠ¡æ–¹æ³•ä¸­å¦‚æœæŠ›å‡ºæœªæ•è·çš„å¼‚å¸¸ï¼Œä¼šå¯¼è‡´ä»»åŠ¡ç»ˆæ­¢ã€‚å»ºè®®åœ¨æ–¹æ³•å†…éƒ¨æ·»åŠ  try-catch å—ï¼Œæˆ–é€šè¿‡å…¨å±€å¼‚å¸¸å¤„ç†å™¨æ•è·å¼‚å¸¸ã€‚</p></li><li><p><strong>åˆ†å¸ƒå¼ç¯å¢ƒ</strong>ï¼šSpring Boot å†…ç½®çš„å®šæ—¶ä»»åŠ¡ä¸æ”¯æŒåˆ†å¸ƒå¼é”ï¼Œåœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹å¯èƒ½å‡ºç°å¤šä¸ªèŠ‚ç‚¹åŒæ—¶æ‰§è¡Œä»»åŠ¡çš„æƒ…å†µã€‚æ­¤æ—¶éœ€è¦ç»“åˆåˆ†å¸ƒå¼é”ï¼ˆå¦‚ Redis åˆ†å¸ƒå¼é”ï¼‰æ¥ä¿è¯ä»»åŠ¡çš„å”¯ä¸€æ€§ã€‚</p></li><li><p><strong>å¹‚ç­‰æ€§</strong>ï¼šå³ä½¿ä½¿ç”¨äº†åˆ†å¸ƒå¼é”ï¼Œä¹Ÿå»ºè®®ä¿è¯ä»»åŠ¡çš„å¹‚ç­‰æ€§ï¼Œé¿å…å› ç½‘ç»œæŠ–åŠ¨ç­‰é—®é¢˜å¯¼è‡´ä»»åŠ¡é‡å¤æ‰§è¡Œã€‚</p></li></ul><h2 id="ä¸ƒã€æ€»ç»“"><a href="#ä¸ƒã€æ€»ç»“" class="headerlink" title="ä¸ƒã€æ€»ç»“"></a>ä¸ƒã€æ€»ç»“</h2><p>Spring Boot å®šæ—¶ä»»åŠ¡é€šè¿‡ <code>@EnableScheduling</code> å’Œ <code>@Scheduled</code> æ³¨è§£ï¼Œæå¤§åœ°ç®€åŒ–äº†å®šæ—¶ä»»åŠ¡çš„å¼€å‘ã€‚æœ¬æ–‡ä»åŸºç¡€çš„å›ºå®šå»¶è¿Ÿã€å›ºå®šé¢‘ç‡ä»»åŠ¡ï¼Œåˆ°çµæ´»çš„ Cron è¡¨è¾¾å¼ï¼Œå†åˆ°å‚æ•°å¤–éƒ¨åŒ–å’Œçº¿ç¨‹æ± é…ç½®ï¼Œæœ€åä»‹ç»äº†åŠ¨æ€ä»»åŠ¡å’Œæ³¨æ„äº‹é¡¹ï¼Œè¦†ç›–äº†å®šæ—¶ä»»åŠ¡çš„å¤§éƒ¨åˆ†ä½¿ç”¨åœºæ™¯ã€‚</p><p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œéœ€è¦æ ¹æ®ä¸šåŠ¡éœ€æ±‚é€‰æ‹©åˆé€‚çš„å®šæ—¶æ–¹å¼ï¼Œå¹¶æ³¨æ„å¼‚å¸¸å¤„ç†ã€åˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„ä»»åŠ¡å”¯ä¸€æ€§ç­‰é—®é¢˜ã€‚å¸Œæœ›æœ¬æ–‡èƒ½å¸®åŠ©ä½ å¿«é€ŸæŒæ¡ Spring Boot å®šæ—¶ä»»åŠ¡çš„ä½¿ç”¨ğŸ˜Š</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Spring-Boot-å®šæ—¶ä»»åŠ¡ï¼ˆTaskï¼‰ä½¿ç”¨æ•™ç¨‹ï¼šä»å…¥é—¨åˆ°ç²¾é€š&quot;&gt;&lt;a href=&quot;#Spring-Boot-å®šæ—¶ä»»åŠ¡ï¼ˆTaskï¼‰ä½¿ç”¨æ•™ç¨‹ï¼šä»å…¥é—¨åˆ°ç²¾é€š&quot; class=&quot;headerlink&quot; title=&quot;Spring Boot å®šæ—¶ä»»åŠ¡ï¼ˆTaskï¼‰ä½¿ç”¨æ•™ç¨‹</summary>
      
    
    
    
    
    <category term="Spring Boot" scheme="https://nmcb666.vip/tags/Spring-Boot/"/>
    
  </entry>
  
  <entry>
    <title>å…³äºSpring Securityçš„ä¸€äº›äº‹</title>
    <link href="https://nmcb666.vip/posts/3f6c5c0b.html"/>
    <id>https://nmcb666.vip/posts/3f6c5c0b.html</id>
    <published>2025-09-14T13:54:10.000Z</published>
    <updated>2025-12-06T11:22:35.705Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Spring-Security-ä½¿ç”¨æ•™ç¨‹ï¼šä»å…¥é—¨åˆ°å®æˆ˜"><a href="#Spring-Security-ä½¿ç”¨æ•™ç¨‹ï¼šä»å…¥é—¨åˆ°å®æˆ˜" class="headerlink" title="Spring Security ä½¿ç”¨æ•™ç¨‹ï¼šä»å…¥é—¨åˆ°å®æˆ˜"></a>Spring Security ä½¿ç”¨æ•™ç¨‹ï¼šä»å…¥é—¨åˆ°å®æˆ˜</h1><p>åœ¨Webåº”ç”¨å¼€å‘ä¸­ï¼Œå®‰å…¨æ°¸è¿œæ˜¯ä¸å¯å¿½è§†çš„ç¯èŠ‚ã€‚Spring Securityä½œä¸ºSpringç”Ÿæ€ä¸­æˆç†Ÿçš„å®‰å…¨æ¡†æ¶ï¼Œæä¾›äº†å…¨é¢çš„è®¤è¯ï¼ˆAuthenticationï¼‰å’Œæˆæƒï¼ˆAuthorizationï¼‰è§£å†³æ–¹æ¡ˆã€‚æœ¬æ–‡å°†ä»åŸºç¡€åˆ°è¿›é˜¶ï¼Œå¸¦ä½ ä¸€æ­¥æ­¥æŒæ¡Spring Securityçš„æ ¸å¿ƒç”¨æ³•ï¼Œæ„å»ºå®‰å…¨å¯é çš„Java Webåº”ç”¨ã€‚(å¯¹çš„ï¼Œè¿™æ˜¯Spring Securityçš„å…¥é—¨ç¯‡)</p><h2 id="ä¸€ã€Spring-Security-æ ¸å¿ƒæ¦‚å¿µ"><a href="#ä¸€ã€Spring-Security-æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="ä¸€ã€Spring Security æ ¸å¿ƒæ¦‚å¿µ"></a>ä¸€ã€Spring Security æ ¸å¿ƒæ¦‚å¿µ</h2><p>åœ¨å¼€å§‹å®æˆ˜å‰ï¼Œå…ˆç†è§£å‡ ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œæœ‰åŠ©äºåç»­å­¦ä¹ ï¼š</p><ul><li><p><strong>è®¤è¯ï¼ˆAuthenticationï¼‰</strong>ï¼šéªŒè¯ç”¨æˆ·èº«ä»½çš„è¿‡ç¨‹ï¼Œæ¯”å¦‚ç™»å½•æ—¶æ ¡éªŒç”¨æˆ·åå’Œå¯†ç æ˜¯å¦æ­£ç¡®ã€‚</p></li><li><p><strong>æˆæƒï¼ˆAuthorizationï¼‰</strong>ï¼šåœ¨è®¤è¯é€šè¿‡åï¼Œåˆ¤æ–­ç”¨æˆ·æ˜¯å¦æœ‰æƒé™æ‰§è¡ŒæŸä¸ªæ“ä½œï¼ˆå¦‚è®¿é—®ç‰¹å®šæ¥å£ã€ä¿®æ”¹æ•°æ®ï¼‰ã€‚</p></li><li><p><strong>SecurityContext</strong>ï¼šå­˜å‚¨å½“å‰è®¤è¯ç”¨æˆ·çš„ä¿¡æ¯ï¼Œé€šè¿‡<code>SecurityContextHolder</code>å¯ä»¥éšæ—¶è·å–ã€‚</p></li><li><p><strong>UserDetails</strong>ï¼šå°è£…ç”¨æˆ·ä¿¡æ¯çš„æ¥å£ï¼ŒåŒ…å«ç”¨æˆ·åã€å¯†ç ã€æƒé™ç­‰æ ¸å¿ƒå­—æ®µã€‚</p></li><li><p><strong>AuthenticationManager</strong>ï¼šè®¤è¯çš„æ ¸å¿ƒç®¡ç†å™¨ï¼Œè´Ÿè´£è°ƒåº¦<code>AuthenticationProvider</code>å®Œæˆè®¤è¯ã€‚</p></li></ul><h2 id="äºŒã€ç¯å¢ƒæ­å»ºï¼šå¿«é€Ÿé›†æˆSpring-Security"><a href="#äºŒã€ç¯å¢ƒæ­å»ºï¼šå¿«é€Ÿé›†æˆSpring-Security" class="headerlink" title="äºŒã€ç¯å¢ƒæ­å»ºï¼šå¿«é€Ÿé›†æˆSpring Security"></a>äºŒã€ç¯å¢ƒæ­å»ºï¼šå¿«é€Ÿé›†æˆSpring Security</h2><p>æœ¬æ–‡åŸºäº<strong>Spring Boot 3.x</strong>è¿›è¡Œæ¼”ç¤ºï¼ŒSpring Bootå·²ä¸ºSpring Securityæä¾›äº†è‡ªåŠ¨é…ç½®ï¼Œé›†æˆè¿‡ç¨‹éå¸¸ç®€å•ã€‚</p><h3 id="2-1-å¼•å…¥ä¾èµ–"><a href="#2-1-å¼•å…¥ä¾èµ–" class="headerlink" title="2.1 å¼•å…¥ä¾èµ–"></a>2.1 å¼•å…¥ä¾èµ–</h3><p>åœ¨<code>pom.xml</code>ï¼ˆMavenï¼‰æˆ–<code>build.gradle</code>ï¼ˆGradleï¼‰ä¸­æ·»åŠ Spring Securityä¾èµ–ï¼š</p><details class="folding-tag" green><summary> æŸ¥çœ‹ä»£ç  </summary>              <div class='content'>              <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework.security/spring-security-core --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.security<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-security-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>7.0.0-M2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>              </div>            </details><h3 id="2-2-å¯åŠ¨åº”ç”¨ï¼Œä½“éªŒé»˜è®¤å®‰å…¨é…ç½®"><a href="#2-2-å¯åŠ¨åº”ç”¨ï¼Œä½“éªŒé»˜è®¤å®‰å…¨é…ç½®" class="headerlink" title="2.2 å¯åŠ¨åº”ç”¨ï¼Œä½“éªŒé»˜è®¤å®‰å…¨é…ç½®"></a>2.2 å¯åŠ¨åº”ç”¨ï¼Œä½“éªŒé»˜è®¤å®‰å…¨é…ç½®</h3><p>æ·»åŠ ä¾èµ–åï¼Œç›´æ¥å¯åŠ¨Spring Bootåº”ç”¨ï¼ŒSpring Securityä¼šè‡ªåŠ¨ç”Ÿæ•ˆï¼Œé»˜è®¤åšäº†ä»¥ä¸‹å®‰å…¨é…ç½®ï¼š</p><ol><li><p>æ‰€æœ‰æ¥å£é»˜è®¤éœ€è¦è®¤è¯æ‰èƒ½è®¿é—®ã€‚</p></li><li><p>ç”Ÿæˆä¸€ä¸ªé»˜è®¤ç”¨æˆ·ï¼Œç”¨æˆ·åæ˜¯<code>user</code>ï¼Œå¯†ç ä¼šåœ¨æ§åˆ¶å°è¾“å‡ºï¼ˆæ ¼å¼å¦‚ï¼š<code>Using generated security password: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx</code>ï¼‰ã€‚</p></li><li><p>æä¾›ä¸€ä¸ªé»˜è®¤çš„ç™»å½•é¡µé¢ï¼ˆè®¿é—®ä»»æ„æ¥å£ä¼šè‡ªåŠ¨è·³è½¬ï¼‰ã€‚</p></li></ol><p>æµ‹è¯•ï¼šè®¿é—®<code>http://localhost:8080/hello</code>ï¼ˆéœ€å…ˆç¼–å†™ä¸€ä¸ªç®€å•çš„Helloæ¥å£ï¼‰ï¼Œä¼šè·³è½¬è‡³ç™»å½•é¡µï¼Œè¾“å…¥é»˜è®¤ç”¨æˆ·åå’Œå¯†ç å³å¯è®¿é—®ã€‚</p><h2 id="ä¸‰ã€è‡ªå®šä¹‰è®¤è¯ï¼šä»é»˜è®¤åˆ°æ•°æ®åº“"><a href="#ä¸‰ã€è‡ªå®šä¹‰è®¤è¯ï¼šä»é»˜è®¤åˆ°æ•°æ®åº“" class="headerlink" title="ä¸‰ã€è‡ªå®šä¹‰è®¤è¯ï¼šä»é»˜è®¤åˆ°æ•°æ®åº“"></a>ä¸‰ã€è‡ªå®šä¹‰è®¤è¯ï¼šä»é»˜è®¤åˆ°æ•°æ®åº“</h2><p>é»˜è®¤é…ç½®ä»…ç”¨äºæµ‹è¯•ï¼Œå®é™…é¡¹ç›®ä¸­éœ€è¦å¯¹æ¥æ•°æ®åº“ç”¨æˆ·ï¼Œä¸‹é¢å®ç°è‡ªå®šä¹‰è®¤è¯é€»è¾‘ã€‚</p><h3 id="3-1-ç¼–å†™é…ç½®ç±»"><a href="#3-1-ç¼–å†™é…ç½®ç±»" class="headerlink" title="3.1 ç¼–å†™é…ç½®ç±»"></a>3.1 ç¼–å†™é…ç½®ç±»</h3><p>åˆ›å»º<code>SecurityConfig</code>ç±»ï¼Œç»§æ‰¿<code>WebSecurityConfigurerAdapter</code>ï¼ˆSpring Boot 3.xä¸­å·² deprecatedï¼Œæ¨èä½¿ç”¨å‡½æ•°å¼é£æ ¼é…ç½®ï¼‰ï¼š</p><details class="folding-tag" green><summary> æŸ¥çœ‹ä»£ç  </summary>              <div class='content'>              <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.web.builders.HttpSecurity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UserDetailsService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.crypto.password.PasswordEncoder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.web.SecurityFilterChain;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableWebSecurity</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SecurityConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ³¨å…¥è‡ªå®šä¹‰çš„UserDetailsServiceï¼ˆåç»­å®ç°ï¼‰</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> UserDetailsService userDetailsService;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SecurityConfig</span><span class="params">(UserDetailsService userDetailsService)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userDetailsService = userDetailsService;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é…ç½®å¯†ç åŠ å¯†å™¨ï¼ˆSpring Security 5+è¦æ±‚å¿…é¡»æŒ‡å®šå¯†ç åŠ å¯†æ–¹å¼ï¼‰</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> PasswordEncoder <span class="title function_">passwordEncoder</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BCryptPasswordEncoder</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é…ç½®SecurityFilterChainï¼ˆæ ¸å¿ƒé…ç½®ï¼‰</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> SecurityFilterChain <span class="title function_">securityFilterChain</span><span class="params">(HttpSecurity http)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        http</span><br><span class="line">            <span class="comment">// å…³é—­CSRFï¼ˆæµ‹è¯•ç¯å¢ƒå¯å…³é—­ï¼Œç”Ÿäº§ç¯å¢ƒéœ€å¼€å¯ï¼‰</span></span><br><span class="line">            .csrf(csrf -&gt; csrf.disable())</span><br><span class="line">            <span class="comment">// é…ç½®æˆæƒè§„åˆ™</span></span><br><span class="line">            .authorizeHttpRequests(auth -&gt; auth</span><br><span class="line">                <span class="comment">// æ”¾è¡Œç™»å½•æ¥å£ã€é™æ€èµ„æºç­‰</span></span><br><span class="line">                .requestMatchers(<span class="string">&quot;/login&quot;</span>).permitAll()</span><br><span class="line">                <span class="comment">// å…¶ä»–æ‰€æœ‰æ¥å£éœ€è¦è®¤è¯</span></span><br><span class="line">                .anyRequest().authenticated()</span><br><span class="line">            )</span><br><span class="line">            <span class="comment">// é…ç½®è¡¨å•ç™»å½•</span></span><br><span class="line">            .formLogin(form -&gt; form</span><br><span class="line">                <span class="comment">// è‡ªå®šä¹‰ç™»å½•é¡µé¢è·¯å¾„ï¼ˆå¯é€‰ï¼Œé»˜è®¤æ˜¯/spring-security-loginï¼‰</span></span><br><span class="line">                .loginPage(<span class="string">&quot;/custom-login&quot;</span>)</span><br><span class="line">                <span class="comment">// ç™»å½•è¯·æ±‚çš„æ¥å£è·¯å¾„ï¼ˆé»˜è®¤æ˜¯/loginï¼‰</span></span><br><span class="line">                .loginProcessingUrl(<span class="string">&quot;/do-login&quot;</span>)</span><br><span class="line">                <span class="comment">// ç™»å½•æˆåŠŸåçš„è·³è½¬è·¯å¾„</span></span><br><span class="line">                .defaultSuccessUrl(<span class="string">&quot;/index&quot;</span>, <span class="literal">true</span>)</span><br><span class="line">                <span class="comment">// ç™»å½•å¤±è´¥åçš„è·³è½¬è·¯å¾„</span></span><br><span class="line">                .failureUrl(<span class="string">&quot;/custom-login?error=true&quot;</span>)</span><br><span class="line">            )</span><br><span class="line">            <span class="comment">// é…ç½®é€€å‡ºç™»å½•</span></span><br><span class="line">            .logout(logout -&gt; logout</span><br><span class="line">                .logoutUrl(<span class="string">&quot;/logout&quot;</span>)</span><br><span class="line">                .logoutSuccessUrl(<span class="string">&quot;/custom-login?logout=true&quot;</span>)</span><br><span class="line">                .invalidateHttpSession(<span class="literal">true</span>) <span class="comment">// é”€æ¯session</span></span><br><span class="line">            );</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> http.build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><h3 id="3-2-å®ç°UserDetailsService"><a href="#3-2-å®ç°UserDetailsService" class="headerlink" title="3.2 å®ç°UserDetailsService"></a>3.2 å®ç°UserDetailsService</h3><p><code>UserDetailsService</code>è´Ÿè´£ä»æ•°æ®åº“åŠ è½½ç”¨æˆ·ä¿¡æ¯ï¼Œæˆ‘ä»¬éœ€è¦å®ç°å®ƒæ¥å¯¹æ¥è‡ªå·±çš„ç”¨æˆ·è¡¨ï¼š</p><details class="folding-tag" green><summary> æŸ¥çœ‹ä»£ç  </summary>              <div class='content'>              <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.User;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UserDetails;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UserDetailsService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.security.core.userdetails.UsernameNotFoundException;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CustomUserDetailsService</span> <span class="keyword">implements</span> <span class="title class_">UserDetailsService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ³¨å…¥ç”¨æˆ·DAOï¼ˆå®é™…é¡¹ç›®ä¸­æ›¿æ¢ä¸ºMyBatisæˆ–JPAçš„Repositoryï¼‰</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">CustomUserDetailsService</span><span class="params">(UserDao userDao)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userDao = userDao;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> UserDetails <span class="title function_">loadUserByUsername</span><span class="params">(String username)</span> <span class="keyword">throws</span> UsernameNotFoundException &#123;</span><br><span class="line">        <span class="comment">// ä»æ•°æ®åº“æŸ¥è¯¢ç”¨æˆ·</span></span><br><span class="line">        <span class="type">UserEntity</span> <span class="variable">user</span> <span class="operator">=</span> userDao.findByUsername(username);</span><br><span class="line">        <span class="keyword">if</span> (user == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">UsernameNotFoundException</span>(<span class="string">&quot;ç”¨æˆ·ä¸å­˜åœ¨&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å°†æ•°æ®åº“ç”¨æˆ·è½¬æ¢ä¸ºUserDetailså¯¹è±¡ï¼ˆåŒ…å«æƒé™ä¿¡æ¯ï¼‰</span></span><br><span class="line">        <span class="keyword">return</span> User.withUsername(user.getUsername())</span><br><span class="line">                .password(user.getPassword()) <span class="comment">// æ•°æ®åº“ä¸­å­˜å‚¨çš„å¯†ç å¿…é¡»æ˜¯åŠ å¯†åçš„</span></span><br><span class="line">                .roles(user.getRoles().split(<span class="string">&quot;,&quot;</span>)) <span class="comment">// å‡è®¾roleså­—æ®µæ˜¯é€—å·åˆ†éš”çš„è§’è‰²å­—ç¬¦ä¸²</span></span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><div class="callout">æ³¨æ„ï¼šæ•°æ®åº“ä¸­å­˜å‚¨çš„å¯†ç å¿…é¡»æ˜¯é€šè¿‡`BCryptPasswordEncoder`åŠ å¯†åçš„å­—ç¬¦ä¸²ï¼Œä¸èƒ½å­˜å‚¨æ˜æ–‡ã€‚å¯ä»¥é€šè¿‡`passwordEncoder.encode("123456")`ç”ŸæˆåŠ å¯†å¯†ç ã€‚</div><h2 id="å››ã€æˆæƒæ§åˆ¶ï¼šåŸºäºè§’è‰²å’Œæƒé™"><a href="#å››ã€æˆæƒæ§åˆ¶ï¼šåŸºäºè§’è‰²å’Œæƒé™" class="headerlink" title="å››ã€æˆæƒæ§åˆ¶ï¼šåŸºäºè§’è‰²å’Œæƒé™"></a>å››ã€æˆæƒæ§åˆ¶ï¼šåŸºäºè§’è‰²å’Œæƒé™</h2><p>è®¤è¯é€šè¿‡åï¼Œéœ€è¦å¯¹ä¸åŒç”¨æˆ·æˆäºˆä¸åŒæƒé™ï¼ŒSpring Securityæ”¯æŒå¤šç§æˆæƒæ–¹å¼ã€‚</p><h3 id="4-1-åŸºäºè§’è‰²çš„URLæˆæƒ"><a href="#4-1-åŸºäºè§’è‰²çš„URLæˆæƒ" class="headerlink" title="4.1 åŸºäºè§’è‰²çš„URLæˆæƒ"></a>4.1 åŸºäºè§’è‰²çš„URLæˆæƒ</h3><p>åœ¨<code>securityFilterChain</code>ä¸­é€šè¿‡<code>hasRole</code>æˆ–<code>hasAnyRole</code>é…ç½®URLçš„è§’è‰²æƒé™ï¼š</p><details class="folding-tag" green><summary> æŸ¥çœ‹ä»£ç  </summary>              <div class='content'>              <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">.authorizeHttpRequests(auth -&gt; auth</span><br><span class="line">    .requestMatchers(<span class="string">&quot;/admin/**&quot;</span>).hasRole(<span class="string">&quot;ADMIN&quot;</span>) <span class="comment">// åªæœ‰ADMINè§’è‰²å¯è®¿é—®/adminä¸‹çš„æ¥å£</span></span><br><span class="line">    .requestMatchers(<span class="string">&quot;/user/**&quot;</span>).hasAnyRole(<span class="string">&quot;ADMIN&quot;</span>, <span class="string">&quot;USER&quot;</span>) <span class="comment">// ADMINæˆ–USERè§’è‰²å¯è®¿é—®</span></span><br><span class="line">    .requestMatchers(<span class="string">&quot;/public/**&quot;</span>).permitAll() <span class="comment">// å…¬å¼€æ¥å£ï¼Œæ— éœ€è®¤è¯</span></span><br><span class="line">    .anyRequest().authenticated()</span><br><span class="line">)</span><br></pre></td></tr></table></figure>              </div>            </details><h3 id="4-2-åŸºäºæ³¨è§£çš„æ–¹æ³•çº§æˆæƒ"><a href="#4-2-åŸºäºæ³¨è§£çš„æ–¹æ³•çº§æˆæƒ" class="headerlink" title="4.2 åŸºäºæ³¨è§£çš„æ–¹æ³•çº§æˆæƒ"></a>4.2 åŸºäºæ³¨è§£çš„æ–¹æ³•çº§æˆæƒ</h3><p>åœ¨Controlleræ–¹æ³•ä¸Šä½¿ç”¨æ³¨è§£æ§åˆ¶æƒé™ï¼Œéœ€å…ˆå¼€å¯å…¨å±€æ–¹æ³•å®‰å…¨ï¼š</p><details class="folding-tag" green><summary> æŸ¥çœ‹ä»£ç  </summary>              <div class='content'>              <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableGlobalMethodSecurity(prePostEnabled = true)</span> <span class="comment">// å¼€å¯PreAuthorizeæ³¨è§£</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MethodSecurityConfig</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><p>ç„¶ååœ¨Controlleræ–¹æ³•ä¸Šä½¿ç”¨æ³¨è§£ï¼š</p><details class="folding-tag" green><summary> æŸ¥çœ‹ä»£ç  </summary>              <div class='content'>              <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/admin&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AdminController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åªæœ‰æ‹¥æœ‰ADMINè§’è‰²çš„ç”¨æˆ·å¯è®¿é—®</span></span><br><span class="line">    <span class="meta">@PreAuthorize(&quot;hasRole(&#x27;ADMIN&#x27;)&quot;)</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/user-manage&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">manageUser</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;ç”¨æˆ·ç®¡ç†é¡µé¢&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åªæœ‰æ‹¥æœ‰DELETEæƒé™çš„ç”¨æˆ·å¯è®¿é—®</span></span><br><span class="line">    <span class="meta">@PreAuthorize(&quot;hasAuthority(&#x27;DELETE&#x27;)&quot;)</span></span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/delete/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">deleteUser</span><span class="params">(<span class="meta">@PathVariable</span> Long id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;åˆ é™¤ç”¨æˆ·ï¼š&quot;</span> + id;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>              </div>            </details><h2 id="äº”ã€è¿›é˜¶åŠŸèƒ½ï¼šè®°ä½æˆ‘ä¸JWT"><a href="#äº”ã€è¿›é˜¶åŠŸèƒ½ï¼šè®°ä½æˆ‘ä¸JWT" class="headerlink" title="äº”ã€è¿›é˜¶åŠŸèƒ½ï¼šè®°ä½æˆ‘ä¸JWT"></a>äº”ã€è¿›é˜¶åŠŸèƒ½ï¼šè®°ä½æˆ‘ä¸JWT</h2><p>é™¤äº†åŸºç¡€çš„è®¤è¯æˆæƒï¼ŒSpring Securityè¿˜æ”¯æŒâ€œè®°ä½æˆ‘â€ã€JWTä»¤ç‰Œç­‰é«˜çº§åŠŸèƒ½ã€‚</p><h3 id="5-1-å®ç°â€œè®°ä½æˆ‘â€åŠŸèƒ½"><a href="#5-1-å®ç°â€œè®°ä½æˆ‘â€åŠŸèƒ½" class="headerlink" title="5.1 å®ç°â€œè®°ä½æˆ‘â€åŠŸèƒ½"></a>5.1 å®ç°â€œè®°ä½æˆ‘â€åŠŸèƒ½</h3><p>åªéœ€åœ¨<code>securityFilterChain</code>ä¸­æ·»åŠ <code>rememberMe</code>é…ç½®ï¼š</p><details class="folding-tag" green><summary> æŸ¥çœ‹ä»£ç  </summary>              <div class='content'>              <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">.rememberMe(remember -&gt; remember</span><br><span class="line">    .rememberMeParameter(<span class="string">&quot;remember-me&quot;</span>) <span class="comment">// ç™»å½•è¡¨å•ä¸­çš„è®°ä½æˆ‘å‚æ•°å</span></span><br><span class="line">    .tokenValiditySeconds(<span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span> * <span class="number">7</span>) <span class="comment">// è®°ä½æˆ‘æœ‰æ•ˆæœŸï¼ˆ7å¤©ï¼‰</span></span><br><span class="line">    .userDetailsService(userDetailsService) <span class="comment">// åŠ è½½ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>              </div>            </details><p>ç„¶ååœ¨ç™»å½•è¡¨å•ä¸­æ·»åŠ ä¸€ä¸ªåä¸º<code>remember-me</code>çš„å¤é€‰æ¡†å³å¯ã€‚</p><h3 id="5-2-é›†æˆJWTå®ç°æ— çŠ¶æ€è®¤è¯"><a href="#5-2-é›†æˆJWTå®ç°æ— çŠ¶æ€è®¤è¯" class="headerlink" title="5.2 é›†æˆJWTå®ç°æ— çŠ¶æ€è®¤è¯"></a>5.2 é›†æˆJWTå®ç°æ— çŠ¶æ€è®¤è¯</h3><p>å¯¹äºå‰åç«¯åˆ†ç¦»é¡¹ç›®ï¼Œé€šå¸¸ä½¿ç”¨JWTï¼ˆJSON Web Tokenï¼‰å®ç°æ— çŠ¶æ€è®¤è¯ï¼Œæ ¸å¿ƒæ­¥éª¤å¦‚ä¸‹ï¼š</p><ol><li><p><strong>å¼•å…¥JWTä¾èµ–</strong>ï¼šæ·»åŠ <code>jjwt-api</code>ã€<code>jjwt-impl</code>ã€<code>jjwt-jackson</code>ä¾èµ–ã€‚</p></li><li><p><strong>ç¼–å†™JWTå·¥å…·ç±»</strong>ï¼šå®ç°Tokençš„ç”Ÿæˆã€è§£æã€éªŒè¯é€»è¾‘ã€‚</p></li><li><p><strong>è‡ªå®šä¹‰JwtAuthenticationFilter</strong>ï¼šä»è¯·æ±‚å¤´ä¸­è·å–Tokenï¼Œè§£æåå®Œæˆè®¤è¯ã€‚</p></li><li><p><strong>é…ç½®SecurityFilterChain</strong>ï¼šå…³é—­sessionï¼Œæ·»åŠ JWTè¿‡æ»¤å™¨ï¼Œæ”¾è¡Œç™»å½•æ¥å£ç­‰ã€‚</p></li></ol><p>ç”±äºJWTé›†æˆæ­¥éª¤è¾ƒå¤šï¼Œåç»­ä¼šå•ç‹¬å†™ä¸€ç¯‡å®æˆ˜æ–‡ç« ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥å…³æ³¨ã€‚</p><h2 id="å…­ã€å¸¸è§é—®é¢˜ä¸æ’æŸ¥"><a href="#å…­ã€å¸¸è§é—®é¢˜ä¸æ’æŸ¥" class="headerlink" title="å…­ã€å¸¸è§é—®é¢˜ä¸æ’æŸ¥"></a>å…­ã€å¸¸è§é—®é¢˜ä¸æ’æŸ¥</h2><ul><li><p><strong>å¯†ç åŠ å¯†å¤±è´¥</strong>ï¼šç¡®ä¿æ•°æ®åº“ä¸­å­˜å‚¨çš„æ˜¯åŠ å¯†åçš„å¯†ç ï¼Œä¸”é…ç½®äº†æ­£ç¡®çš„<code>PasswordEncoder</code>ã€‚</p></li><li><p><strong>æ¥å£æˆæƒä¸ç”Ÿæ•ˆ</strong>ï¼šæ£€æŸ¥URLåŒ¹é…è§„åˆ™çš„é¡ºåºï¼ˆå…·ä½“è§„åˆ™è¦æ”¾åœ¨é€šç”¨è§„åˆ™å‰é¢ï¼‰ï¼Œä»¥åŠè§’è‰²/æƒé™åç§°æ˜¯å¦æ­£ç¡®ï¼ˆ<code>hasRole</code>ä¼šè‡ªåŠ¨æ·»åŠ <code>ROLE_</code>å‰ç¼€ï¼Œ<code>hasAuthority</code>éœ€è¦å®Œæ•´åç§°ï¼‰ã€‚</p></li><li><p><strong>CSRFé—®é¢˜</strong>ï¼šå‰åç«¯åˆ†ç¦»é¡¹ç›®ä¸­ï¼Œè‹¥å…³é—­CSRFï¼Œéœ€ç¡®ä¿è¯·æ±‚å¤´ä¸­æ²¡æœ‰æºå¸¦CSRF Tokenï¼›è‹¥å¼€å¯ï¼Œéœ€åœ¨å‰ç«¯è¯·æ±‚ä¸­æ·»åŠ Tokenã€‚</p></li></ul><h2 id="ä¸ƒã€æ€»ç»“"><a href="#ä¸ƒã€æ€»ç»“" class="headerlink" title="ä¸ƒã€æ€»ç»“"></a>ä¸ƒã€æ€»ç»“</h2><p>æœ¬æ–‡ä»‹ç»äº†Spring Securityçš„æ ¸å¿ƒæ¦‚å¿µã€ç¯å¢ƒæ­å»ºã€è‡ªå®šä¹‰è®¤è¯ã€æˆæƒæ§åˆ¶åŠè¿›é˜¶åŠŸèƒ½ï¼Œæ¶µç›–äº†å¤§éƒ¨åˆ†å®é™…é¡¹ç›®ä¸­çš„å¸¸ç”¨åœºæ™¯ã€‚Spring SecurityåŠŸèƒ½å¼ºå¤§ä¸”çµæ´»ï¼ŒæŒæ¡å®ƒèƒ½æœ‰æ•ˆæå‡åº”ç”¨çš„å®‰å…¨æ€§ã€‚å»ºè®®ç»“åˆå®é™…é¡¹ç›®å¤šåŠ¨æ‰‹å®è·µï¼Œæ·±å…¥ç†è§£å…¶æ ¸å¿ƒåŸç†ï¼ˆå¦‚è¿‡æ»¤å™¨é“¾ã€è®¤è¯æµç¨‹ç­‰ï¼‰ï¼Œä»¥ä¾¿åº”å¯¹æ›´å¤æ‚çš„å®‰å…¨éœ€æ±‚ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Spring-Security-ä½¿ç”¨æ•™ç¨‹ï¼šä»å…¥é—¨åˆ°å®æˆ˜&quot;&gt;&lt;a href=&quot;#Spring-Security-ä½¿ç”¨æ•™ç¨‹ï¼šä»å…¥é—¨åˆ°å®æˆ˜&quot; class=&quot;headerlink&quot; title=&quot;Spring Security ä½¿ç”¨æ•™ç¨‹ï¼šä»å…¥é—¨åˆ°å®æˆ˜&quot;&gt;&lt;/a&gt;Sprin</summary>
      
    
    
    
    
    <category term="Spring Boot" scheme="https://nmcb666.vip/tags/Spring-Boot/"/>
    
  </entry>
  
  <entry>
    <title>è®¡ç®—æœºæŠ€æœ¯</title>
    <link href="https://nmcb666.vip/posts/b67a9f87.html"/>
    <id>https://nmcb666.vip/posts/b67a9f87.html</id>
    <published>2025-09-13T22:53:06.000Z</published>
    <updated>2025-12-06T11:22:35.705Z</updated>
    
    <content type="html"><![CDATA[<object class="ghbdage" style="margin-inline:5px" title="" standby="loading..." data="https://img.shields.io/badge/Butterfly-Theme-orange?logo=&color=orange&link=&"></object><object class="ghbdage" style="margin-inline:5px" title="" standby="loading..." data="https://img.shields.io/badge/Hexo-Frame-orange?logo=hexo&color=orange&link=&"></object><svg class="icon" style="width:1em; height:1em" aria-hidden="true"><use xlink:href="#icon-rat_zi"></use></svg><svg class="icon" style="width:2em; height:2em" aria-hidden="true"><use xlink:href="#icon-rat"></use></svg><svg class="icon" style="width:3em; height:3em" aria-hidden="true"><use xlink:href="#icon-ox_chou"></use></svg><svg class="icon" style="width:4em; height:4em" aria-hidden="true"><use xlink:href="#icon-ox"></use></svg><svg class="icon" style="width:5em; height:5em" aria-hidden="true"><use xlink:href="#icon-tiger_yin"></use></svg><svg class="icon" style="width:6em; height:6em" aria-hidden="true"><use xlink:href="#icon-tiger"></use></svg><svg class="icon" style="width:1em; height:1em" aria-hidden="true"><use xlink:href="#icon-rabbit_mao"></use></svg><svg class="icon" style="width:2em; height:2em" aria-hidden="true"><use xlink:href="#icon-rabbit"></use></svg><svg class="icon" style="width:3em; height:3em" aria-hidden="true"><use xlink:href="#icon-dragon_chen"></use></svg><svg class="icon" style="width:4em; height:4em" aria-hidden="true"><use xlink:href="#icon-dragon"></use></svg><h1 id="ä»â€œå¡é¡¿â€åˆ°â€œä¸æ»‘â€ï¼šç°ä»£è®¡ç®—æœºæŠ€æœ¯å¦‚ä½•é‡å¡‘æˆ‘ä»¬çš„æ—¥å¸¸äº¤äº’"><a href="#ä»â€œå¡é¡¿â€åˆ°â€œä¸æ»‘â€ï¼šç°ä»£è®¡ç®—æœºæŠ€æœ¯å¦‚ä½•é‡å¡‘æˆ‘ä»¬çš„æ—¥å¸¸äº¤äº’" class="headerlink" title="ä»â€œå¡é¡¿â€åˆ°â€œä¸æ»‘â€ï¼šç°ä»£è®¡ç®—æœºæŠ€æœ¯å¦‚ä½•é‡å¡‘æˆ‘ä»¬çš„æ—¥å¸¸äº¤äº’"></a>ä»â€œå¡é¡¿â€åˆ°â€œä¸æ»‘â€ï¼šç°ä»£è®¡ç®—æœºæŠ€æœ¯å¦‚ä½•é‡å¡‘æˆ‘ä»¬çš„æ—¥å¸¸äº¤äº’</h1><p>åœ¨åå¹´å‰ï¼Œæ‰“å¼€ä¸€ä¸ªå¤§å‹æ–‡æ¡£éœ€è¦ç­‰å¾…å‡ åç§’ã€è§†é¢‘é€šè¯æ—¶é¢‘ç¹å‡ºç°â€œé©¬èµ›å…‹â€ã€æ‰‹æœºå¤šå¼€å‡ ä¸ªAPPå°±ä¼šé—ªé€€ï¼Œè¿™äº›åœºæ™¯å¯¹å¤§å¤šæ•°äººæ¥è¯´éƒ½å¸ç©ºè§æƒ¯ã€‚è€Œå¦‚ä»Šï¼Œæˆ‘ä»¬æ—©å·²ä¹ æƒ¯äº†â€œå³ç‚¹å³å¼€â€çš„æ–‡æ¡£ç¼–è¾‘ã€4Kç”»è´¨çš„å®æ—¶è§†é¢‘ä¼šè®®ã€æ‰‹æœºåå°åŒæ—¶è¿è¡Œåå‡ ä¸ªåº”ç”¨ä»æµç•…åˆ‡æ¢â€”â€”è¿™äº›â€œä¸æ»‘â€ä½“éªŒçš„èƒŒåï¼Œå¹¶éåªæ˜¯â€œç¡¬ä»¶å˜å¥½äº†â€è¿™ä¹ˆç®€å•ï¼Œè€Œæ˜¯è®¡ç®—æœºæŠ€æœ¯åœ¨<strong>å­˜å‚¨æ¶æ„ã€ç½‘ç»œä¼ è¾“ã€ç³»ç»Ÿä¼˜åŒ–</strong>ç­‰å¤šä¸ªç»´åº¦ååŒè¿›åŒ–çš„ç»“æœã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°±ä»æ—¥å¸¸åœºæ™¯åˆ‡å…¥ï¼ŒèŠèŠé‚£äº›â€œçœ‹ä¸è§å´ç¦»ä¸å¼€â€çš„æŠ€æœ¯è¿›æ­¥ã€‚</p><h2 id="ä¸€ã€å­˜å‚¨æŠ€æœ¯ï¼šä»â€œæœºæ¢°ç­‰å¾…â€åˆ°â€œç”µå­ç§’è¾¾â€"><a href="#ä¸€ã€å­˜å‚¨æŠ€æœ¯ï¼šä»â€œæœºæ¢°ç­‰å¾…â€åˆ°â€œç”µå­ç§’è¾¾â€" class="headerlink" title="ä¸€ã€å­˜å‚¨æŠ€æœ¯ï¼šä»â€œæœºæ¢°ç­‰å¾…â€åˆ°â€œç”µå­ç§’è¾¾â€"></a>ä¸€ã€å­˜å‚¨æŠ€æœ¯ï¼šä»â€œæœºæ¢°ç­‰å¾…â€åˆ°â€œç”µå­ç§’è¾¾â€</h2><p>æ‰“å¼€ç”µè„‘æ—¶ï¼Œç³»ç»Ÿå¯åŠ¨é€Ÿåº¦çš„å¿«æ…¢ï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºå­˜å‚¨è®¾å¤‡çš„æ€§èƒ½ã€‚åå¹´å‰ä¸»æµçš„æœºæ¢°ç¡¬ç›˜ï¼ˆHDDï¼‰ï¼Œå°±åƒä¸€ä¸ªâ€œå¸¦è½¬ç›˜çš„æ¡£æ¡ˆæŸœâ€ï¼šè¯»å†™æ•°æ®æ—¶ï¼Œéœ€è¦å…ˆè®©ç£ç›˜é«˜é€Ÿæ—‹è½¬ï¼ˆé€šå¸¸æ˜¯5400è½¬/åˆ†é’Ÿæˆ–7200è½¬/åˆ†é’Ÿï¼‰ï¼Œå†è®©ç£å¤´ç§»åŠ¨åˆ°æŒ‡å®šä½ç½®â€œæŸ¥æ‰¾â€æ•°æ®â€”â€”è¿™ä¸ªè¿‡ç¨‹è™½ç„¶æ¯”æ—©æœŸçš„è½¯ç›˜å¿«ï¼Œä½†ä»æœ‰æ˜æ˜¾çš„â€œç­‰å¾…æ—¶é—´â€ï¼ˆå¹³å‡å¯»é“æ—¶é—´çº¦8-12æ¯«ç§’ï¼‰ã€‚</p><p>è€Œç°åœ¨ä¸»æµçš„å›ºæ€ç¡¬ç›˜ï¼ˆSSDï¼‰ï¼Œå½»åº•æŠ›å¼ƒäº†â€œæœºæ¢°ç»“æ„â€ï¼Œæ”¹ç”¨<strong>NANDé—ªå­˜èŠ¯ç‰‡</strong>å­˜å‚¨æ•°æ®ï¼Œå°±åƒæŠŠâ€œæ¡£æ¡ˆæŸœâ€æ¢æˆäº†â€œç”µå­è´§æ¶â€ï¼šæ•°æ®é€šè¿‡ç”µä¿¡å·ç›´æ¥è¯»å†™ï¼Œæ— éœ€ç­‰å¾…ç£ç›˜æ—‹è½¬æˆ–ç£å¤´ç§»åŠ¨ï¼Œå¹³å‡å“åº”æ—¶é—´å¯ä»¥åšåˆ°0.1æ¯«ç§’ä»¥å†…â€”â€”è¿™æ„å‘³ç€ï¼Œä»â€œç‚¹å‡»å¼€æœºâ€åˆ°â€œè¿›å…¥æ¡Œé¢â€ï¼Œæ—¶é—´ä»åŸæ¥çš„1-2åˆ†é’Ÿå‹ç¼©åˆ°äº†10-20ç§’ï¼Œç”šè‡³æ›´çŸ­ã€‚</p><p>æ›´å…³é”®çš„æ˜¯ï¼ŒSSDçš„è¿›æ­¥è¿˜åœ¨æŒç»­ï¼š</p><ul><li><strong>NVMeåè®®</strong>çš„æ™®åŠï¼šç›¸æ¯”æ—©æœŸSSDä½¿ç”¨çš„SATAæ¥å£ï¼ŒNVMeç›´æ¥é€šè¿‡PCIeæ€»çº¿ä¸CPUé€šä¿¡ï¼Œå¸¦å®½æå‡äº†10å€ä»¥ä¸Šï¼Œè¯»å†™é€Ÿåº¦ä»â€œå‡ ç™¾MB/sâ€è·ƒå‡åˆ°â€œå‡ GB/sâ€ï¼Œæ‰“å¼€4Kè§†é¢‘æ–‡ä»¶ã€å¤§å‹è®¾è®¡è½¯ä»¶æ—¶å‡ ä¹æ²¡æœ‰å»¶è¿Ÿã€‚</li><li><strong>QLCé—ªå­˜çš„æˆæœ¬ä¸‹é™</strong>ï¼šæ—©æœŸSSDå› æˆæœ¬é«˜ï¼Œå®¹é‡æ™®éåœ¨128GB-256GBï¼›è€Œç°åœ¨1TBå®¹é‡çš„QLC SSDä»·æ ¼å·²éå¸¸äº²æ°‘ï¼Œæ—¢èƒ½æ»¡è¶³æ—¥å¸¸æ–‡ä»¶å­˜å‚¨ï¼Œä¹Ÿèƒ½è£…ä¸‹å¤šä¸ªå¤§å‹æ¸¸æˆæˆ–ä¸“ä¸šè½¯ä»¶ã€‚</li></ul><p>å¯¹æ™®é€šç”¨æˆ·æ¥è¯´ï¼Œå­˜å‚¨æŠ€æœ¯çš„è¿›æ­¥ä¸æ˜¯â€œå‚æ•°çš„èƒœåˆ©â€ï¼Œè€Œæ˜¯â€œæ‰“å¼€æ–‡ä»¶ä¸ç”¨ç­‰ã€ç¼–è¾‘è§†é¢‘ä¸å¡é¡¿â€çš„å®åœ¨ä½“éªŒã€‚</p><h2 id="äºŒã€ç½‘ç»œä¼ è¾“ï¼šä»â€œæ–­æ–­ç»­ç»­â€åˆ°â€œå®æ—¶äº’åŠ¨â€"><a href="#äºŒã€ç½‘ç»œä¼ è¾“ï¼šä»â€œæ–­æ–­ç»­ç»­â€åˆ°â€œå®æ—¶äº’åŠ¨â€" class="headerlink" title="äºŒã€ç½‘ç»œä¼ è¾“ï¼šä»â€œæ–­æ–­ç»­ç»­â€åˆ°â€œå®æ—¶äº’åŠ¨â€"></a>äºŒã€ç½‘ç»œä¼ è¾“ï¼šä»â€œæ–­æ–­ç»­ç»­â€åˆ°â€œå®æ—¶äº’åŠ¨â€</h2><p>ç–«æƒ…æœŸé—´ï¼Œè¿œç¨‹åŠå…¬å’Œåœ¨çº¿å­¦ä¹ æˆä¸ºå¸¸æ€ï¼Œå¾ˆå¤šäººéƒ½ç»å†è¿‡â€œè§†é¢‘ä¼šè®®å¡æˆPPTâ€â€œåœ¨çº¿è¯¾å ‚å£°éŸ³å»¶è¿Ÿâ€çš„å°´å°¬ã€‚è¿™èƒŒåçš„æ ¸å¿ƒé—®é¢˜ï¼Œæ˜¯æ—©æœŸç½‘ç»œä¼ è¾“åœ¨<strong>å¸¦å®½ã€å»¶è¿Ÿã€ç¨³å®šæ€§</strong>ä¸Šçš„ä¸è¶³ã€‚è€Œç°åœ¨ï¼Œè¿™äº›é—®é¢˜çš„ç¼“è§£ï¼Œç¦»ä¸å¼€ä¸¤é¡¹å…³é”®æŠ€æœ¯çš„æˆç†Ÿï¼š</p><h3 id="1-5Gä¸Wi-Fi-6ï¼šè§£å†³â€œå¸¦å®½ä¸å¤Ÿç”¨â€çš„é—®é¢˜"><a href="#1-5Gä¸Wi-Fi-6ï¼šè§£å†³â€œå¸¦å®½ä¸å¤Ÿç”¨â€çš„é—®é¢˜" class="headerlink" title="1. 5Gä¸Wi-Fi 6ï¼šè§£å†³â€œå¸¦å®½ä¸å¤Ÿç”¨â€çš„é—®é¢˜"></a>1. 5Gä¸Wi-Fi 6ï¼šè§£å†³â€œå¸¦å®½ä¸å¤Ÿç”¨â€çš„é—®é¢˜</h3><ul><li>5Gç½‘ç»œçš„å³°å€¼é€Ÿç‡å¯è¾¾10Gbpsï¼Œæ˜¯4Gçš„10-100å€ï¼Œå³ä½¿åœ¨æˆ·å¤–ç”¨æ‰‹æœºå¼€çƒ­ç‚¹å‚åŠ è§†é¢‘ä¼šè®®ï¼Œä¹Ÿèƒ½æ”¯æŒ4Kç”»è´¨çš„å®æ—¶ä¼ è¾“ï¼›</li><li>Wi-Fi 6ï¼ˆ802.11axï¼‰çš„å•è®¾å¤‡é€Ÿç‡æå‡åˆ°9.6Gbpsï¼ŒåŒæ—¶æ”¯æŒæ›´å¤šè®¾å¤‡è¿æ¥ï¼ˆæœ€å¤šå¯åŒæ—¶è¿æ¥100+è®¾å¤‡ï¼‰â€”â€”è¿™æ„å‘³ç€ï¼Œå®¶é‡Œçš„ç”µè§†ã€æ‰‹æœºã€ç”µè„‘ã€æ™ºèƒ½éŸ³ç®±åŒæ—¶è”ç½‘ï¼Œä¹Ÿä¸ä¼šå‡ºç°â€œæŠ¢ç½‘é€Ÿâ€å¯¼è‡´çš„å¡é¡¿ã€‚</li></ul><h3 id="2-è¾¹ç¼˜è®¡ç®—ï¼šé™ä½â€œæ•°æ®è·‘å¤ªè¿œâ€çš„å»¶è¿Ÿ"><a href="#2-è¾¹ç¼˜è®¡ç®—ï¼šé™ä½â€œæ•°æ®è·‘å¤ªè¿œâ€çš„å»¶è¿Ÿ" class="headerlink" title="2. è¾¹ç¼˜è®¡ç®—ï¼šé™ä½â€œæ•°æ®è·‘å¤ªè¿œâ€çš„å»¶è¿Ÿ"></a>2. è¾¹ç¼˜è®¡ç®—ï¼šé™ä½â€œæ•°æ®è·‘å¤ªè¿œâ€çš„å»¶è¿Ÿ</h3><p>ä¼ ç»Ÿçš„ç½‘ç»œæ¶æ„ä¸­ï¼Œæˆ‘ä»¬çš„è§†é¢‘é€šè¯æ•°æ®éœ€è¦å…ˆä¼ åˆ°è¿œæ–¹çš„â€œä¸­å¿ƒæœåŠ¡å™¨â€ï¼Œå†è½¬å‘ç»™å¯¹æ–¹ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¼šäº§ç”Ÿå‡ åç”šè‡³ä¸Šç™¾æ¯«ç§’çš„å»¶è¿Ÿï¼ˆå³â€œç½‘ç»œæ—¶å»¶â€ï¼‰ã€‚è€Œè¾¹ç¼˜è®¡ç®—åˆ™æŠŠâ€œæœåŠ¡å™¨â€æ¬åˆ°äº†ç¦»ç”¨æˆ·æ›´è¿‘çš„åœ°æ–¹ï¼ˆæ¯”å¦‚åŸå¸‚çš„åŸºç«™ã€åŒºåŸŸæ•°æ®ä¸­å¿ƒï¼‰ï¼Œæ•°æ®ä¼ è¾“è·ç¦»ç¼©çŸ­ï¼Œæ—¶å»¶å¯ä»¥é™ä½åˆ°10æ¯«ç§’ä»¥å†…â€”â€”è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆç°åœ¨çš„â€œå®æ—¶è¿éº¦â€â€œäº‘æ¸¸æˆâ€èƒ½åšåˆ°â€œæ“ä½œæ— å»¶è¿Ÿâ€çš„å…³é”®ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼šä»¥å‰ç©äº‘æ¸¸æˆï¼ŒæŒ‰ä¸‹â€œå°„å‡»â€æŒ‰é’®åï¼Œéœ€è¦ç­‰1-2ç§’æ‰èƒ½çœ‹åˆ°ç”»é¢ååº”ï¼›ç°åœ¨æœ‰äº†è¾¹ç¼˜è®¡ç®—å’Œé«˜é€Ÿç½‘ç»œï¼Œå»¶è¿Ÿå‡ ä¹å¯ä»¥å¿½ç•¥ï¼Œä½“éªŒå’Œåœ¨æœ¬åœ°ç©æ¸¸æˆæ²¡ä»€ä¹ˆåŒºåˆ«ã€‚</p><h2 id="ä¸‰ã€ç³»ç»Ÿä¼˜åŒ–ï¼šä»â€œèµ„æºæµªè´¹â€åˆ°â€œæ™ºèƒ½è°ƒåº¦â€"><a href="#ä¸‰ã€ç³»ç»Ÿä¼˜åŒ–ï¼šä»â€œèµ„æºæµªè´¹â€åˆ°â€œæ™ºèƒ½è°ƒåº¦â€" class="headerlink" title="ä¸‰ã€ç³»ç»Ÿä¼˜åŒ–ï¼šä»â€œèµ„æºæµªè´¹â€åˆ°â€œæ™ºèƒ½è°ƒåº¦â€"></a>ä¸‰ã€ç³»ç»Ÿä¼˜åŒ–ï¼šä»â€œèµ„æºæµªè´¹â€åˆ°â€œæ™ºèƒ½è°ƒåº¦â€</h2><p>é™¤äº†ç¡¬ä»¶å’Œç½‘ç»œï¼Œæ“ä½œç³»ç»Ÿçš„ä¼˜åŒ–åŒæ ·é‡è¦ã€‚æ—©æœŸçš„ç³»ç»Ÿï¼ˆæ¯”å¦‚Windows XPã€å®‰å“4.0ï¼‰å¯¹ç¡¬ä»¶èµ„æºçš„è°ƒåº¦èƒ½åŠ›è¾ƒå¼±ï¼Œæ¯”å¦‚ï¼š</p><ul><li>æ‰“å¼€å¤šä¸ªAPPåï¼Œåå°åº”ç”¨ä¸ä¼šâ€œä¸»åŠ¨é‡Šæ”¾å†…å­˜â€ï¼Œå¯¼è‡´å¯ç”¨å†…å­˜è¶Šæ¥è¶Šå°‘ï¼Œæ‰‹æœºæˆ–ç”µè„‘è¶Šæ¥è¶Šå¡ï¼›</li><li>CPUèµ„æºåˆ†é…â€œä¸€åˆ€åˆ‡â€ï¼Œä¸ç®¡æ˜¯å¾®ä¿¡èŠå¤©è¿˜æ˜¯è§†é¢‘æ¸²æŸ“ï¼Œéƒ½ç”¨åŒæ ·çš„æ€§èƒ½æ¨¡å¼ï¼Œæ—¢æµªè´¹ç”µé‡ï¼Œåˆæ— æ³•æ»¡è¶³é«˜è´Ÿè½½éœ€æ±‚ã€‚</li></ul><p>è€Œç°åœ¨çš„æ“ä½œç³»ç»Ÿï¼ˆå¦‚Windows 11ã€å®‰å“14ï¼‰ï¼Œé€šè¿‡<strong>æ™ºèƒ½èµ„æºè°ƒåº¦</strong>æŠ€æœ¯ï¼Œè®©ç¡¬ä»¶æ€§èƒ½â€œç”¨åœ¨åˆ€åˆƒä¸Šâ€ï¼š</p><h3 id="1-å†…å­˜ç®¡ç†ï¼šâ€œåŠ¨æ€å›æ”¶â€ä¸â€œå‹ç¼©ä¼˜åŒ–â€"><a href="#1-å†…å­˜ç®¡ç†ï¼šâ€œåŠ¨æ€å›æ”¶â€ä¸â€œå‹ç¼©ä¼˜åŒ–â€" class="headerlink" title="1. å†…å­˜ç®¡ç†ï¼šâ€œåŠ¨æ€å›æ”¶â€ä¸â€œå‹ç¼©ä¼˜åŒ–â€"></a>1. å†…å­˜ç®¡ç†ï¼šâ€œåŠ¨æ€å›æ”¶â€ä¸â€œå‹ç¼©ä¼˜åŒ–â€</h3><ul><li>å®‰å“ç³»ç»Ÿçš„â€œå¢“ç¢‘æœºåˆ¶â€ï¼ˆAndroid 12åä¼˜åŒ–ï¼‰ï¼šå½“APPè¿›å…¥åå°æ—¶ï¼Œç³»ç»Ÿä¼šâ€œå†»ç»“â€å…¶å ç”¨çš„å†…å­˜ï¼Œä¸å†è®©å®ƒæ¶ˆè€—èµ„æºï¼›å¦‚æœå†…å­˜ä¸è¶³ï¼Œä¼šè‡ªåŠ¨å›æ”¶ä¼˜å…ˆçº§ä½çš„åå°APPå†…å­˜ï¼Œä¿è¯å‰å°åº”ç”¨æµç•…è¿è¡Œã€‚</li><li>Windowsçš„â€œå†…å­˜å‹ç¼©â€ï¼šå½“ç‰©ç†å†…å­˜ä¸è¶³æ—¶ï¼Œç³»ç»Ÿä¼šå°†ä¸å¸¸ç”¨çš„å†…å­˜æ•°æ®å‹ç¼©ï¼ˆå‹ç¼©ç‡å¯è¾¾50%ä»¥ä¸Šï¼‰ï¼Œè€Œä¸æ˜¯ç›´æ¥å†™å…¥ç¡¬ç›˜ï¼ˆè™šæ‹Ÿå†…å­˜ï¼‰ï¼Œé¿å…äº†å› ç¡¬ç›˜é€Ÿåº¦æ…¢å¯¼è‡´çš„å¡é¡¿ã€‚</li></ul><h3 id="2-CPUè°ƒåº¦ï¼šâ€œæŒ‰éœ€åˆ†é…â€ä¸â€œèƒ½æ•ˆå¹³è¡¡â€"><a href="#2-CPUè°ƒåº¦ï¼šâ€œæŒ‰éœ€åˆ†é…â€ä¸â€œèƒ½æ•ˆå¹³è¡¡â€" class="headerlink" title="2. CPUè°ƒåº¦ï¼šâ€œæŒ‰éœ€åˆ†é…â€ä¸â€œèƒ½æ•ˆå¹³è¡¡â€"></a>2. CPUè°ƒåº¦ï¼šâ€œæŒ‰éœ€åˆ†é…â€ä¸â€œèƒ½æ•ˆå¹³è¡¡â€</h3><ul><li>æ‰‹æœºçš„â€œå¼‚æ„è®¡ç®—â€ï¼šç°åœ¨çš„æ‰‹æœºCPUå¤§å¤šæ˜¯â€œå¤šæ ¸å¿ƒæ¶æ„â€ï¼ˆæ¯”å¦‚4ä¸ªå°æ ¸+4ä¸ªå¤§æ ¸ï¼‰ï¼Œç³»ç»Ÿä¼šæ ¹æ®ä»»åŠ¡è½»é‡åˆ†é…æ ¸å¿ƒï¼šèŠå¾®ä¿¡æ—¶ç”¨ä½åŠŸè€—å°æ ¸ï¼Œçœç”µé‡ï¼›ç©æ¸¸æˆæ—¶è°ƒç”¨é«˜æ€§èƒ½å¤§æ ¸ï¼Œä¿è¯å¸§ç‡ç¨³å®šã€‚</li><li>Windowsçš„â€œæ€§èƒ½æ¨¡å¼â€ï¼šç”¨æˆ·å¯ä»¥æ ¹æ®éœ€æ±‚åˆ‡æ¢â€œèŠ‚èƒ½æ¨¡å¼â€â€œå¹³è¡¡æ¨¡å¼â€â€œé«˜æ€§èƒ½æ¨¡å¼â€ï¼Œæ¯”å¦‚å¤–å‡ºåŠå…¬æ—¶ç”¨èŠ‚èƒ½æ¨¡å¼å»¶é•¿ç»­èˆªï¼Œåšè§†é¢‘å‰ªè¾‘æ—¶å¼€é«˜æ€§èƒ½æ¨¡å¼æå‡æ•ˆç‡ã€‚</li></ul><h2 id="å››ã€æŠ€æœ¯çš„ç»ˆæç›®æ ‡ï¼šè®©â€œå¤æ‚â€éšäºâ€œæ— å½¢â€"><a href="#å››ã€æŠ€æœ¯çš„ç»ˆæç›®æ ‡ï¼šè®©â€œå¤æ‚â€éšäºâ€œæ— å½¢â€" class="headerlink" title="å››ã€æŠ€æœ¯çš„ç»ˆæç›®æ ‡ï¼šè®©â€œå¤æ‚â€éšäºâ€œæ— å½¢â€"></a>å››ã€æŠ€æœ¯çš„ç»ˆæç›®æ ‡ï¼šè®©â€œå¤æ‚â€éšäºâ€œæ— å½¢â€</h2><p>å›é¡¾è®¡ç®—æœºæŠ€æœ¯çš„å‘å±•ï¼Œæˆ‘ä»¬ä¼šå‘ç°ä¸€ä¸ªè§„å¾‹ï¼šçœŸæ­£ä¼˜ç§€çš„æŠ€æœ¯ï¼Œä»æ¥ä¸æ˜¯è®©ç”¨æˆ·å»â€œç†è§£å®ƒâ€ï¼Œè€Œæ˜¯è®©ç”¨æˆ·â€œæ„Ÿå—ä¸åˆ°å®ƒçš„å­˜åœ¨â€â€”â€”å°±åƒæˆ‘ä»¬ä¸ä¼šåœ¨æ„SSDçš„é—ªå­˜èŠ¯ç‰‡å¦‚ä½•å·¥ä½œï¼Œä¹Ÿä¸ä¼šå…³å¿ƒWi-Fi 6çš„åè®®ç»†èŠ‚ï¼Œæˆ‘ä»¬åªéœ€è¦â€œæ‰“å¼€æ–‡ä»¶å¾ˆå¿«â€â€œè§†é¢‘é€šè¯å¾ˆæµç•…â€ã€‚</p><p>æœªæ¥ï¼Œéšç€AIä¸è®¡ç®—æœºæŠ€æœ¯çš„èåˆï¼ˆæ¯”å¦‚AIé©±åŠ¨çš„æ™ºèƒ½å†…å­˜è°ƒåº¦ã€AIä¼˜åŒ–çš„ç½‘ç»œä¼ è¾“è·¯å¾„ï¼‰ï¼Œæˆ‘ä»¬çš„äº¤äº’ä½“éªŒè¿˜ä¼šè¿›ä¸€æ­¥å‡çº§ï¼šå¯èƒ½ç”µè„‘ä¼šâ€œé¢„åˆ¤â€ä½ è¦æ‰“å¼€çš„æ–‡ä»¶ï¼Œæå‰åŠ è½½åˆ°å†…å­˜ï¼›å¯èƒ½ç½‘ç»œä¼šâ€œè‡ªåŠ¨é¿å¼€â€æ‹¥å µè·¯æ®µï¼Œä¿è¯è§†é¢‘ä¼šè®®ä¸å¡é¡¿ã€‚</p><p>æŠ€æœ¯çš„è¿›æ­¥ï¼Œæœ€ç»ˆæ˜¯ä¸ºäº†â€œè®©å·¥å…·å›å½’å·¥å…·çš„æœ¬è´¨â€â€”â€”è®©æˆ‘ä»¬ä¸å†è¢«â€œå¡é¡¿â€â€œç­‰å¾…â€å›°æ‰°ï¼Œè€Œæ˜¯æ›´ä¸“æ³¨äºå†…å®¹åˆ›ä½œã€æ²Ÿé€šåä½œï¼Œæˆ–è€…å•çº¯åœ°äº«å—æ•°å­—ç”Ÿæ´»çš„ä¹è¶£ã€‚è¿™ï¼Œæˆ–è®¸å°±æ˜¯è®¡ç®—æœºæŠ€æœ¯æœ€åŠ¨äººçš„åœ°æ–¹ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;object class=&quot;ghbdage&quot; style=&quot;margin-inline:5px&quot; title=&quot;&quot; standby=&quot;loading...&quot; data=&quot;https://img.shields.io/badge/Butterfly-Theme-orange?lo</summary>
      
    
    
    
    
    <category term="è®¡ç®—æœºæ‚è°ˆ" scheme="https://nmcb666.vip/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%9D%82%E8%B0%88/"/>
    
  </entry>
  
</feed>
